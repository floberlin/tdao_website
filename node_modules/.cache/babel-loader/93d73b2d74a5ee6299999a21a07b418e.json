{"ast":null,"code":"import _regeneratorRuntime from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport Dialog from \"@ui5/webcomponents/dist/Dialog.js\";\nimport Button from \"@ui5/webcomponents/dist/Button.js\";\nimport BusyIndicator from \"@ui5/webcomponents/dist/BusyIndicator.js\";\nimport { BrowserMultiFormatReader, NotFoundException } from \"@zxing/library\"; // Template\n\nimport BarcodeScannerDialogTemplate from \"./generated/templates/BarcodeScannerDialogTemplate.lit.js\"; // Styles\n\nimport barcodeScannerDialogCss from \"./generated/themes/BarcodeScannerDialog.css.js\"; // Texts\n\nimport { BARCODE_SCANNER_DIALOG_CANCEL_BUTTON_TXT, BARCODE_SCANNER_DIALOG_LOADING_TXT } from \"./generated/i18n/i18n-defaults.js\";\nvar defaultMediaConstraints = {\n  audio: false,\n  video: {\n    height: {\n      min: 480,\n      ideal: 960,\n      max: 1440\n    },\n    aspectRatio: 1.333333333,\n    facingMode: \"environment\"\n  }\n};\n/**\n * @public\n */\n\nvar metadata = {\n  tag: \"ui5-barcode-scanner-dialog\",\n  languageAware: true,\n  slots:\n  /** @lends  sap.ui.webcomponents.fiori.BarcodeScannerDialog.prototype */\n  {},\n  properties:\n  /** @lends  sap.ui.webcomponents.fiori.BarcodeScannerDialog.prototype */\n  {\n    /**\n     * Indicates whether a loading indicator should be displayed in the dialog.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @private\n     */\n    loading: {\n      type: Boolean\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.fiori.BarcodeScannerDialog.prototype */\n  {\n    /**\n     * Fires when the scan is completed successfuuly.\n     *\n     * @event sap.ui.webcomponents.fiori.BarcodeScannerDialog#scan-success\n     * @param {String} text the scan result as string\n     * @param {Object} rawBytes the scan result as a Uint8Array\n     * @public\n     */\n    \"scan-success\": {\n      detail: {\n        text: {\n          type: String\n        },\n        rawBytes: {\n          type: Object\n        }\n      }\n    },\n\n    /**\n     * Fires when the scan fails with error.\n     *\n     * @event sap.ui.webcomponents.fiori.BarcodeScannerDialog#scan-error\n     * @param {String} message the error message\n     * @public\n     */\n    \"scan-error\": {\n      detail: {\n        message: {\n          type: String\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>BarcodeScannerDialog</code> component provides barcode scanning functionality for all devices that support the <code>MediaDevices.getUserMedia()</code> native API.\n * Opening the dialog launches the device camera and scans for known barcode formats.\n * <br>\n * <br>\n * A <code>scanSuccess</code> event fires whenever a barcode is identified\n * and a <code>scanError</code> event fires when the scan failed (for example, due to missing permisions).\n * <br>\n * <br>\n * Internally, the component  uses the zxing-js/library third party OSS.\n *\n * For a list of supported barcode formats, see the <ui5-link target=\"_blank\" href=\"https://github.com/zxing-js/library\">zxing-js/library</ui5-link> documentation.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.fiori.BarcodeScannerDialog\n * @extends UI5Element\n * @tagname ui5-barcode-scanner-dialog\n * @public\n * @since 1.0.0-rc.15\n */\n\nvar BarcodeScannerDialog = /*#__PURE__*/function (_UI5Element) {\n  _inherits(BarcodeScannerDialog, _UI5Element);\n\n  var _super = _createSuper(BarcodeScannerDialog);\n\n  function BarcodeScannerDialog() {\n    var _this;\n\n    _classCallCheck(this, BarcodeScannerDialog);\n\n    _this = _super.call(this);\n    _this.i18nBundle = getI18nBundle(\"@ui5/webcomponents-fiori\");\n    _this._codeReader = new BrowserMultiFormatReader();\n    return _this;\n  }\n\n  _createClass(BarcodeScannerDialog, [{\n    key: \"show\",\n    value:\n    /**\n     * Shows a dialog with the camera videostream. Starts a scan session.\n     * @public\n     */\n    function show() {\n      var _this2 = this;\n\n      if (this.loading) {\n        console.warn(\"Barcode scanning is already in progress.\"); // eslint-disable-line\n\n        return;\n      }\n\n      if (!this._hasGetUserMedia()) {\n        this.fireEvent(\"scan-error\", {\n          message: \"getUserMedia() is not supported by your browser\"\n        });\n        return;\n      }\n\n      this.loading = true;\n\n      this._getUserPermission().then(function () {\n        return _this2._showDialog();\n      }).catch(function (err) {\n        _this2.fireEvent(\"scan-error\", {\n          message: err\n        });\n\n        _this2.loading = false;\n      });\n    }\n    /**\n     * Closes the dialog and the scan session.\n     * @public\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      this._closeDialog();\n\n      this.loading = false;\n    }\n    /**\n     *  PRIVATE METHODS\n     */\n\n  }, {\n    key: \"_hasGetUserMedia\",\n    value: function _hasGetUserMedia() {\n      return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n    }\n  }, {\n    key: \"_getUserPermission\",\n    value: function _getUserPermission() {\n      return navigator.mediaDevices.getUserMedia(defaultMediaConstraints);\n    }\n  }, {\n    key: \"_getDialog\",\n    value: function () {\n      var _getDialog2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var staticAreaItem;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.getStaticAreaItemDomRef();\n\n              case 2:\n                staticAreaItem = _context.sent;\n                return _context.abrupt(\"return\", staticAreaItem.querySelector(\"[ui5-dialog]\"));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _getDialog() {\n        return _getDialog2.apply(this, arguments);\n      }\n\n      return _getDialog;\n    }()\n  }, {\n    key: \"_getVideoElement\",\n    value: function () {\n      var _getVideoElement2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var staticAreaItem;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.getStaticAreaItemDomRef();\n\n              case 2:\n                staticAreaItem = _context2.sent;\n                return _context2.abrupt(\"return\", staticAreaItem.querySelector(\".ui5-barcode-scanner-dialog-video\"));\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function _getVideoElement() {\n        return _getVideoElement2.apply(this, arguments);\n      }\n\n      return _getVideoElement;\n    }()\n  }, {\n    key: \"_showDialog\",\n    value: function () {\n      var _showDialog2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this._getDialog();\n\n              case 2:\n                this.dialog = _context3.sent;\n                this.dialog.show();\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function _showDialog() {\n        return _showDialog2.apply(this, arguments);\n      }\n\n      return _showDialog;\n    }()\n  }, {\n    key: \"_closeDialog\",\n    value: function _closeDialog() {\n      if (this._isOpen) {\n        this.dialog.close();\n      }\n    }\n  }, {\n    key: \"_startReader\",\n    value: function _startReader() {\n      this._decodeFromCamera(null);\n    }\n  }, {\n    key: \"_resetReader\",\n    value: function () {\n      var _resetReader2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var videoElement;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this._getVideoElement();\n\n              case 2:\n                videoElement = _context4.sent;\n                videoElement.pause();\n\n                this._codeReader.reset();\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function _resetReader() {\n        return _resetReader2.apply(this, arguments);\n      }\n\n      return _resetReader;\n    }()\n  }, {\n    key: \"_decodeFromCamera\",\n    value: function () {\n      var _decodeFromCamera2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(cameraId) {\n        var _this3 = this;\n\n        var videoElement;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this._getVideoElement();\n\n              case 2:\n                videoElement = _context5.sent;\n\n                this._codeReader.decodeFromVideoDevice(cameraId, videoElement, function (result, err) {\n                  _this3.loading = false;\n\n                  if (result) {\n                    _this3.fireEvent(\"scan-success\", {\n                      text: result.getText(),\n                      rawBytes: result.getRawBytes()\n                    });\n                  }\n\n                  if (err && !(err instanceof NotFoundException)) {\n                    _this3.fireEvent(\"scan-error\", {\n                      message: err\n                    });\n                  }\n                }).catch(function (err) {\n                  return _this3.fireEvent(\"scan-error\", {\n                    message: err\n                  });\n                });\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function _decodeFromCamera(_x) {\n        return _decodeFromCamera2.apply(this, arguments);\n      }\n\n      return _decodeFromCamera;\n    }()\n  }, {\n    key: \"_isOpen\",\n    get: function get() {\n      return !!this.dialog && this.dialog.opened;\n    }\n  }, {\n    key: \"_cancelButtonText\",\n    get: function get() {\n      return this.i18nBundle.getText(BARCODE_SCANNER_DIALOG_CANCEL_BUTTON_TXT);\n    }\n  }, {\n    key: \"_busyIndicatorText\",\n    get: function get() {\n      return this.i18nBundle.getText(BARCODE_SCANNER_DIALOG_LOADING_TXT);\n    }\n  }], [{\n    key: \"metadata\",\n    get: function get() {\n      return metadata;\n    }\n  }, {\n    key: \"render\",\n    get: function get() {\n      return litRender;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"staticAreaTemplate\",\n    get: function get() {\n      return BarcodeScannerDialogTemplate;\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return null;\n    }\n  }, {\n    key: \"staticAreaStyles\",\n    get: function get() {\n      return [barcodeScannerDialogCss];\n    }\n  }, {\n    key: \"onDefine\",\n    value: function () {\n      var _onDefine = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return fetchI18nBundle(\"@ui5/webcomponents-fiori\");\n\n              case 2:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function onDefine() {\n        return _onDefine.apply(this, arguments);\n      }\n\n      return onDefine;\n    }()\n  }, {\n    key: \"dependencies\",\n    get: function get() {\n      return [Dialog, BusyIndicator, Button];\n    }\n  }]);\n\n  return BarcodeScannerDialog;\n}(UI5Element);\n\nBarcodeScannerDialog.define();\nexport default BarcodeScannerDialog;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents-fiori/dist/BarcodeScannerDialog.js"],"names":["UI5Element","litRender","fetchI18nBundle","getI18nBundle","Dialog","Button","BusyIndicator","BrowserMultiFormatReader","NotFoundException","BarcodeScannerDialogTemplate","barcodeScannerDialogCss","BARCODE_SCANNER_DIALOG_CANCEL_BUTTON_TXT","BARCODE_SCANNER_DIALOG_LOADING_TXT","defaultMediaConstraints","audio","video","height","min","ideal","max","aspectRatio","facingMode","metadata","tag","languageAware","slots","properties","loading","type","Boolean","events","detail","text","String","rawBytes","Object","message","BarcodeScannerDialog","i18nBundle","_codeReader","console","warn","_hasGetUserMedia","fireEvent","_getUserPermission","then","_showDialog","catch","err","_closeDialog","navigator","mediaDevices","getUserMedia","getStaticAreaItemDomRef","staticAreaItem","querySelector","_getDialog","dialog","show","_isOpen","close","_decodeFromCamera","_getVideoElement","videoElement","pause","reset","cameraId","decodeFromVideoDevice","result","getText","getRawBytes","opened","define"],"mappings":"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","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { fetchI18nBundle, getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport Dialog from \"@ui5/webcomponents/dist/Dialog.js\";\nimport Button from \"@ui5/webcomponents/dist/Button.js\";\nimport BusyIndicator from \"@ui5/webcomponents/dist/BusyIndicator.js\";\nimport { BrowserMultiFormatReader, NotFoundException } from \"@zxing/library\";\n\n// Template\nimport BarcodeScannerDialogTemplate from \"./generated/templates/BarcodeScannerDialogTemplate.lit.js\";\n\n// Styles\nimport barcodeScannerDialogCss from \"./generated/themes/BarcodeScannerDialog.css.js\";\n\n// Texts\nimport {\n\tBARCODE_SCANNER_DIALOG_CANCEL_BUTTON_TXT,\n\tBARCODE_SCANNER_DIALOG_LOADING_TXT,\n} from \"./generated/i18n/i18n-defaults.js\";\n\nconst defaultMediaConstraints = {\n\taudio: false,\n\tvideo: {\n\t\theight: {\n\t\t\tmin: 480,\n\t\t\tideal: 960,\n\t\t\tmax: 1440,\n\t\t},\n\t\taspectRatio: 1.333333333,\n\t\tfacingMode: \"environment\",\n\t},\n};\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-barcode-scanner-dialog\",\n\tlanguageAware: true,\n\tslots: /** @lends  sap.ui.webcomponents.fiori.BarcodeScannerDialog.prototype */ {\n\t},\n\tproperties: /** @lends  sap.ui.webcomponents.fiori.BarcodeScannerDialog.prototype */ {\n\t\t/**\n\t\t * Indicates whether a loading indicator should be displayed in the dialog.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @private\n\t\t */\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.fiori.BarcodeScannerDialog.prototype */ {\n\t\t/**\n\t\t * Fires when the scan is completed successfuuly.\n\t\t *\n\t\t * @event sap.ui.webcomponents.fiori.BarcodeScannerDialog#scan-success\n\t\t * @param {String} text the scan result as string\n\t\t * @param {Object} rawBytes the scan result as a Uint8Array\n\t\t * @public\n\t\t */\n\t\t \"scan-success\": {\n\t\t\tdetail: {\n\t\t\t\ttext: { type: String },\n\t\t\t\trawBytes: { type: Object },\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * Fires when the scan fails with error.\n\t\t *\n\t\t * @event sap.ui.webcomponents.fiori.BarcodeScannerDialog#scan-error\n\t\t * @param {String} message the error message\n\t\t * @public\n\t\t */\n\t\t \"scan-error\": {\n\t\t\tdetail: {\n\t\t\t\tmessage: { type: String },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>BarcodeScannerDialog</code> component provides barcode scanning functionality for all devices that support the <code>MediaDevices.getUserMedia()</code> native API.\n * Opening the dialog launches the device camera and scans for known barcode formats.\n * <br>\n * <br>\n * A <code>scanSuccess</code> event fires whenever a barcode is identified\n * and a <code>scanError</code> event fires when the scan failed (for example, due to missing permisions).\n * <br>\n * <br>\n * Internally, the component  uses the zxing-js/library third party OSS.\n *\n * For a list of supported barcode formats, see the <ui5-link target=\"_blank\" href=\"https://github.com/zxing-js/library\">zxing-js/library</ui5-link> documentation.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.fiori.BarcodeScannerDialog\n * @extends UI5Element\n * @tagname ui5-barcode-scanner-dialog\n * @public\n * @since 1.0.0-rc.15\n */\nclass BarcodeScannerDialog extends UI5Element {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.i18nBundle = getI18nBundle(\"@ui5/webcomponents-fiori\");\n\t\tthis._codeReader = new BrowserMultiFormatReader();\n\t}\n\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn null;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn BarcodeScannerDialogTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn null;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn [barcodeScannerDialogCss];\n\t}\n\n\tstatic async onDefine() {\n\t\tawait fetchI18nBundle(\"@ui5/webcomponents-fiori\");\n\t}\n\n\t/**\n\t * Shows a dialog with the camera videostream. Starts a scan session.\n\t * @public\n\t */\n\tshow() {\n\t\tif (this.loading) {\n\t\t\tconsole.warn(\"Barcode scanning is already in progress.\");  // eslint-disable-line\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._hasGetUserMedia()) {\n\t\t\tthis.fireEvent(\"scan-error\", { message: \"getUserMedia() is not supported by your browser\" });\n\t\t\treturn;\n\t\t}\n\n\t\tthis.loading = true;\n\n\t\tthis._getUserPermission()\n\t\t\t.then(() => this._showDialog())\n\t\t\t.catch(err => {\n\t\t\t\tthis.fireEvent(\"scan-error\", { message: err });\n\t\t\t\tthis.loading = false;\n\t\t\t});\n\t}\n\n\t/**\n\t * Closes the dialog and the scan session.\n\t * @public\n\t */\n\tclose() {\n\t\tthis._closeDialog();\n\t\tthis.loading = false;\n\t}\n\n\t/**\n\t *  PRIVATE METHODS\n\t */\n\n\t_hasGetUserMedia() {\n\t\treturn !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\n\t}\n\n\t_getUserPermission() {\n\t\treturn navigator.mediaDevices.getUserMedia(defaultMediaConstraints);\n\t}\n\n\tasync _getDialog() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\treturn staticAreaItem.querySelector(\"[ui5-dialog]\");\n\t}\n\n\tasync _getVideoElement() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\treturn staticAreaItem.querySelector(\".ui5-barcode-scanner-dialog-video\");\n\t}\n\n\tasync _showDialog() {\n\t\tthis.dialog = await this._getDialog();\n\t\tthis.dialog.show();\n\t}\n\n\t_closeDialog() {\n\t\tif (this._isOpen) {\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n\n\t_startReader() {\n\t\tthis._decodeFromCamera(null);\n\t}\n\n\tasync _resetReader() {\n\t\tconst videoElement = await this._getVideoElement();\n\t\tvideoElement.pause();\n\t\tthis._codeReader.reset();\n\t}\n\n\tasync _decodeFromCamera(cameraId) {\n\t\tconst videoElement = await this._getVideoElement();\n\n\t\tthis._codeReader.decodeFromVideoDevice(cameraId, videoElement, (result, err) => {\n\t\t\tthis.loading = false;\n\t\t\tif (result) {\n\t\t\t\tthis.fireEvent(\"scan-success\",\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: result.getText(),\n\t\t\t\t\t\trawBytes: result.getRawBytes(),\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tif (err && !(err instanceof NotFoundException)) {\n\t\t\t\tthis.fireEvent(\"scan-error\", { message: err });\n\t\t\t}\n\t\t}).catch(err => this.fireEvent(\"scan-error\", { message: err }));\n\t}\n\n\tget _isOpen() {\n\t\treturn !!this.dialog && this.dialog.opened;\n\t}\n\n\tget _cancelButtonText() {\n\t\treturn this.i18nBundle.getText(BARCODE_SCANNER_DIALOG_CANCEL_BUTTON_TXT);\n\t}\n\n\tget _busyIndicatorText() {\n\t\treturn this.i18nBundle.getText(BARCODE_SCANNER_DIALOG_LOADING_TXT);\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\tDialog,\n\t\t\tBusyIndicator,\n\t\t\tButton,\n\t\t];\n\t}\n}\n\nBarcodeScannerDialog.define();\n\nexport default BarcodeScannerDialog;\n"]},"metadata":{},"sourceType":"module"}