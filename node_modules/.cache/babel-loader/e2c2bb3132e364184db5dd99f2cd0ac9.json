{"ast":null,"code":"import _regeneratorRuntime from\"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{ShellBar,ThemeProvider,Input,Avatar,SideNavigation,SideNavigationItem,SideNavigationSubItem,Icon,Button,Popover,RadioButton,TextArea,StandardListItem}from\"@ui5/webcomponents-react\";// eslint-disable-next-line no-unused-vars\nimport\"@ui5/webcomponents-icons/dist/AllIcons.js\";import React,{useState,useRef}from\"react\";import{ethers}from\"ethers\";import\"./App.css\";import{Route,HashRouter}from\"react-router-dom\";import Asset from\"./pages/Asset\";import QR from\"./pages/QR\";import Error from\"./pages/Error\";import Account from\"./pages/Account\";import abi from\"./abi.json\";import{isMobile}from\"react-device-detect\";import WalletConnectProvider from\"@walletconnect/web3-provider\";import{setTheme}from\"@ui5/webcomponents-base/dist/config/Theme\";import{useTranslation}from\"react-i18next\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var provider=null;var signer=null;var address=null;var roProvidernoUser=new ethers.providers.JsonRpcProvider(\"https://polygon-mainnet.infura.io/v3/d8e7160dc78d48dba6ca40b11fdf1cd5\"||\"https://rpc-mainnet.matic.network\");var tdao=new ethers.Contract(\"0xe939789E151608D7442E2e6Ff4ea4E2eaf314cF3\",abi,roProvidernoUser);var roProvider=new WalletConnectProvider({rpc:{137:\"https://polygon-mainnet.infura.io/v3/d8e7160dc78d48dba6ca40b11fdf1cd5\"}});export function ethersConnect(){return _ethersConnect.apply(this,arguments);}function _ethersConnect(){_ethersConnect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!isMobile){_context.next=7;break;}_context.next=4;return roProvider.enable();case 4:provider=new ethers.providers.Web3Provider(roProvider);_context.next=10;break;case 7:provider=new ethers.providers.Web3Provider(window.ethereum,\"any\");_context.next=10;return provider.send(\"eth_requestAccounts\",[]);case 10://[provider.getBlockNumber().then((b) => b - 10000),provider.getBlockNumber().then((b) => b )]\nsigner=provider.getSigner();_context.next=13;return signer.getAddress();case 13:address=_context.sent;tdao=new ethers.Contract(\"0xe939789E151608D7442E2e6Ff4ea4E2eaf314cF3\",abi,signer);//  let filter = tdao.filters.TransferSingle();\n// console.log(filter)\n// console.log(await tdao.filter.TransferSingle());\n// console.log(await tdao.queryFilter(filter, 17862525 , 17862925));\n_context.next=17;return signer.getAddress();case 17:return _context.abrupt(\"return\",_context.sent);case 20:_context.prev=20;_context.t0=_context[\"catch\"](0);//alert(\"Please install Metamask!\")\nconsole.log(\"e :\"+_context.t0);return _context.abrupt(\"return\",\"Read only\");case 24:case\"end\":return _context.stop();}}},_callee,null,[[0,20]]);}));return _ethersConnect.apply(this,arguments);}export function getTokenId(_x){return _getTokenId.apply(this,arguments);}function _getTokenId(){_getTokenId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ipfsId){var rslt;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;ipfsId=ipfsId.split(\"/\")[0];rslt=tdao.getTokenId(ipfsId).then(function(result){return result.toNumber();});return _context2.abrupt(\"return\",rslt);case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",\"\");case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return _getTokenId.apply(this,arguments);}function handleSearch(value){window.location.assign(\"/#/asset/\"+value);}function handleAccount(value){window.location.assign(\"/#/account/\"+address);}function handleQR(){window.location.assign(\"/#/qr\");}function handleHome(){window.location.assign(\"/#/\");}setTheme(\"sap_horizon\");function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(\"none\"),_useState4=_slicedToArray(_useState3,2),menu=_useState4[0],setMenu=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),profile=_useState6[0],setProfile=_useState6[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var popoverRef=useRef();var onButtonClick=function onButtonClick(e){console.log(\"test\",popoverRef);popoverRef.current.showAt(e.target);};var handleClose=function handleClose(){popoverRef.current.close();};var _useState7=useState(t(\"wallet\")),_useState8=_slicedToArray(_useState7,2),userAddress=_useState8[0],setuserAddress=_useState8[1];return/*#__PURE__*/_jsxs(ThemeProvider,{children:[/*#__PURE__*/_jsxs(HashRouter,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"shellbarDiv\",children:/*#__PURE__*/_jsx(ShellBar,{id:\"shellbar\"// primary-title=\"Home\"\n,logo:/*#__PURE__*/_jsx(\"img\",{alt:\"tdao\",mdxtype:\"img\",originaltype:\"img\",src:\"../tdao_cropped.svg\"}),onLogoClick:function onLogoClick(){return handleHome();},onMenuItemClick:function noRefCheck(){},style:{overflow:\"auto\"},className:\"Shell\",onProfileClick:function onProfileClick(){return setMenu(\"block\");},profile:/*#__PURE__*/_jsx(Avatar,{icon:\"menu2\",colorScheme:\"Accent10\",size:\"XS\",shape:\"Square\"}),children:/*#__PURE__*/_jsx(StandardListItem,{icon:\"sys-help\",children:\"Help\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"Menu\",style:{display:menu},children:/*#__PURE__*/_jsxs(SideNavigation,{className:\"Menu\",fixedItems:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(SideNavigationItem,{icon:\"information\",text:t(\"imprint\"),onClick:function onClick(){return window.location.replace(\"https://www.t-systems.com/de/en/imprint\");}})}),onSelectionChange:function noRefCheck(){},slot:\"\",style:{},tooltip:\"\",children:[/*#__PURE__*/_jsx(SideNavigationItem,{icon:\"nav-back\",text:t(\"back\"),onClick:function onClick(){return setMenu(\"none\");}}),/*#__PURE__*/_jsx(SideNavigationItem,{icon:\"group\",onSelectionChange:function noRefCheck(){},onClick:function onClick(){return ethersConnect().then(function(a){setuserAddress(a.substring(0,6)+\"...\"+a.slice(-4));setProfile(!profile);});},onChange:function onChange(e){return setuserAddress(e.target.userAddress);},text:userAddress,tooltip:userAddress,children:/*#__PURE__*/_jsx(SideNavigationSubItem,{text:\"Account\",icon:\"customer\",onClick:function onClick(){handleAccount();setMenu(\"none\");}})})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"content\",children:[/*#__PURE__*/_jsx(Route,{exact:true,strict:true,path:\"/\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Scan\",children:/*#__PURE__*/_jsx(Avatar,{colorScheme:\"Accent6\",size:\"XL\",icon:\"bar-code\",onClick:function onClick(){return handleQR();},tooltip:\"Click to Scan QR-Code\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"Search\",children:/*#__PURE__*/_jsx(Input,{onChange:function onChange(e){return setValue(e.target.value);},style:{},type:\"Text\",placeholder:t(\"search\"),icon:/*#__PURE__*/_jsx(Icon,{name:\"search\",onClick:function onClick(){return handleSearch(value);}})})})]})}),/*#__PURE__*/_jsx(Route,{path:\"/asset\",children:/*#__PURE__*/_jsx(Asset,{})}),/*#__PURE__*/_jsx(Route,{path:\"/qr\",children:/*#__PURE__*/_jsx(QR,{})}),/*#__PURE__*/_jsx(Route,{path:\"/error\",children:/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/account\",children:/*#__PURE__*/_jsx(Account,{})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Feedback-wrapper\",children:/*#__PURE__*/_jsx(Button,{onClick:onButtonClick,design:\"Emphasized\",children:\"Feedback\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Popover,{className:\"Feedback-wrapper-open\",ref:popoverRef// header={<Icon style={{ fontSize: \"4rem\" }} name=\"feedback\" />}\n,headerText:\"We'd appreciate your feedback!\",footer:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{design:\"Emphasized\",children:\"Send\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){handleClose();},children:\"Cancel\"})]}),children:[/*#__PURE__*/_jsx(RadioButton,{group:\"Feedback\",text:\"This topic was helpful\"}),/*#__PURE__*/_jsx(RadioButton,{group:\"Feedback\",text:\"This topic was not helpful\"}),/*#__PURE__*/_jsx(TextArea,{placeholder:\"Share your experience with us\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"Feedback-disclaimer\",children:\"Your feedback is anonymous, so you won't receive a reply. If you'd like help with a specific question, please contact the tDAO-Team!\"})]})})]});}export default App;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/src/App.js"],"names":["ShellBar","ThemeProvider","Input","Avatar","SideNavigation","SideNavigationItem","SideNavigationSubItem","Icon","Button","Popover","RadioButton","TextArea","StandardListItem","React","useState","useRef","ethers","Route","HashRouter","Asset","QR","Error","Account","abi","isMobile","WalletConnectProvider","setTheme","useTranslation","provider","signer","address","roProvidernoUser","providers","JsonRpcProvider","tdao","Contract","roProvider","rpc","ethersConnect","enable","Web3Provider","window","ethereum","send","getSigner","getAddress","console","log","getTokenId","ipfsId","split","rslt","then","result","toNumber","handleSearch","value","location","assign","handleAccount","handleQR","handleHome","App","setValue","menu","setMenu","profile","setProfile","t","popoverRef","onButtonClick","e","current","showAt","target","handleClose","close","userAddress","setuserAddress","noRefCheck","overflow","display","replace","a","substring","slice"],"mappings":"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","sourcesContent":["import {\n  ShellBar,\n  ThemeProvider,\n  Input,\n  Avatar,\n  SideNavigation,\n  SideNavigationItem,\n  SideNavigationSubItem,\n  Icon,\n  Button,\n  Popover,\n  RadioButton,\n  TextArea,\n  StandardListItem,\n} from \"@ui5/webcomponents-react\";\n// eslint-disable-next-line no-unused-vars\nimport \"@ui5/webcomponents-icons/dist/AllIcons.js\";\nimport React, { useState, useRef } from \"react\";\nimport { ethers } from \"ethers\";\nimport \"./App.css\";\nimport { Route, HashRouter } from \"react-router-dom\";\nimport Asset from \"./pages/Asset\";\nimport QR from \"./pages/QR\";\nimport Error from \"./pages/Error\";\nimport Account from \"./pages/Account\";\nimport abi from \"./abi.json\";\nimport { isMobile } from \"react-device-detect\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport { setTheme } from \"@ui5/webcomponents-base/dist/config/Theme\";\nimport { useTranslation } from \"react-i18next\";\n\nlet provider = null;\nlet signer = null;\nlet address = null;\nlet roProvidernoUser = new ethers.providers.JsonRpcProvider(\n  \"https://polygon-mainnet.infura.io/v3/d8e7160dc78d48dba6ca40b11fdf1cd5\" ||\n    \"https://rpc-mainnet.matic.network\"\n);\nlet tdao = new ethers.Contract(\n  \"0xe939789E151608D7442E2e6Ff4ea4E2eaf314cF3\",\n  abi,\n  roProvidernoUser\n);\nconst roProvider = new WalletConnectProvider({\n  rpc: {\n    137: \"https://polygon-mainnet.infura.io/v3/d8e7160dc78d48dba6ca40b11fdf1cd5\",\n  },\n});\n\nexport async function ethersConnect() {\n  try {\n    if (isMobile) {\n      await roProvider.enable();\n      provider = new ethers.providers.Web3Provider(roProvider);\n    } else {\n      provider = new ethers.providers.Web3Provider(window.ethereum, \"any\");\n      await provider.send(\"eth_requestAccounts\", []);\n    }\n\n    //[provider.getBlockNumber().then((b) => b - 10000),provider.getBlockNumber().then((b) => b )]\n\n    signer = provider.getSigner();\n    address = await signer.getAddress();\n    tdao = new ethers.Contract(\n      \"0xe939789E151608D7442E2e6Ff4ea4E2eaf314cF3\",\n      abi,\n      signer\n    );\n\n    //  let filter = tdao.filters.TransferSingle();\n    // console.log(filter)\n    // console.log(await tdao.filter.TransferSingle());\n    // console.log(await tdao.queryFilter(filter, 17862525 , 17862925));\n\n    return await signer.getAddress();\n  } catch (error) {\n    //alert(\"Please install Metamask!\")\n    console.log(\"e :\" + error);\n\n    return \"Read only\";\n  }\n}\n\nexport async function getTokenId(ipfsId) {\n  try {\n    ipfsId = ipfsId.split(\"/\")[0];\n    const rslt = tdao.getTokenId(ipfsId).then((result) => {\n      return result.toNumber();\n    });\n    return rslt;\n  } catch {\n    return \"\";\n  }\n}\n\nfunction handleSearch(value) {\n  window.location.assign(\"/#/asset/\" + value);\n}\n\nfunction handleAccount(value) {\n  window.location.assign(\"/#/account/\" + address);\n}\n\nfunction handleQR() {\n  window.location.assign(\"/#/qr\");\n}\n\nfunction handleHome() {\n  window.location.assign(\"/#/\");\n}\n\nsetTheme(\"sap_horizon\");\n\nfunction App() {\n  const [value, setValue] = useState(\"\");\n  const [menu, setMenu] = useState(\"none\");\n  const [profile, setProfile] = useState(false);\n  const { t } = useTranslation();\n\n  const popoverRef = useRef();\n  const onButtonClick = (e) => {\n    console.log(\"test\", popoverRef);\n    popoverRef.current.showAt(e.target);\n  };\n  const handleClose = () => {\n    popoverRef.current.close();\n  };\n\n  const [userAddress, setuserAddress] = useState(t(\"wallet\"));\n  return (\n    <ThemeProvider>\n      <HashRouter>\n        <div id=\"shellbarDiv\">\n          <ShellBar\n            id=\"shellbar\"\n            // primary-title=\"Home\"\n            logo={\n              <img\n                alt=\"tdao\"\n                mdxtype=\"img\"\n                originaltype=\"img\"\n                src=\"../tdao_cropped.svg\"\n              />\n            }\n            onLogoClick={() => handleHome()}\n            onMenuItemClick={function noRefCheck() {}}\n            style={{ overflow: \"auto\" }}\n            className=\"Shell\"\n            onProfileClick={() => setMenu(\"block\")}\n            \n            profile={\n              <Avatar\n                icon=\"menu2\"\n                colorScheme=\"Accent10\"\n                size=\"XS\"\n                shape=\"Square\"\n              ></Avatar>\n            }\n          >\n            <StandardListItem icon=\"sys-help\">Help</StandardListItem>\n          </ShellBar>\n        </div>\n        <div className=\"Menu\" style={{ display: menu }}>\n          <SideNavigation\n            className=\"Menu\"\n            fixedItems={\n              <>\n                <SideNavigationItem\n                  icon=\"information\"\n                  text={t(\"imprint\")}\n                  onClick={() =>\n                    window.location.replace(\n                      \"https://www.t-systems.com/de/en/imprint\"\n                    )\n                  }\n                />\n              </>\n            }\n            onSelectionChange={function noRefCheck() {}}\n            slot=\"\"\n            style={{}}\n            tooltip=\"\"\n          >\n            <SideNavigationItem\n              icon=\"nav-back\"\n              text={t(\"back\")}\n              onClick={() => setMenu(\"none\")}\n            />\n            <SideNavigationItem\n              icon=\"group\"\n              onSelectionChange={function noRefCheck() {}}\n              onClick={() =>\n                ethersConnect().then((a) => {\n                  setuserAddress(a.substring(0, 6) + \"...\" + a.slice(-4));\n                  setProfile(!profile);\n                })\n              }\n              onChange={(e) => setuserAddress(e.target.userAddress)}\n              text={userAddress}\n              tooltip={userAddress}\n            >\n              <SideNavigationSubItem\n                text=\"Account\"\n                icon=\"customer\"\n                onClick={() => {\n                  handleAccount();\n                  setMenu(\"none\");\n                }}\n              />\n            </SideNavigationItem>\n          </SideNavigation>\n        </div>\n        <div id=\"content\">\n          <Route exact strict path=\"/\">\n            <div className=\"App\">\n              <div className=\"Scan\">\n                <Avatar\n                  colorScheme=\"Accent6\"\n                  size=\"XL\"\n                  icon=\"bar-code\"\n                  onClick={() => handleQR()}\n                  tooltip=\"Click to Scan QR-Code\"\n                />\n              </div>\n              <div className=\"Search\">\n                <Input\n                  onChange={(e) => setValue(e.target.value)}\n                  style={{}}\n                  type=\"Text\"\n                  placeholder={t(\"search\")}\n                  icon={\n                    <Icon name=\"search\" onClick={() => handleSearch(value)} />\n                  }\n                />\n              </div>\n            </div>\n          </Route>\n          <Route path=\"/asset\">\n            <Asset />\n          </Route>\n          <Route path=\"/qr\">\n            <QR />\n          </Route>\n          <Route path=\"/error\">\n            <Error />\n          </Route>\n          <Route path=\"/account\">\n            <Account />\n          </Route>\n        </div>\n      </HashRouter>\n      <div className=\"Feedback-wrapper\">\n        <Button onClick={onButtonClick} design=\"Emphasized\">\n          Feedback\n        </Button>\n      </div>\n      <div>\n        <Popover\n          className=\"Feedback-wrapper-open\"\n          ref={popoverRef}\n          // header={<Icon style={{ fontSize: \"4rem\" }} name=\"feedback\" />}\n          headerText=\"We'd appreciate your feedback!\"\n          footer={\n            <>\n              <Button design=\"Emphasized\">Send</Button>\n              <Button\n                onClick={function () {\n                  handleClose();\n                }}\n              >\n                Cancel\n              </Button>\n            </>\n          }\n        >\n          <RadioButton group=\"Feedback\" text=\"This topic was helpful\" />\n          <RadioButton group=\"Feedback\" text=\"This topic was not helpful\" />\n          <TextArea placeholder=\"Share your experience with us\" />\n          <br />\n          <p className=\"Feedback-disclaimer\">\n            Your feedback is anonymous, so you won't receive a reply. If you'd\n            like help with a specific question, please contact the tDAO-Team!\n          </p>\n          {/* <Button\n            onClick={function () {\n              handleClose();\n            }}\n          >\n            Close Popover\n          </Button> */}\n        </Popover>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}