{"ast":null,"code":"import _regeneratorRuntime from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { isChrome } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { getFirstFocusableElement, getLastFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport createStyleInHead from \"@ui5/webcomponents-base/dist/util/createStyleInHead.js\";\nimport { isTabPrevious } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { getNextZIndex, getFocusedElement, isFocusedElementWithinNode } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport PopupTemplate from \"./generated/templates/PopupTemplate.lit.js\";\nimport PopupBlockLayer from \"./generated/templates/PopupBlockLayerTemplate.lit.js\";\nimport { getOpenedPopups, addOpenedPopup, removeOpenedPopup } from \"./popup-utils/OpenedPopupsRegistry.js\"; // Styles\n\nimport styles from \"./generated/themes/Popup.css.js\";\nimport staticAreaStyles from \"./generated/themes/PopupStaticAreaStyles.css.js\";\n/**\n * @public\n */\n\nvar metadata = {\n  managedSlots: true,\n  slots:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Defines the content of the Popup.\n     * @type {HTMLElement[]}\n     * @slot\n     * @public\n     */\n    \"default\": {\n      type: HTMLElement,\n      propertyName: \"content\"\n    }\n  },\n  properties:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Defines the ID of the HTML Element, which will get the initial focus.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    initialFocus: {\n      type: String\n    },\n\n    /**\n     * Defines if the focus should be returned to the previously focused element,\n     * when the popup closes.\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.0.0-rc.8\n    */\n    preventFocusRestore: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates if the element is open\n     * @private\n     * @type {boolean}\n     * @defaultvalue false\n     */\n    opened: {\n      type: Boolean\n    },\n\n    /**\n     * Sets the accessible aria name of the component.\n     *\n     * @type {String}\n     * @defaultvalue \"\"\n     * @public\n     * @since 1.0.0-rc.15\n     */\n    accessibleName: {\n      type: String,\n      defaultValue: undefined\n    },\n\n    /**\n     * @private\n     */\n    _disableInitialFocus: {\n      type: Boolean\n    },\n    _blockLayerHidden: {\n      type: Boolean\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Fired before the component is opened. This event can be cancelled, which will prevent the popup from opening. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#before-open\n     * @allowPreventDefault\n     */\n    \"before-open\": {},\n\n    /**\n     * Fired after the component is opened. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#after-open\n     */\n    \"after-open\": {},\n\n    /**\n     * Fired before the component is closed. This event can be cancelled, which will prevent the popup from closing. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#before-close\n     * @allowPreventDefault\n     * @param {boolean} escPressed Indicates that <code>ESC</code> key has triggered the event.\n     */\n    \"before-close\": {\n      detail: {\n        escPressed: {\n          type: Boolean\n        }\n      }\n    },\n\n    /**\n     * Fired after the component is closed. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#after-close\n     */\n    \"after-close\": {},\n\n    /**\n     * Fired whenever the popup content area is scrolled\n     *\n     * @private\n     * @event sap.ui.webcomponents.main.Popup#scroll\n     */\n    \"scroll\": {}\n  }\n};\nvar customBlockingStyleInserted = false;\n\nvar createBlockingStyle = function createBlockingStyle() {\n  if (customBlockingStyleInserted) {\n    return;\n  }\n\n  createStyleInHead(\"\\n\\t\\t.ui5-popup-scroll-blocker {\\n\\t\\t\\twidth: 100%;\\n\\t\\t\\theight: 100%;\\n\\t\\t\\tposition: fixed;\\n\\t\\t\\toverflow: hidden;\\n\\t\\t}\\n\\t\", {\n    \"data-ui5-popup-scroll-blocker\": \"\"\n  });\n  customBlockingStyleInserted = true;\n};\n\ncreateBlockingStyle();\n/**\n * @class\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Base class for all popup Web Components.\n *\n * If you need to create your own popup-like custom UI5 Web Components, it is highly recommended that you extend\n * at least Popup in order to have consistency with other popups in terms of modal behavior and z-index management.\n *\n * 1. The Popup class handles modality:\n *  - The \"isModal\" getter can be overridden by derivatives to provide their own conditions when they are modal or not\n *  - Derivatives may call the \"blockBodyScrolling\" and \"unblockBodyScrolling\" static methods to temporarily remove scrollbars on the body\n *  - Derivatives may call the \"open\" and \"close\" methods which handle focus, manage the popup registry and for modal popups, manage the blocking layer\n *\n *  2. Provides blocking layer (relevant for modal popups only):\n *   - It is in the static area\n *   - Controlled by the \"open\" and \"close\" methods\n *\n * 3. The Popup class \"traps\" focus:\n *  - Derivatives may call the \"applyInitialFocus\" method (usually when opening, to transfer focus inside the popup)\n *\n * 4. The Popup class automatically assigns \"z-index\"\n *  - Each time a popup is opened, it gets a higher than the previously opened popup z-index\n *\n * 5. The template of this component exposes two inline partials you can override in derivatives:\n *  - beforeContent (upper part of the box, useful for header/title/close button)\n *  - afterContent (lower part, useful for footer/action buttons)\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Popup\n * @extends sap.ui.webcomponents.base.UI5Element\n * @public\n */\n\nvar Popup = /*#__PURE__*/function (_UI5Element) {\n  _inherits(Popup, _UI5Element);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    _classCallCheck(this, Popup);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Popup, [{\n    key: \"onEnterDOM\",\n    value: function onEnterDOM() {\n      if (!this.isOpen()) {\n        this._blockLayerHidden = true;\n      }\n    }\n  }, {\n    key: \"onExitDOM\",\n    value: function onExitDOM() {\n      if (this.isOpen()) {\n        Popup.unblockBodyScrolling();\n\n        this._removeOpenedPopup();\n      }\n    }\n  }, {\n    key: \"_displayProp\",\n    get: function get() {\n      return \"block\";\n    }\n    /**\n     * Prevents the user from interacting with the content under the block layer\n     */\n\n  }, {\n    key: \"_preventBlockLayerFocus\",\n    value: function _preventBlockLayerFocus(event) {\n      event.preventDefault();\n    }\n    /**\n     * Temporarily removes scrollbars from the body\n     * @protected\n     */\n\n  }, {\n    key: \"_scroll\",\n    value: function _scroll(e) {\n      this.fireEvent(\"scroll\", {\n        scrollTop: e.target.scrollTop,\n        targetRef: e.target\n      });\n    }\n  }, {\n    key: \"_onkeydown\",\n    value: function _onkeydown(e) {\n      if (e.target === this._root && isTabPrevious(e)) {\n        e.preventDefault();\n      }\n    }\n  }, {\n    key: \"_onfocusout\",\n    value: function _onfocusout(e) {\n      // relatedTarget is the element, which will get focus. If no such element exists, focus the root.\n      // This happens after the mouse is released in order to not interrupt text selection.\n      if (!e.relatedTarget) {\n        this._shouldFocusRoot = true;\n      }\n    }\n  }, {\n    key: \"_onmousedown\",\n    value: function _onmousedown(e) {\n      this._root.removeAttribute(\"tabindex\");\n\n      if (this.shadowRoot.contains(e.target)) {\n        this._shouldFocusRoot = true;\n      } else {\n        this._shouldFocusRoot = false;\n      }\n    }\n  }, {\n    key: \"_onmouseup\",\n    value: function _onmouseup() {\n      this._root.tabIndex = -1;\n\n      if (this._shouldFocusRoot) {\n        if (isChrome()) {\n          this._root.focus();\n        }\n\n        this._shouldFocusRoot = false;\n      }\n    }\n    /**\n     * Focus trapping\n     * @private\n     */\n\n  }, {\n    key: \"forwardToFirst\",\n    value: function () {\n      var _forwardToFirst = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var firstFocusable;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getFirstFocusableElement(this);\n\n              case 2:\n                firstFocusable = _context.sent;\n\n                if (firstFocusable) {\n                  firstFocusable.focus();\n                } else {\n                  this._root.focus();\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function forwardToFirst() {\n        return _forwardToFirst.apply(this, arguments);\n      }\n\n      return forwardToFirst;\n    }()\n    /**\n     * Focus trapping\n     * @private\n     */\n\n  }, {\n    key: \"forwardToLast\",\n    value: function () {\n      var _forwardToLast = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var lastFocusable;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return getLastFocusableElement(this);\n\n              case 2:\n                lastFocusable = _context2.sent;\n\n                if (lastFocusable) {\n                  lastFocusable.focus();\n                } else {\n                  this._root.focus();\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function forwardToLast() {\n        return _forwardToLast.apply(this, arguments);\n      }\n\n      return forwardToLast;\n    }()\n    /**\n     * Use this method to focus the element denoted by \"initialFocus\", if provided, or the first focusable element otherwise.\n     * @protected\n     */\n\n  }, {\n    key: \"applyInitialFocus\",\n    value: function () {\n      var _applyInitialFocus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.applyFocus();\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function applyInitialFocus() {\n        return _applyInitialFocus.apply(this, arguments);\n      }\n\n      return applyInitialFocus;\n    }()\n    /**\n     * Focuses the element denoted by <code>initialFocus</code>, if provided,\n     * or the first focusable element otherwise.\n     * @public\n     * @async\n     * @returns {Promise} Promise that resolves when the focus is applied\n     */\n\n  }, {\n    key: \"applyFocus\",\n    value: function () {\n      var _applyFocus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var element;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this._waitForDomRef();\n\n              case 2:\n                _context4.t1 = this.getRootNode().getElementById(this.initialFocus) || document.getElementById(this.initialFocus);\n\n                if (_context4.t1) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                _context4.next = 6;\n                return getFirstFocusableElement(this);\n\n              case 6:\n                _context4.t1 = _context4.sent;\n\n              case 7:\n                _context4.t0 = _context4.t1;\n\n                if (_context4.t0) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                _context4.t0 = this._root;\n\n              case 10:\n                element = _context4.t0;\n\n                // in case of no focusable content focus the root\n                if (element) {\n                  if (element === this._root) {\n                    element.tabIndex = -1;\n                  }\n\n                  element.focus();\n                }\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function applyFocus() {\n        return _applyFocus.apply(this, arguments);\n      }\n\n      return applyFocus;\n    }()\n    /**\n     * Tells if the component is opened\n     * @public\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isOpen\",\n    value: function isOpen() {\n      return this.opened;\n    }\n  }, {\n    key: \"isFocusWithin\",\n    value: function isFocusWithin() {\n      return isFocusedElementWithinNode(this.shadowRoot.querySelector(\".ui5-popup-root\"));\n    }\n    /**\n     * Shows the block layer (for modal popups only) and sets the correct z-index for the purpose of popup stacking\n     * @protected\n     */\n\n  }, {\n    key: \"_open\",\n    value: function () {\n      var _open2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(preventInitialFocus) {\n        var prevented;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                prevented = !this.fireEvent(\"before-open\", {}, true, false);\n\n                if (!prevented) {\n                  _context5.next = 3;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 3:\n                if (this.isModal && !this.shouldHideBackdrop) {\n                  // create static area item ref for block layer\n                  this.getStaticAreaItemDomRef();\n                  this._blockLayerHidden = false;\n                  Popup.blockBodyScrolling();\n                }\n\n                this._zIndex = getNextZIndex();\n                this.style.zIndex = this._zIndex;\n                this._focusedElementBeforeOpen = getFocusedElement();\n\n                this._show();\n\n                if (!this._disableInitialFocus && !preventInitialFocus) {\n                  this.applyInitialFocus();\n                }\n\n                this._addOpenedPopup();\n\n                this.opened = true;\n                _context5.next = 13;\n                return renderFinished();\n\n              case 13:\n                this.fireEvent(\"after-open\", {}, false, false);\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function _open(_x) {\n        return _open2.apply(this, arguments);\n      }\n\n      return _open;\n    }()\n    /**\n     * Adds the popup to the \"opened popups registry\"\n     * @protected\n     */\n\n  }, {\n    key: \"_addOpenedPopup\",\n    value: function _addOpenedPopup() {\n      addOpenedPopup(this);\n    }\n    /**\n     * Hides the block layer (for modal popups only)\n     * @public\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var escPressed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var preventRegistryUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var preventFocusRestore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (!this.opened) {\n        return;\n      }\n\n      var prevented = !this.fireEvent(\"before-close\", {\n        escPressed: escPressed\n      }, true, false);\n\n      if (prevented) {\n        return;\n      }\n\n      var openedPopups = getOpenedPopups();\n\n      if (this.isModal) {\n        this._blockLayerHidden = true;\n\n        if (openedPopups.length === 1) {\n          Popup.unblockBodyScrolling();\n        }\n      }\n\n      this.hide();\n      this.opened = false;\n\n      if (!preventRegistryUpdate) {\n        this._removeOpenedPopup();\n      }\n\n      if (!this.preventFocusRestore && !preventFocusRestore) {\n        this.resetFocus();\n      }\n\n      this.fireEvent(\"after-close\", {}, false, false);\n    }\n    /**\n     * Removes the popup from the \"opened popups registry\"\n     * @protected\n     */\n\n  }, {\n    key: \"_removeOpenedPopup\",\n    value: function _removeOpenedPopup() {\n      removeOpenedPopup(this);\n    }\n    /**\n     * Returns the focus to the previously focused element\n     * @protected\n     */\n\n  }, {\n    key: \"resetFocus\",\n    value: function resetFocus() {\n      if (!this._focusedElementBeforeOpen) {\n        return;\n      }\n\n      this._focusedElementBeforeOpen.focus();\n\n      this._focusedElementBeforeOpen = null;\n    }\n    /**\n     * Sets \"block\" display to the popup. The property can be overriden by derivatives of Popup.\n     * @protected\n     */\n\n  }, {\n    key: \"_show\",\n    value: function _show() {\n      this.style.display = this._displayProp;\n    }\n    /**\n     * Sets \"none\" display to the popup\n     * @protected\n     */\n\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.style.display = \"none\";\n    }\n    /**\n     * Implement this getter with relevant logic regarding the modality of the popup (e.g. based on a public property)\n     *\n     * @protected\n     * @abstract\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isModal\",\n    get: function get() {} // eslint-disable-line\n\n    /**\n     * Implement this getter with relevant logic in order to hide the block layer (f.e. based on a public property)\n     *\n     * @protected\n     * @abstract\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"shouldHideBackdrop\",\n    get: function get() {} // eslint-disable-line\n\n    /**\n     * Return the ID of an element in the shadow DOM that is going to label this popup\n     *\n     * @protected\n     * @abstract\n     * @returns {String}\n     */\n\n  }, {\n    key: \"_ariaLabelledBy\",\n    get: function get() {} // eslint-disable-line\n\n    /**\n     * Return the value for aria-modal for this popup\n     *\n     * @protected\n     * @abstract\n     * @returns {String}\n     */\n\n  }, {\n    key: \"_ariaModal\",\n    get: function get() {} // eslint-disable-line\n\n    /**\n     * Ensures ariaLabel is never null or empty string\n     * @returns {String|undefined}\n     * @protected\n     */\n\n  }, {\n    key: \"_ariaLabel\",\n    get: function get() {\n      return this.accessibleName || undefined;\n    }\n  }, {\n    key: \"_root\",\n    get: function get() {\n      return this.shadowRoot.querySelector(\".ui5-popup-root\");\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return {\n        root: {},\n        content: {},\n        blockLayer: {\n          \"zIndex\": this._zIndex - 1\n        }\n      };\n    }\n  }, {\n    key: \"classes\",\n    get: function get() {\n      return {\n        root: {\n          \"ui5-popup-root\": true\n        },\n        content: {\n          \"ui5-popup-content\": true\n        }\n      };\n    }\n  }], [{\n    key: \"metadata\",\n    get: function get() {\n      return metadata;\n    }\n  }, {\n    key: \"render\",\n    get: function get() {\n      return litRender;\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return styles;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return PopupTemplate;\n    }\n  }, {\n    key: \"staticAreaTemplate\",\n    get: function get() {\n      return PopupBlockLayer;\n    }\n  }, {\n    key: \"staticAreaStyles\",\n    get: function get() {\n      return staticAreaStyles;\n    }\n  }, {\n    key: \"blockBodyScrolling\",\n    value: function blockBodyScrolling() {\n      if (window.pageYOffset > 0) {\n        document.body.style.top = \"-\".concat(window.pageYOffset, \"px\");\n      }\n\n      document.body.classList.add(\"ui5-popup-scroll-blocker\");\n    }\n    /**\n     * Restores scrollbars on the body, if needed\n     * @protected\n     */\n\n  }, {\n    key: \"unblockBodyScrolling\",\n    value: function unblockBodyScrolling() {\n      document.body.classList.remove(\"ui5-popup-scroll-blocker\");\n      window.scrollTo(0, -parseFloat(document.body.style.top));\n      document.body.style.top = \"\";\n    }\n  }]);\n\n  return Popup;\n}(UI5Element);\n\nexport default Popup;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/Popup.js"],"names":["renderFinished","litRender","UI5Element","isChrome","getFirstFocusableElement","getLastFocusableElement","createStyleInHead","isTabPrevious","getNextZIndex","getFocusedElement","isFocusedElementWithinNode","PopupTemplate","PopupBlockLayer","getOpenedPopups","addOpenedPopup","removeOpenedPopup","styles","staticAreaStyles","metadata","managedSlots","slots","type","HTMLElement","propertyName","properties","initialFocus","String","preventFocusRestore","Boolean","opened","accessibleName","defaultValue","undefined","_disableInitialFocus","_blockLayerHidden","events","detail","escPressed","customBlockingStyleInserted","createBlockingStyle","Popup","isOpen","unblockBodyScrolling","_removeOpenedPopup","event","preventDefault","e","fireEvent","scrollTop","target","targetRef","_root","relatedTarget","_shouldFocusRoot","removeAttribute","shadowRoot","contains","tabIndex","focus","firstFocusable","lastFocusable","applyFocus","_waitForDomRef","getRootNode","getElementById","document","element","querySelector","preventInitialFocus","prevented","isModal","shouldHideBackdrop","getStaticAreaItemDomRef","blockBodyScrolling","_zIndex","style","zIndex","_focusedElementBeforeOpen","_show","applyInitialFocus","_addOpenedPopup","preventRegistryUpdate","openedPopups","length","hide","resetFocus","display","_displayProp","root","content","blockLayer","window","pageYOffset","body","top","classList","add","remove","scrollTo","parseFloat"],"mappings":"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","sourcesContent":["import { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { isChrome } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { getFirstFocusableElement, getLastFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport createStyleInHead from \"@ui5/webcomponents-base/dist/util/createStyleInHead.js\";\nimport { isTabPrevious } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { getNextZIndex, getFocusedElement, isFocusedElementWithinNode } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport PopupTemplate from \"./generated/templates/PopupTemplate.lit.js\";\nimport PopupBlockLayer from \"./generated/templates/PopupBlockLayerTemplate.lit.js\";\nimport { getOpenedPopups, addOpenedPopup, removeOpenedPopup } from \"./popup-utils/OpenedPopupsRegistry.js\";\n\n// Styles\nimport styles from \"./generated/themes/Popup.css.js\";\nimport staticAreaStyles from \"./generated/themes/PopupStaticAreaStyles.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\tmanagedSlots: true,\n\tslots: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\n\t\t/**\n\t\t * Defines the content of the Popup.\n\t\t * @type {HTMLElement[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\ttype: HTMLElement,\n\t\t\tpropertyName: \"content\",\n\t\t},\n\t},\n\tproperties: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\t\t/**\n\t\t * Defines the ID of the HTML Element, which will get the initial focus.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tinitialFocus: {\n\t\t\ttype: String,\n\t\t},\n\n\t\t/**\n\t\t * Defines if the focus should be returned to the previously focused element,\n\t\t * when the popup closes.\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.0.0-rc.8\n\t\t*/\n\t\tpreventFocusRestore: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates if the element is open\n\t\t * @private\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t */\n\t\topened: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Sets the accessible aria name of the component.\n\t\t *\n\t\t * @type {String}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t * @since 1.0.0-rc.15\n\t\t */\n\t\taccessibleName: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: undefined,\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_disableInitialFocus: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_blockLayerHidden: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\n\t\t/**\n\t\t * Fired before the component is opened. This event can be cancelled, which will prevent the popup from opening. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#before-open\n\t\t * @allowPreventDefault\n\t\t */\n\t\t\"before-open\": {},\n\n\t\t/**\n\t\t * Fired after the component is opened. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#after-open\n\t\t */\n\t\t\"after-open\": {},\n\n\t\t/**\n\t\t * Fired before the component is closed. This event can be cancelled, which will prevent the popup from closing. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#before-close\n\t\t * @allowPreventDefault\n\t\t * @param {boolean} escPressed Indicates that <code>ESC</code> key has triggered the event.\n\t\t */\n\t\t\"before-close\": {\n\t\t\tdetail: {\n\t\t\t\tescPressed: { type: Boolean },\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * Fired after the component is closed. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#after-close\n\t\t */\n\t\t\"after-close\": {},\n\n\t\t/**\n\t\t * Fired whenever the popup content area is scrolled\n\t\t *\n\t\t * @private\n\t\t * @event sap.ui.webcomponents.main.Popup#scroll\n\t\t */\n\t\t\"scroll\": {},\n\t},\n};\n\nlet customBlockingStyleInserted = false;\n\nconst createBlockingStyle = () => {\n\tif (customBlockingStyleInserted) {\n\t\treturn;\n\t}\n\n\tcreateStyleInHead(`\n\t\t.ui5-popup-scroll-blocker {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tposition: fixed;\n\t\t\toverflow: hidden;\n\t\t}\n\t`, { \"data-ui5-popup-scroll-blocker\": \"\" });\n\n\tcustomBlockingStyleInserted = true;\n};\n\ncreateBlockingStyle();\n\n/**\n * @class\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Base class for all popup Web Components.\n *\n * If you need to create your own popup-like custom UI5 Web Components, it is highly recommended that you extend\n * at least Popup in order to have consistency with other popups in terms of modal behavior and z-index management.\n *\n * 1. The Popup class handles modality:\n *  - The \"isModal\" getter can be overridden by derivatives to provide their own conditions when they are modal or not\n *  - Derivatives may call the \"blockBodyScrolling\" and \"unblockBodyScrolling\" static methods to temporarily remove scrollbars on the body\n *  - Derivatives may call the \"open\" and \"close\" methods which handle focus, manage the popup registry and for modal popups, manage the blocking layer\n *\n *  2. Provides blocking layer (relevant for modal popups only):\n *   - It is in the static area\n *   - Controlled by the \"open\" and \"close\" methods\n *\n * 3. The Popup class \"traps\" focus:\n *  - Derivatives may call the \"applyInitialFocus\" method (usually when opening, to transfer focus inside the popup)\n *\n * 4. The Popup class automatically assigns \"z-index\"\n *  - Each time a popup is opened, it gets a higher than the previously opened popup z-index\n *\n * 5. The template of this component exposes two inline partials you can override in derivatives:\n *  - beforeContent (upper part of the box, useful for header/title/close button)\n *  - afterContent (lower part, useful for footer/action buttons)\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Popup\n * @extends sap.ui.webcomponents.base.UI5Element\n * @public\n */\nclass Popup extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get template() {\n\t\treturn PopupTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn PopupBlockLayer;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn staticAreaStyles;\n\t}\n\n\tonEnterDOM() {\n\t\tif (!this.isOpen()) {\n\t\t\tthis._blockLayerHidden = true;\n\t\t}\n\t}\n\n\tonExitDOM() {\n\t\tif (this.isOpen()) {\n\t\t\tPopup.unblockBodyScrolling();\n\t\t\tthis._removeOpenedPopup();\n\t\t}\n\t}\n\n\tget _displayProp() {\n\t\treturn \"block\";\n\t}\n\n\t/**\n\t * Prevents the user from interacting with the content under the block layer\n\t */\n\t_preventBlockLayerFocus(event) {\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * Temporarily removes scrollbars from the body\n\t * @protected\n\t */\n\tstatic blockBodyScrolling() {\n\t\tif (window.pageYOffset > 0) {\n\t\t\tdocument.body.style.top = `-${window.pageYOffset}px`;\n\t\t}\n\t\tdocument.body.classList.add(\"ui5-popup-scroll-blocker\");\n\t}\n\n\t/**\n\t * Restores scrollbars on the body, if needed\n\t * @protected\n\t */\n\tstatic unblockBodyScrolling() {\n\t\tdocument.body.classList.remove(\"ui5-popup-scroll-blocker\");\n\t\twindow.scrollTo(0, -parseFloat(document.body.style.top));\n\t\tdocument.body.style.top = \"\";\n\t}\n\n\t_scroll(e) {\n\t\tthis.fireEvent(\"scroll\", {\n\t\t\tscrollTop: e.target.scrollTop,\n\t\t\ttargetRef: e.target,\n\t\t});\n\t}\n\n\t_onkeydown(e) {\n\t\tif (e.target === this._root && isTabPrevious(e)) {\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\t_onfocusout(e) {\n\t\t// relatedTarget is the element, which will get focus. If no such element exists, focus the root.\n\t\t// This happens after the mouse is released in order to not interrupt text selection.\n\t\tif (!e.relatedTarget) {\n\t\t\tthis._shouldFocusRoot = true;\n\t\t}\n\t}\n\n\t_onmousedown(e) {\n\t\tthis._root.removeAttribute(\"tabindex\");\n\n\t\tif (this.shadowRoot.contains(e.target)) {\n\t\t\tthis._shouldFocusRoot = true;\n\t\t} else {\n\t\t\tthis._shouldFocusRoot = false;\n\t\t}\n\t}\n\n\t_onmouseup() {\n\t\tthis._root.tabIndex = -1;\n\t\tif (this._shouldFocusRoot) {\n\t\t\tif (isChrome()) {\n\t\t\t\tthis._root.focus();\n\t\t\t}\n\t\t\tthis._shouldFocusRoot = false;\n\t\t}\n\t}\n\n\t/**\n\t * Focus trapping\n\t * @private\n\t */\n\tasync forwardToFirst() {\n\t\tconst firstFocusable = await getFirstFocusableElement(this);\n\n\t\tif (firstFocusable) {\n\t\t\tfirstFocusable.focus();\n\t\t} else {\n\t\t\tthis._root.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Focus trapping\n\t * @private\n\t */\n\tasync forwardToLast() {\n\t\tconst lastFocusable = await getLastFocusableElement(this);\n\n\t\tif (lastFocusable) {\n\t\t\tlastFocusable.focus();\n\t\t} else {\n\t\t\tthis._root.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Use this method to focus the element denoted by \"initialFocus\", if provided, or the first focusable element otherwise.\n\t * @protected\n\t */\n\tasync applyInitialFocus() {\n\t\tawait this.applyFocus();\n\t}\n\n\t/**\n\t * Focuses the element denoted by <code>initialFocus</code>, if provided,\n\t * or the first focusable element otherwise.\n\t * @public\n\t * @async\n\t * @returns {Promise} Promise that resolves when the focus is applied\n\t */\n\tasync applyFocus() {\n\t\tawait this._waitForDomRef();\n\n\t\tconst element = this.getRootNode().getElementById(this.initialFocus)\n\t\t\t|| document.getElementById(this.initialFocus)\n\t\t\t|| await getFirstFocusableElement(this)\n\t\t\t|| this._root; // in case of no focusable content focus the root\n\n\t\tif (element) {\n\t\t\tif (element === this._root) {\n\t\t\t\telement.tabIndex = -1;\n\t\t\t}\n\t\t\telement.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Tells if the component is opened\n\t * @public\n\t * @returns {boolean}\n\t */\n\tisOpen() {\n\t\treturn this.opened;\n\t}\n\n\tisFocusWithin() {\n\t\treturn isFocusedElementWithinNode(this.shadowRoot.querySelector(\".ui5-popup-root\"));\n\t}\n\n\t/**\n\t * Shows the block layer (for modal popups only) and sets the correct z-index for the purpose of popup stacking\n\t * @protected\n\t */\n\tasync _open(preventInitialFocus) {\n\t\tconst prevented = !this.fireEvent(\"before-open\", {}, true, false);\n\t\tif (prevented) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isModal && !this.shouldHideBackdrop) {\n\t\t\t// create static area item ref for block layer\n\t\t\tthis.getStaticAreaItemDomRef();\n\t\t\tthis._blockLayerHidden = false;\n\t\t\tPopup.blockBodyScrolling();\n\t\t}\n\n\t\tthis._zIndex = getNextZIndex();\n\t\tthis.style.zIndex = this._zIndex;\n\t\tthis._focusedElementBeforeOpen = getFocusedElement();\n\n\t\tthis._show();\n\n\t\tif (!this._disableInitialFocus && !preventInitialFocus) {\n\t\t\tthis.applyInitialFocus();\n\t\t}\n\n\t\tthis._addOpenedPopup();\n\n\t\tthis.opened = true;\n\n\t\tawait renderFinished();\n\t\tthis.fireEvent(\"after-open\", {}, false, false);\n\t}\n\n\t/**\n\t * Adds the popup to the \"opened popups registry\"\n\t * @protected\n\t */\n\t_addOpenedPopup() {\n\t\taddOpenedPopup(this);\n\t}\n\n\t/**\n\t * Hides the block layer (for modal popups only)\n\t * @public\n\t */\n\tclose(escPressed = false, preventRegistryUpdate = false, preventFocusRestore = false) {\n\t\tif (!this.opened) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst prevented = !this.fireEvent(\"before-close\", { escPressed }, true, false);\n\t\tif (prevented) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst openedPopups = getOpenedPopups();\n\t\tif (this.isModal) {\n\t\t\tthis._blockLayerHidden = true;\n\t\t\tif (openedPopups.length === 1) {\n\t\t\t\tPopup.unblockBodyScrolling();\n\t\t\t}\n\t\t}\n\n\t\tthis.hide();\n\t\tthis.opened = false;\n\n\t\tif (!preventRegistryUpdate) {\n\t\t\tthis._removeOpenedPopup();\n\t\t}\n\n\t\tif (!this.preventFocusRestore && !preventFocusRestore) {\n\t\t\tthis.resetFocus();\n\t\t}\n\n\t\tthis.fireEvent(\"after-close\", {}, false, false);\n\t}\n\n\t/**\n\t * Removes the popup from the \"opened popups registry\"\n\t * @protected\n\t */\n\t_removeOpenedPopup() {\n\t\tremoveOpenedPopup(this);\n\t}\n\n\t/**\n\t * Returns the focus to the previously focused element\n\t * @protected\n\t */\n\tresetFocus() {\n\t\tif (!this._focusedElementBeforeOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._focusedElementBeforeOpen.focus();\n\t\tthis._focusedElementBeforeOpen = null;\n\t}\n\n\t/**\n\t * Sets \"block\" display to the popup. The property can be overriden by derivatives of Popup.\n\t * @protected\n\t */\n\t_show() {\n\t\tthis.style.display = this._displayProp;\n\t}\n\n\t/**\n\t * Sets \"none\" display to the popup\n\t * @protected\n\t */\n\thide() {\n\t\tthis.style.display = \"none\";\n\t}\n\n\t/**\n\t * Implement this getter with relevant logic regarding the modality of the popup (e.g. based on a public property)\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {boolean}\n\t */\n\tget isModal() {} // eslint-disable-line\n\n\t/**\n\t * Implement this getter with relevant logic in order to hide the block layer (f.e. based on a public property)\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {boolean}\n\t */\n\tget shouldHideBackdrop() {} // eslint-disable-line\n\n\t/**\n\t * Return the ID of an element in the shadow DOM that is going to label this popup\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {String}\n\t */\n\tget _ariaLabelledBy() {} // eslint-disable-line\n\n\t/**\n\t * Return the value for aria-modal for this popup\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {String}\n\t */\n\tget _ariaModal() {} // eslint-disable-line\n\n\t/**\n\t * Ensures ariaLabel is never null or empty string\n\t * @returns {String|undefined}\n\t * @protected\n\t */\n\tget _ariaLabel() {\n\t\treturn this.accessibleName || undefined;\n\t}\n\n\tget _root() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-popup-root\");\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\troot: {},\n\t\t\tcontent: {},\n\t\t\tblockLayer: {\n\t\t\t\t\"zIndex\": (this._zIndex - 1),\n\t\t\t},\n\t\t};\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\troot: {\n\t\t\t\t\"ui5-popup-root\": true,\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\t\"ui5-popup-content\": true,\n\t\t\t},\n\t\t};\n\t}\n}\n\nexport default Popup;\n"]},"metadata":{},"sourceType":"module"}