{"ast":null,"code":"import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst isFocusTrap = el => {\n  return el.hasAttribute(\"data-ui5-focus-trap\");\n};\n\nconst getFirstFocusableElement = async container => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n\n  return findFocusableElement(container, true);\n};\n\nconst getLastFocusableElement = async container => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n\n  return findFocusableElement(container, false);\n};\n\nconst isElemFocusable = el => {\n  return el.hasAttribute(\"data-ui5-focus-redirect\") || !isNodeHidden(el);\n};\n\nconst findFocusableElement = async (container, forward) => {\n  let child;\n\n  if (container.shadowRoot) {\n    child = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n  } else if (container.assignedNodes && container.assignedNodes()) {\n    const assignedElements = container.assignedNodes();\n    child = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n  } else {\n    child = forward ? container.firstChild : container.lastChild;\n  }\n\n  let focusableDescendant;\n  /* eslint-disable no-await-in-loop */\n\n  while (child) {\n    const originalChild = child;\n\n    if (child.isUI5Element) {\n      child = await child.getFocusDomRefAsync();\n    }\n\n    if (!child) {\n      return null;\n    }\n\n    if (child.nodeType === 1 && isElemFocusable(child) && !isFocusTrap(child)) {\n      if (isNodeClickable(child)) {\n        return child && typeof child.focus === \"function\" ? child : null;\n      }\n\n      focusableDescendant = await findFocusableElement(child, forward);\n\n      if (focusableDescendant) {\n        return focusableDescendant && typeof focusableDescendant.focus === \"function\" ? focusableDescendant : null;\n      }\n    }\n\n    child = forward ? originalChild.nextSibling : originalChild.previousSibling;\n  }\n  /* eslint-enable no-await-in-loop */\n\n\n  return null;\n};\n\nexport { getFirstFocusableElement, getLastFocusableElement };","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents-base/dist/util/FocusableElements.js"],"names":["isNodeHidden","isNodeClickable","isFocusTrap","el","hasAttribute","getFirstFocusableElement","container","findFocusableElement","getLastFocusableElement","isElemFocusable","forward","child","shadowRoot","firstChild","lastChild","assignedNodes","assignedElements","length","focusableDescendant","originalChild","isUI5Element","getFocusDomRefAsync","nodeType","focus","nextSibling","previousSibling"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,mBAAzB;AACA,OAAOC,eAAP,MAA4B,sBAA5B;;AAEA,MAAMC,WAAW,GAAGC,EAAE,IAAI;AACzB,SAAOA,EAAE,CAACC,YAAH,CAAgB,qBAAhB,CAAP;AACA,CAFD;;AAIA,MAAMC,wBAAwB,GAAG,MAAMC,SAAN,IAAmB;AACnD,MAAI,CAACA,SAAD,IAAcN,YAAY,CAACM,SAAD,CAA9B,EAA2C;AAC1C,WAAO,IAAP;AACA;;AAED,SAAOC,oBAAoB,CAACD,SAAD,EAAY,IAAZ,CAA3B;AACA,CAND;;AAQA,MAAME,uBAAuB,GAAG,MAAMF,SAAN,IAAmB;AAClD,MAAI,CAACA,SAAD,IAAcN,YAAY,CAACM,SAAD,CAA9B,EAA2C;AAC1C,WAAO,IAAP;AACA;;AAED,SAAOC,oBAAoB,CAACD,SAAD,EAAY,KAAZ,CAA3B;AACA,CAND;;AAQA,MAAMG,eAAe,GAAGN,EAAE,IAAI;AAC7B,SAAOA,EAAE,CAACC,YAAH,CAAgB,yBAAhB,KAA8C,CAACJ,YAAY,CAACG,EAAD,CAAlE;AACA,CAFD;;AAIA,MAAMI,oBAAoB,GAAG,OAAOD,SAAP,EAAkBI,OAAlB,KAA8B;AAC1D,MAAIC,KAAJ;;AAEA,MAAIL,SAAS,CAACM,UAAd,EAA0B;AACzBD,IAAAA,KAAK,GAAGD,OAAO,GAAGJ,SAAS,CAACM,UAAV,CAAqBC,UAAxB,GAAqCP,SAAS,CAACM,UAAV,CAAqBE,SAAzE;AACA,GAFD,MAEO,IAAIR,SAAS,CAACS,aAAV,IAA2BT,SAAS,CAACS,aAAV,EAA/B,EAA0D;AAChE,UAAMC,gBAAgB,GAAGV,SAAS,CAACS,aAAV,EAAzB;AACAJ,IAAAA,KAAK,GAAGD,OAAO,GAAGM,gBAAgB,CAAC,CAAD,CAAnB,GAAyBA,gBAAgB,CAACA,gBAAgB,CAACC,MAAjB,GAA0B,CAA3B,CAAxD;AACA,GAHM,MAGA;AACNN,IAAAA,KAAK,GAAGD,OAAO,GAAGJ,SAAS,CAACO,UAAb,GAA0BP,SAAS,CAACQ,SAAnD;AACA;;AAED,MAAII,mBAAJ;AAEA;;AAEA,SAAOP,KAAP,EAAc;AACb,UAAMQ,aAAa,GAAGR,KAAtB;;AAEA,QAAIA,KAAK,CAACS,YAAV,EAAwB;AACvBT,MAAAA,KAAK,GAAG,MAAMA,KAAK,CAACU,mBAAN,EAAd;AACA;;AAED,QAAI,CAACV,KAAL,EAAY;AACX,aAAO,IAAP;AACA;;AAED,QAAIA,KAAK,CAACW,QAAN,KAAmB,CAAnB,IAAwBb,eAAe,CAACE,KAAD,CAAvC,IAAkD,CAACT,WAAW,CAACS,KAAD,CAAlE,EAA2E;AAC1E,UAAIV,eAAe,CAACU,KAAD,CAAnB,EAA4B;AAC3B,eAAQA,KAAK,IAAI,OAAOA,KAAK,CAACY,KAAb,KAAuB,UAAjC,GAA+CZ,KAA/C,GAAuD,IAA9D;AACA;;AAEDO,MAAAA,mBAAmB,GAAG,MAAMX,oBAAoB,CAACI,KAAD,EAAQD,OAAR,CAAhD;;AACA,UAAIQ,mBAAJ,EAAyB;AACxB,eAAQA,mBAAmB,IAAI,OAAOA,mBAAmB,CAACK,KAA3B,KAAqC,UAA7D,GAA2EL,mBAA3E,GAAiG,IAAxG;AACA;AACD;;AAEDP,IAAAA,KAAK,GAAGD,OAAO,GAAGS,aAAa,CAACK,WAAjB,GAA+BL,aAAa,CAACM,eAA5D;AACA;AAED;;;AAEA,SAAO,IAAP;AACA,CA5CD;;AA8CA,SACCpB,wBADD,EAECG,uBAFD","sourcesContent":["import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst isFocusTrap = el => {\n\treturn el.hasAttribute(\"data-ui5-focus-trap\");\n};\n\nconst getFirstFocusableElement = async container => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, true);\n};\n\nconst getLastFocusableElement = async container => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, false);\n};\n\nconst isElemFocusable = el => {\n\treturn el.hasAttribute(\"data-ui5-focus-redirect\") || !isNodeHidden(el);\n};\n\nconst findFocusableElement = async (container, forward) => {\n\tlet child;\n\n\tif (container.shadowRoot) {\n\t\tchild = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n\t} else if (container.assignedNodes && container.assignedNodes()) {\n\t\tconst assignedElements = container.assignedNodes();\n\t\tchild = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n\t} else {\n\t\tchild = forward ? container.firstChild : container.lastChild;\n\t}\n\n\tlet focusableDescendant;\n\n\t/* eslint-disable no-await-in-loop */\n\n\twhile (child) {\n\t\tconst originalChild = child;\n\n\t\tif (child.isUI5Element) {\n\t\t\tchild = await child.getFocusDomRefAsync();\n\t\t}\n\n\t\tif (!child) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (child.nodeType === 1 && isElemFocusable(child) && !isFocusTrap(child)) {\n\t\t\tif (isNodeClickable(child)) {\n\t\t\t\treturn (child && typeof child.focus === \"function\") ? child : null;\n\t\t\t}\n\n\t\t\tfocusableDescendant = await findFocusableElement(child, forward);\n\t\t\tif (focusableDescendant) {\n\t\t\t\treturn (focusableDescendant && typeof focusableDescendant.focus === \"function\") ? focusableDescendant : null;\n\t\t\t}\n\t\t}\n\n\t\tchild = forward ? originalChild.nextSibling : originalChild.previousSibling;\n\t}\n\n\t/* eslint-enable no-await-in-loop */\n\n\treturn null;\n};\n\nexport {\n\tgetFirstFocusableElement,\n\tgetLastFocusableElement,\n};\n"]},"metadata":{},"sourceType":"module"}