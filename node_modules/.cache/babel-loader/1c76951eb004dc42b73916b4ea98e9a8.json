{"ast":null,"code":"import getSharedResource from \"../getSharedResource.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nimport getActiveElement from \"./getActiveElement.js\";\nvar PopupUtilsData = getSharedResource(\"PopupUtilsData\", {});\nPopupUtilsData.currentZIndex = PopupUtilsData.currentZIndex || 100;\n\nvar getFocusedElement = function getFocusedElement() {\n  var element = getActiveElement();\n  return element && typeof element.focus === \"function\" ? element : null;\n};\n\nvar isFocusedElementWithinNode = function isFocusedElementWithinNode(node) {\n  var fe = getFocusedElement();\n\n  if (fe) {\n    return isNodeContainedWithin(node, fe);\n  }\n\n  return false;\n};\n\nvar isNodeContainedWithin = function isNodeContainedWithin(parent, child) {\n  var currentNode = parent;\n\n  if (currentNode.shadowRoot) {\n    currentNode = Array.from(currentNode.shadowRoot.children).find(function (n) {\n      return n.localName !== \"style\";\n    });\n  }\n\n  if (currentNode === child) {\n    return true;\n  }\n\n  var childNodes = currentNode.localName === \"slot\" ? currentNode.assignedNodes() : currentNode.children;\n\n  if (childNodes) {\n    return Array.from(childNodes).some(function (n) {\n      return isNodeContainedWithin(n, child);\n    });\n  }\n};\n\nvar isPointInRect = function isPointInRect(x, y, rect) {\n  return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n};\n\nvar isClickInRect = function isClickInRect(event, rect) {\n  var x;\n  var y;\n\n  if (event.touches) {\n    var touch = event.touches[0];\n    x = touch.clientX;\n    y = touch.clientY;\n  } else {\n    x = event.clientX;\n    y = event.clientY;\n  }\n\n  return isPointInRect(x, y, rect);\n};\n\nvar getClosedPopupParent = function getClosedPopupParent(el) {\n  var parent = el.parentElement || el.getRootNode && el.getRootNode().host;\n\n  if (parent && (parent.showAt && parent.isUI5Element || parent.open && parent.isUI5Element || parent === document.documentElement)) {\n    return parent;\n  }\n\n  return getClosedPopupParent(parent);\n};\n\nvar getNextZIndex = function getNextZIndex() {\n  var OpenUI5Support = getFeature(\"OpenUI5Support\");\n\n  if (OpenUI5Support && OpenUI5Support.isLoaded()) {\n    // use OpenUI5 for getting z-index values, if loaded\n    return OpenUI5Support.getNextZIndex();\n  }\n\n  PopupUtilsData.currentZIndex += 2;\n  return PopupUtilsData.currentZIndex;\n};\n\nvar getCurrentZIndex = function getCurrentZIndex() {\n  return PopupUtilsData.currentZIndex;\n};\n\nexport { getFocusedElement, isClickInRect, getClosedPopupParent, getNextZIndex, getCurrentZIndex, isFocusedElementWithinNode };","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents-base/dist/util/PopupUtils.js"],"names":["getSharedResource","getFeature","getActiveElement","PopupUtilsData","currentZIndex","getFocusedElement","element","focus","isFocusedElementWithinNode","node","fe","isNodeContainedWithin","parent","child","currentNode","shadowRoot","Array","from","children","find","n","localName","childNodes","assignedNodes","some","isPointInRect","x","y","rect","left","right","top","bottom","isClickInRect","event","touches","touch","clientX","clientY","getClosedPopupParent","el","parentElement","getRootNode","host","showAt","isUI5Element","open","document","documentElement","getNextZIndex","OpenUI5Support","isLoaded","getCurrentZIndex"],"mappings":"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","sourcesContent":["import getSharedResource from \"../getSharedResource.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nimport getActiveElement from \"./getActiveElement.js\";\n\nconst PopupUtilsData = getSharedResource(\"PopupUtilsData\", {});\nPopupUtilsData.currentZIndex = PopupUtilsData.currentZIndex || 100;\n\nconst getFocusedElement = () => {\n\tconst element = getActiveElement();\n\treturn (element && typeof element.focus === \"function\") ? element : null;\n};\n\nconst isFocusedElementWithinNode = node => {\n\tconst fe = getFocusedElement();\n\n\tif (fe) {\n\t\treturn isNodeContainedWithin(node, fe);\n\t}\n\n\treturn false;\n};\n\nconst isNodeContainedWithin = (parent, child) => {\n\tlet currentNode = parent;\n\n\tif (currentNode.shadowRoot) {\n\t\tcurrentNode = Array.from(currentNode.shadowRoot.children).find(n => n.localName !== \"style\");\n\t}\n\n\tif (currentNode === child) {\n\t\treturn true;\n\t}\n\n\tconst childNodes = currentNode.localName === \"slot\" ? currentNode.assignedNodes() : currentNode.children;\n\n\tif (childNodes) {\n\t\treturn Array.from(childNodes).some(n => isNodeContainedWithin(n, child));\n\t}\n};\n\nconst isPointInRect = (x, y, rect) => {\n\treturn x >= rect.left && x <= rect.right\n\t\t&& y >= rect.top && y <= rect.bottom;\n};\n\nconst isClickInRect = (event, rect) => {\n\tlet x;\n\tlet y;\n\n\tif (event.touches) {\n\t\tconst touch = event.touches[0];\n\t\tx = touch.clientX;\n\t\ty = touch.clientY;\n\t} else {\n\t\tx = event.clientX;\n\t\ty = event.clientY;\n\t}\n\n\treturn isPointInRect(x, y, rect);\n};\n\nconst getClosedPopupParent = el => {\n\tconst parent = el.parentElement || (el.getRootNode && el.getRootNode().host);\n\n\tif (parent && ((parent.showAt && parent.isUI5Element) || (parent.open && parent.isUI5Element) || parent === document.documentElement)) {\n\t\treturn parent;\n\t}\n\n\treturn getClosedPopupParent(parent);\n};\n\nconst getNextZIndex = () => {\n\tconst OpenUI5Support = getFeature(\"OpenUI5Support\");\n\tif (OpenUI5Support && OpenUI5Support.isLoaded()) { // use OpenUI5 for getting z-index values, if loaded\n\t\treturn OpenUI5Support.getNextZIndex();\n\t}\n\n\tPopupUtilsData.currentZIndex += 2;\n\treturn PopupUtilsData.currentZIndex;\n};\n\nconst getCurrentZIndex = () => {\n\treturn PopupUtilsData.currentZIndex;\n};\n\nexport {\n\tgetFocusedElement,\n\tisClickInRect,\n\tgetClosedPopupParent,\n\tgetNextZIndex,\n\tgetCurrentZIndex,\n\tisFocusedElementWithinNode,\n};\n"]},"metadata":{},"sourceType":"module"}