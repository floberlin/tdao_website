{"ast":null,"code":"import litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { isShow, isBackSpace, isLeft, isRight, isRightCtrl, isHome, isEnd } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { MULTIINPUT_ROLEDESCRIPTION_TEXT } from \"./generated/i18n/i18n-defaults.js\";\nimport Input from \"./Input.js\";\nimport MultiInputTemplate from \"./generated/templates/MultiInputTemplate.lit.js\";\nimport styles from \"./generated/themes/MultiInput.css.js\";\nimport Token from \"./Token.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Icon from \"./Icon.js\";\n/**\n * @public\n */\n\nconst metadata = {\n  tag: \"ui5-multi-input\",\n  properties:\n  /** @lends sap.ui.webcomponents.main.MultiInput.prototype */\n  {\n    /**\n     * Determines whether a value help icon will be visualized in the end of the input.\n     * Pressing the icon will fire <code>value-help-trigger</code> event.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    showValueHelpIcon: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n     * @private\n     */\n    expandedTokenizer: {\n      type: Boolean\n    }\n  },\n  slots:\n  /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */\n  {\n    /**\n     * Defines the component tokens.\n     *\n     * @type {sap.ui.webcomponents.main.IToken[]}\n     * @slot\n     * @public\n     */\n    tokens: {\n      type: HTMLElement\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */\n  {\n    /**\n     * Fired when the value help icon is pressed\n     * and F4 or ALT/OPTION + ARROW_UP/ARROW_DOWN keyboard keys are used.\n     *\n     * @event sap.ui.webcomponents.main.MultiInput#value-help-trigger\n     * @public\n     */\n    \"value-help-trigger\": {},\n\n    /**\n     * Fired when a token is about to be deleted.\n     *\n     * @event sap.ui.webcomponents.main.MultiInput#token-delete\n     * @param {HTMLElement} token deleted token.\n     * @public\n     */\n    \"token-delete\": {\n      detail: {\n        token: {\n          type: HTMLElement\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n * <h3>Overview</h3>\n * A <code>ui5-multi-input</code> field allows the user to enter multiple values, which are displayed as <code>ui5-token</code>.\n *\n * User can choose interaction for creating tokens.\n * Fiori Guidelines say that user should create tokens when:\n * <ul>\n * <li>Type a value in the input and press enter or focus out the input field (<code>change</code> event is fired)\n * <li>Select a value from the suggestion list</li> (<code>suggestion-item-select</code> event is fired)\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiInput\";</code>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiInput\n * @extends Input\n * @tagname ui5-multi-input\n * @appenddocs Token\n * @since 1.0.0-rc.9\n * @public\n */\n\nclass MultiInput extends Input {\n  static get metadata() {\n    return metadata;\n  }\n\n  static get render() {\n    return litRender;\n  }\n\n  static get template() {\n    return MultiInputTemplate;\n  }\n\n  static get styles() {\n    return [Input.styles, styles];\n  }\n\n  constructor() {\n    super(); // Prevent suggestions' opening.\n\n    this._skipOpenSuggestions = false;\n  }\n\n  valueHelpPress(event) {\n    this.closePopover();\n    this.fireEvent(\"value-help-trigger\", {});\n  }\n\n  showMorePress(event) {\n    this.expandedTokenizer = false;\n    this.focus();\n  }\n\n  tokenDelete(event) {\n    const focusedToken = event.detail.ref;\n    const selectedTokens = this.tokens.filter(token => token.selected);\n\n    if (selectedTokens.indexOf(focusedToken) === -1) {\n      selectedTokens.push(focusedToken);\n    }\n\n    selectedTokens.forEach(token => {\n      this.fireEvent(\"token-delete\", {\n        token\n      });\n    });\n    this.focus();\n  }\n\n  valueHelpMouseDown(event) {\n    this.closePopover();\n    this.tokenizer.closeMorePopover();\n    this._valueHelpIconPressed = true;\n    event.target.focus();\n  }\n\n  _tokenizerFocusOut(event) {\n    if (!this.contains(event.relatedTarget)) {\n      this.tokenizer._tokens.forEach(token => {\n        token.selected = false;\n      });\n\n      this.tokenizer.scrollToStart();\n    }\n  }\n\n  valueHelpMouseUp(event) {\n    setTimeout(() => {\n      this._valueHelpIconPressed = false;\n    }, 0);\n  }\n\n  innerFocusIn() {\n    this.expandedTokenizer = true;\n  }\n\n  _onkeydown(event) {\n    super._onkeydown(event);\n\n    const isHomeInBeginning = isHome(event) && event.target.selectionStart === 0;\n\n    if (isLeft(event) || isHomeInBeginning) {\n      this._skipOpenSuggestions = true; // Prevent input focus when navigating through the tokens.\n\n      return this._handleLeft(event);\n    }\n\n    this._skipOpenSuggestions = false;\n\n    if (isBackSpace(event) && event.target.value === \"\") {\n      event.preventDefault();\n\n      this.tokenizer._focusLastToken();\n    }\n\n    if (isShow(event)) {\n      this.valueHelpPress();\n    }\n  }\n\n  _onTokenizerKeydown(event) {\n    const rightCtrl = isRightCtrl(event);\n    const isCtrl = !!(event.metaKey || event.ctrlKey);\n    const tokens = this.tokens;\n\n    if (isRight(event) || isEnd(event) || rightCtrl) {\n      event.preventDefault();\n      const lastTokenIndex = this.tokens.length - 1;\n\n      if (event.target === this.tokens[lastTokenIndex] && this.tokens[lastTokenIndex] === document.activeElement) {\n        setTimeout(() => {\n          this.focus();\n        }, 0);\n      } else if (rightCtrl) {\n        event.preventDefault();\n        return this.tokenizer._handleArrowCtrl(event.target, this.tokens, true);\n      }\n    }\n\n    this.tokenizer._handleItemNavigation(event, tokens);\n\n    if (isCtrl && [\"c\", \"x\"].includes(event.key.toLowerCase())) {\n      event.preventDefault();\n      const isCut = event.key.toLowerCase() === \"x\";\n      const selectedTokens = tokens.filter(token => token.selected);\n\n      if (isCut) {\n        const cutResult = this.tokenizer._fillClipboard(\"cut\", selectedTokens);\n\n        selectedTokens.forEach(token => {\n          this.fireEvent(\"token-delete\", {\n            token\n          });\n        });\n        this.focus();\n        return cutResult;\n      }\n\n      return this.tokenizer._fillClipboard(\"copy\", selectedTokens);\n    }\n  }\n\n  _handleLeft() {\n    const cursorPosition = this.getDomRef().querySelector(`input`).selectionStart;\n    const tokens = this.tokens;\n    const lastToken = tokens.length && tokens[tokens.length - 1];\n\n    if (cursorPosition === 0 && lastToken) {\n      // this.tokenizer._focusLastToken(); won't work as the tokens in the MultiInput use different slot and are not resolved properly\n      lastToken.focus();\n\n      this.tokenizer._itemNav.setCurrentItem(lastToken);\n    }\n  }\n\n  _onfocusout(event) {\n    super._onfocusout(event);\n\n    const relatedTarget = event.relatedTarget;\n    const insideDOM = this.contains(relatedTarget);\n    const insideShadowDom = this.shadowRoot.contains(relatedTarget);\n\n    if (!insideDOM && !insideShadowDom) {\n      this.expandedTokenizer = false;\n    }\n  }\n  /**\n   * @override\n   */\n\n\n  async _onfocusin(event) {\n    const inputDomRef = await this.getInputDOMRef();\n\n    if (event.target === inputDomRef) {\n      await super._onfocusin(event);\n    }\n  }\n\n  shouldOpenSuggestions() {\n    const parent = super.shouldOpenSuggestions();\n    const valueHelpPressed = this._valueHelpIconPressed;\n    const nonEmptyValue = this.value !== \"\";\n    return parent && nonEmptyValue && !valueHelpPressed && !this._skipOpenSuggestions;\n  }\n\n  lastItemDeleted() {\n    setTimeout(() => {\n      this.focus();\n    }, 0);\n  }\n\n  get tokenizer() {\n    return this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n  }\n\n  get _tokensCountText() {\n    if (!this.tokenizer) {\n      return;\n    }\n\n    return this.tokenizer._tokensCountText();\n  }\n\n  get _tokensCountTextId() {\n    return `${this._id}-hiddenText-nMore`;\n  }\n  /**\n   * Returns the placeholder value when there are no tokens.\n   * @protected\n   */\n\n\n  get _placeholder() {\n    if (this.tokenizer && this.tokenizer._tokens.length) {\n      return \"\";\n    }\n\n    return this.placeholder;\n  }\n\n  get accInfo() {\n    const ariaDescribedBy = `${this._tokensCountTextId} ${this.suggestionsTextId} ${this.valueStateTextId}`.trim();\n    return {\n      \"input\": { ...super.accInfo.input,\n        \"ariaRoledescription\": this.ariaRoleDescription,\n        \"ariaDescribedBy\": ariaDescribedBy\n      }\n    };\n  }\n\n  get ariaRoleDescription() {\n    return MultiInput.i18nBundle.getText(MULTIINPUT_ROLEDESCRIPTION_TEXT);\n  }\n\n  static get dependencies() {\n    return [...Input.dependencies, Tokenizer, Token, Icon];\n  }\n\n}\n\nMultiInput.define();\nexport default MultiInput;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/MultiInput.js"],"names":["litRender","isShow","isBackSpace","isLeft","isRight","isRightCtrl","isHome","isEnd","MULTIINPUT_ROLEDESCRIPTION_TEXT","Input","MultiInputTemplate","styles","Token","Tokenizer","Icon","metadata","tag","properties","showValueHelpIcon","type","Boolean","expandedTokenizer","slots","tokens","HTMLElement","events","detail","token","MultiInput","render","template","constructor","_skipOpenSuggestions","valueHelpPress","event","closePopover","fireEvent","showMorePress","focus","tokenDelete","focusedToken","ref","selectedTokens","filter","selected","indexOf","push","forEach","valueHelpMouseDown","tokenizer","closeMorePopover","_valueHelpIconPressed","target","_tokenizerFocusOut","contains","relatedTarget","_tokens","scrollToStart","valueHelpMouseUp","setTimeout","innerFocusIn","_onkeydown","isHomeInBeginning","selectionStart","_handleLeft","value","preventDefault","_focusLastToken","_onTokenizerKeydown","rightCtrl","isCtrl","metaKey","ctrlKey","lastTokenIndex","length","document","activeElement","_handleArrowCtrl","_handleItemNavigation","includes","key","toLowerCase","isCut","cutResult","_fillClipboard","cursorPosition","getDomRef","querySelector","lastToken","_itemNav","setCurrentItem","_onfocusout","insideDOM","insideShadowDom","shadowRoot","_onfocusin","inputDomRef","getInputDOMRef","shouldOpenSuggestions","parent","valueHelpPressed","nonEmptyValue","lastItemDeleted","_tokensCountText","_tokensCountTextId","_id","_placeholder","placeholder","accInfo","ariaDescribedBy","suggestionsTextId","valueStateTextId","trim","input","ariaRoleDescription","i18nBundle","getText","dependencies","define"],"mappings":"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","sourcesContent":["import litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport {\n\tisShow,\n\tisBackSpace,\n\tisLeft,\n\tisRight,\n\tisRightCtrl,\n\tisHome,\n\tisEnd,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { MULTIINPUT_ROLEDESCRIPTION_TEXT } from \"./generated/i18n/i18n-defaults.js\";\nimport Input from \"./Input.js\";\nimport MultiInputTemplate from \"./generated/templates/MultiInputTemplate.lit.js\";\nimport styles from \"./generated/themes/MultiInput.css.js\";\nimport Token from \"./Token.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Icon from \"./Icon.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-multi-input\",\n\tproperties: /** @lends sap.ui.webcomponents.main.MultiInput.prototype */ {\n\t\t/**\n\t\t * Determines whether a value help icon will be visualized in the end of the input.\n\t\t * Pressing the icon will fire <code>value-help-trigger</code> event.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tshowValueHelpIcon: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n\t\t * @private\n\t\t */\n\t\texpandedTokenizer: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tslots: /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */ {\n\t\t/**\n\t\t * Defines the component tokens.\n\t\t *\n\t\t * @type {sap.ui.webcomponents.main.IToken[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\ttokens: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */ {\n\t\t/**\n\t\t * Fired when the value help icon is pressed\n\t\t * and F4 or ALT/OPTION + ARROW_UP/ARROW_DOWN keyboard keys are used.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiInput#value-help-trigger\n\t\t * @public\n\t\t */\n\t\t\"value-help-trigger\": {},\n\n\t\t/**\n\t\t * Fired when a token is about to be deleted.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiInput#token-delete\n\t\t * @param {HTMLElement} token deleted token.\n\t\t * @public\n\t\t */\n\t\t\"token-delete\": {\n\t\t\tdetail: {\n\t\t\t\ttoken: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n * <h3>Overview</h3>\n * A <code>ui5-multi-input</code> field allows the user to enter multiple values, which are displayed as <code>ui5-token</code>.\n *\n * User can choose interaction for creating tokens.\n * Fiori Guidelines say that user should create tokens when:\n * <ul>\n * <li>Type a value in the input and press enter or focus out the input field (<code>change</code> event is fired)\n * <li>Select a value from the suggestion list</li> (<code>suggestion-item-select</code> event is fired)\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiInput\";</code>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiInput\n * @extends Input\n * @tagname ui5-multi-input\n * @appenddocs Token\n * @since 1.0.0-rc.9\n * @public\n */\nclass MultiInput extends Input {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn MultiInputTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn [Input.styles, styles];\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\t// Prevent suggestions' opening.\n\t\tthis._skipOpenSuggestions = false;\n\t}\n\n\tvalueHelpPress(event) {\n\t\tthis.closePopover();\n\t\tthis.fireEvent(\"value-help-trigger\", {});\n\t}\n\n\tshowMorePress(event) {\n\t\tthis.expandedTokenizer = false;\n\t\tthis.focus();\n\t}\n\n\ttokenDelete(event) {\n\t\tconst focusedToken = event.detail.ref;\n\t\tconst selectedTokens = this.tokens.filter(token => token.selected);\n\n\t\tif (selectedTokens.indexOf(focusedToken) === -1) {\n\t\t\tselectedTokens.push(focusedToken);\n\t\t}\n\n\t\tselectedTokens.forEach(token => {\n\t\t\tthis.fireEvent(\"token-delete\", { token });\n\t\t});\n\n\t\tthis.focus();\n\t}\n\n\tvalueHelpMouseDown(event) {\n\t\tthis.closePopover();\n\t\tthis.tokenizer.closeMorePopover();\n\t\tthis._valueHelpIconPressed = true;\n\t\tevent.target.focus();\n\t}\n\n\t_tokenizerFocusOut(event) {\n\t\tif (!this.contains(event.relatedTarget)) {\n\t\t\tthis.tokenizer._tokens.forEach(token => { token.selected = false; });\n\t\t\tthis.tokenizer.scrollToStart();\n\t\t}\n\t}\n\n\tvalueHelpMouseUp(event) {\n\t\tsetTimeout(() => {\n\t\t\tthis._valueHelpIconPressed = false;\n\t\t}, 0);\n\t}\n\n\tinnerFocusIn() {\n\t\tthis.expandedTokenizer = true;\n\t}\n\n\t_onkeydown(event) {\n\t\tsuper._onkeydown(event);\n\n\t\tconst isHomeInBeginning = isHome(event) && event.target.selectionStart === 0;\n\n\t\tif (isLeft(event) || isHomeInBeginning) {\n\t\t\tthis._skipOpenSuggestions = true; // Prevent input focus when navigating through the tokens.\n\n\t\t\treturn this._handleLeft(event);\n\t\t}\n\n\t\tthis._skipOpenSuggestions = false;\n\t\tif (isBackSpace(event) && event.target.value === \"\") {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.tokenizer._focusLastToken();\n\t\t}\n\n\t\tif (isShow(event)) {\n\t\t\tthis.valueHelpPress();\n\t\t}\n\t}\n\n\t_onTokenizerKeydown(event) {\n\t\tconst rightCtrl = isRightCtrl(event);\n\t\tconst isCtrl = !!(event.metaKey || event.ctrlKey);\n\t\tconst tokens = this.tokens;\n\n\t\tif (isRight(event) || isEnd(event) || rightCtrl) {\n\t\t\tevent.preventDefault();\n\t\t\tconst lastTokenIndex = this.tokens.length - 1;\n\n\t\t\tif (event.target === this.tokens[lastTokenIndex] && this.tokens[lastTokenIndex] === document.activeElement) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.focus();\n\t\t\t\t}, 0);\n\t\t\t} else if (rightCtrl) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn this.tokenizer._handleArrowCtrl(event.target, this.tokens, true);\n\t\t\t}\n\t\t}\n\n\t\tthis.tokenizer._handleItemNavigation(event, tokens);\n\n\t\tif (isCtrl && [\"c\", \"x\"].includes(event.key.toLowerCase())) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isCut = event.key.toLowerCase() === \"x\";\n\t\t\tconst selectedTokens = tokens.filter(token => token.selected);\n\n\t\t\tif (isCut) {\n\t\t\t\tconst cutResult = this.tokenizer._fillClipboard(\"cut\", selectedTokens);\n\n\t\t\t\tselectedTokens.forEach(token => {\n\t\t\t\t\tthis.fireEvent(\"token-delete\", { token });\n\t\t\t\t});\n\n\t\t\t\tthis.focus();\n\n\t\t\t\treturn cutResult;\n\t\t\t}\n\n\t\t\treturn this.tokenizer._fillClipboard(\"copy\", selectedTokens);\n\t\t}\n\t}\n\n\t_handleLeft() {\n\t\tconst cursorPosition = this.getDomRef().querySelector(`input`).selectionStart;\n\t\tconst tokens = this.tokens;\n\t\tconst lastToken = tokens.length && tokens[tokens.length - 1];\n\n\t\tif (cursorPosition === 0 && lastToken) {\n\t\t\t// this.tokenizer._focusLastToken(); won't work as the tokens in the MultiInput use different slot and are not resolved properly\n\t\t\tlastToken.focus();\n\t\t\tthis.tokenizer._itemNav.setCurrentItem(lastToken);\n\t\t}\n\t}\n\n\t_onfocusout(event) {\n\t\tsuper._onfocusout(event);\n\t\tconst relatedTarget = event.relatedTarget;\n\t\tconst insideDOM = this.contains(relatedTarget);\n\t\tconst insideShadowDom = this.shadowRoot.contains(relatedTarget);\n\n\t\tif (!insideDOM && !insideShadowDom) {\n\t\t\tthis.expandedTokenizer = false;\n\t\t}\n\t}\n\n\t/**\n\t * @override\n\t */\n\tasync _onfocusin(event) {\n\t\tconst inputDomRef = await this.getInputDOMRef();\n\n\t\tif (event.target === inputDomRef) {\n\t\t\tawait super._onfocusin(event);\n\t\t}\n\t}\n\n\tshouldOpenSuggestions() {\n\t\tconst parent = super.shouldOpenSuggestions();\n\t\tconst valueHelpPressed = this._valueHelpIconPressed;\n\t\tconst nonEmptyValue = this.value !== \"\";\n\n\t\treturn parent && nonEmptyValue && !valueHelpPressed && !this._skipOpenSuggestions;\n\t}\n\n\tlastItemDeleted() {\n\t\tsetTimeout(() => {\n\t\t\tthis.focus();\n\t\t}, 0);\n\t}\n\n\tget tokenizer() {\n\t\treturn this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n\t}\n\n\tget _tokensCountText() {\n\t\tif (!this.tokenizer) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.tokenizer._tokensCountText();\n\t}\n\n\tget _tokensCountTextId() {\n\t\treturn `${this._id}-hiddenText-nMore`;\n\t}\n\n\t/**\n\t * Returns the placeholder value when there are no tokens.\n\t * @protected\n\t */\n\tget _placeholder() {\n\t\tif (this.tokenizer && this.tokenizer._tokens.length) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn this.placeholder;\n\t}\n\n\tget accInfo() {\n\t\tconst ariaDescribedBy = `${this._tokensCountTextId} ${this.suggestionsTextId} ${this.valueStateTextId}`.trim();\n\t\treturn {\n\t\t\t\"input\": {\n\t\t\t\t...super.accInfo.input,\n\t\t\t\t\"ariaRoledescription\": this.ariaRoleDescription,\n\t\t\t\t\"ariaDescribedBy\": ariaDescribedBy,\n\t\t\t},\n\t\t};\n\t}\n\n\tget ariaRoleDescription() {\n\t\treturn MultiInput.i18nBundle.getText(MULTIINPUT_ROLEDESCRIPTION_TEXT);\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\t...Input.dependencies,\n\t\t\tTokenizer,\n\t\t\tToken,\n\t\t\tIcon,\n\t\t];\n\t}\n}\n\nMultiInput.define();\n\nexport default MultiInput;\n"]},"metadata":{},"sourceType":"module"}