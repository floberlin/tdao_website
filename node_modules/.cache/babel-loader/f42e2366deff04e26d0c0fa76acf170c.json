{"ast":null,"code":"import getSharedResource from \"../getSharedResource.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nimport getActiveElement from \"./getActiveElement.js\";\nconst PopupUtilsData = getSharedResource(\"PopupUtilsData\", {});\nPopupUtilsData.currentZIndex = PopupUtilsData.currentZIndex || 100;\n\nconst getFocusedElement = () => {\n  const element = getActiveElement();\n  return element && typeof element.focus === \"function\" ? element : null;\n};\n\nconst isFocusedElementWithinNode = node => {\n  const fe = getFocusedElement();\n\n  if (fe) {\n    return isNodeContainedWithin(node, fe);\n  }\n\n  return false;\n};\n\nconst isNodeContainedWithin = (parent, child) => {\n  let currentNode = parent;\n\n  if (currentNode.shadowRoot) {\n    currentNode = Array.from(currentNode.shadowRoot.children).find(n => n.localName !== \"style\");\n  }\n\n  if (currentNode === child) {\n    return true;\n  }\n\n  const childNodes = currentNode.localName === \"slot\" ? currentNode.assignedNodes() : currentNode.children;\n\n  if (childNodes) {\n    return Array.from(childNodes).some(n => isNodeContainedWithin(n, child));\n  }\n};\n\nconst isPointInRect = (x, y, rect) => {\n  return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n};\n\nconst isClickInRect = (event, rect) => {\n  let x;\n  let y;\n\n  if (event.touches) {\n    const touch = event.touches[0];\n    x = touch.clientX;\n    y = touch.clientY;\n  } else {\n    x = event.clientX;\n    y = event.clientY;\n  }\n\n  return isPointInRect(x, y, rect);\n};\n\nconst getClosedPopupParent = el => {\n  const parent = el.parentElement || el.getRootNode && el.getRootNode().host;\n\n  if (parent && (parent.showAt && parent.isUI5Element || parent.open && parent.isUI5Element || parent === document.documentElement)) {\n    return parent;\n  }\n\n  return getClosedPopupParent(parent);\n};\n\nconst getNextZIndex = () => {\n  const OpenUI5Support = getFeature(\"OpenUI5Support\");\n\n  if (OpenUI5Support && OpenUI5Support.isLoaded()) {\n    // use OpenUI5 for getting z-index values, if loaded\n    return OpenUI5Support.getNextZIndex();\n  }\n\n  PopupUtilsData.currentZIndex += 2;\n  return PopupUtilsData.currentZIndex;\n};\n\nconst getCurrentZIndex = () => {\n  return PopupUtilsData.currentZIndex;\n};\n\nexport { getFocusedElement, isClickInRect, getClosedPopupParent, getNextZIndex, getCurrentZIndex, isFocusedElementWithinNode };","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents-base/dist/util/PopupUtils.js"],"names":["getSharedResource","getFeature","getActiveElement","PopupUtilsData","currentZIndex","getFocusedElement","element","focus","isFocusedElementWithinNode","node","fe","isNodeContainedWithin","parent","child","currentNode","shadowRoot","Array","from","children","find","n","localName","childNodes","assignedNodes","some","isPointInRect","x","y","rect","left","right","top","bottom","isClickInRect","event","touches","touch","clientX","clientY","getClosedPopupParent","el","parentElement","getRootNode","host","showAt","isUI5Element","open","document","documentElement","getNextZIndex","OpenUI5Support","isLoaded","getCurrentZIndex"],"mappings":"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","sourcesContent":["import getSharedResource from \"../getSharedResource.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nimport getActiveElement from \"./getActiveElement.js\";\n\nconst PopupUtilsData = getSharedResource(\"PopupUtilsData\", {});\nPopupUtilsData.currentZIndex = PopupUtilsData.currentZIndex || 100;\n\nconst getFocusedElement = () => {\n\tconst element = getActiveElement();\n\treturn (element && typeof element.focus === \"function\") ? element : null;\n};\n\nconst isFocusedElementWithinNode = node => {\n\tconst fe = getFocusedElement();\n\n\tif (fe) {\n\t\treturn isNodeContainedWithin(node, fe);\n\t}\n\n\treturn false;\n};\n\nconst isNodeContainedWithin = (parent, child) => {\n\tlet currentNode = parent;\n\n\tif (currentNode.shadowRoot) {\n\t\tcurrentNode = Array.from(currentNode.shadowRoot.children).find(n => n.localName !== \"style\");\n\t}\n\n\tif (currentNode === child) {\n\t\treturn true;\n\t}\n\n\tconst childNodes = currentNode.localName === \"slot\" ? currentNode.assignedNodes() : currentNode.children;\n\n\tif (childNodes) {\n\t\treturn Array.from(childNodes).some(n => isNodeContainedWithin(n, child));\n\t}\n};\n\nconst isPointInRect = (x, y, rect) => {\n\treturn x >= rect.left && x <= rect.right\n\t\t&& y >= rect.top && y <= rect.bottom;\n};\n\nconst isClickInRect = (event, rect) => {\n\tlet x;\n\tlet y;\n\n\tif (event.touches) {\n\t\tconst touch = event.touches[0];\n\t\tx = touch.clientX;\n\t\ty = touch.clientY;\n\t} else {\n\t\tx = event.clientX;\n\t\ty = event.clientY;\n\t}\n\n\treturn isPointInRect(x, y, rect);\n};\n\nconst getClosedPopupParent = el => {\n\tconst parent = el.parentElement || (el.getRootNode && el.getRootNode().host);\n\n\tif (parent && ((parent.showAt && parent.isUI5Element) || (parent.open && parent.isUI5Element) || parent === document.documentElement)) {\n\t\treturn parent;\n\t}\n\n\treturn getClosedPopupParent(parent);\n};\n\nconst getNextZIndex = () => {\n\tconst OpenUI5Support = getFeature(\"OpenUI5Support\");\n\tif (OpenUI5Support && OpenUI5Support.isLoaded()) { // use OpenUI5 for getting z-index values, if loaded\n\t\treturn OpenUI5Support.getNextZIndex();\n\t}\n\n\tPopupUtilsData.currentZIndex += 2;\n\treturn PopupUtilsData.currentZIndex;\n};\n\nconst getCurrentZIndex = () => {\n\treturn PopupUtilsData.currentZIndex;\n};\n\nexport {\n\tgetFocusedElement,\n\tisClickInRect,\n\tgetClosedPopupParent,\n\tgetNextZIndex,\n\tgetCurrentZIndex,\n\tisFocusedElementWithinNode,\n};\n"]},"metadata":{},"sourceType":"module"}