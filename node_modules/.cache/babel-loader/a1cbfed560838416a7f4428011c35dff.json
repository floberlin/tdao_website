{"ast":null,"code":"import { noChange as t } from \"../lit-html.js\";\nimport { directive as e, Directive as r, PartType as s } from \"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nconst i = e(class extends r {\n  constructor(t) {\n    var e;\n    if (super(t), t.type !== s.ATTRIBUTE || \"style\" !== t.name || (null === (e = t.strings) || void 0 === e ? void 0 : e.length) > 2) throw Error(\"The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.\");\n  }\n\n  render(t) {\n    return Object.keys(t).reduce((e, r) => {\n      const s = t[r];\n      return null == s ? e : e + `${r = r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, \"-$&\").toLowerCase()}:${s};`;\n    }, \"\");\n  }\n\n  update(e, [r]) {\n    const {\n      style: s\n    } = e.element;\n\n    if (void 0 === this.St) {\n      this.St = new Set();\n\n      for (const t in r) this.St.add(t);\n\n      return this.render(r);\n    }\n\n    this.St.forEach(t => {\n      null == r[t] && (this.St.delete(t), t.includes(\"-\") ? s.removeProperty(t) : s[t] = \"\");\n    });\n\n    for (const t in r) {\n      const e = r[t];\n      null != e && (this.St.add(t), t.includes(\"-\") ? s.setProperty(t, e) : s[t] = e);\n    }\n\n    return t;\n  }\n\n});\nexport { i as styleMap };","map":{"version":3,"sources":["../src/directives/style-map.ts"],"names":["Directive","[object Object]","partInfo","super","type","PartType","ATTRIBUTE","name","strings","length","Error","styleInfo","Object","keys","reduce","style","prop","value","replace","toLowerCase","part","element","this","_previousStyleProperties","undefined","Set","add","render","forEach","delete","includes","removeProperty","setProperty","noChange","styleMap","directive"],"mappings":";;;;;;;;MA8HakC,CAAAA,GAAWC,CAAAA,CApGxB,cAAgCnC,CAAhC,CAAgCA;AAG9BC,EAAAA,WAAAA,CAAYC,CAAZD,EAAYC;AAAAA,QAAAA,CAAAA;AAEV,QADAC,MAAMD,CAANC,GAEED,CAAAA,CAASE,IAATF,KAAkBG,CAAAA,CAASC,SAA3BJ,IACkB,YAAlBA,CAAAA,CAASK,IADTL,IACSK,CAAAA,UAAAA,CAAAA,GACRL,CAAAA,CAASM,OADDD,KACCC,KAAAA,CAAAA,KAAAA,CADDD,GACCC,KAAAA,CADDD,GACCC,CAAAA,CAASC,MADVF,IAC8B,CAHzC,EAKE,MAAUG,KAAAA,CACR,4GADQA,CAAV;AAOJT;;AAAAA,EAAAA,MAAAA,CAAOU,CAAPV,EAAOU;AACL,WAAOC,MAAAA,CAAOC,IAAPD,CAAYD,CAAZC,EAAuBE,MAAvBF,CAA8B,CAACG,CAAD,EAAQC,CAAR,KAAQA;AAC3C,YAAMC,CAAAA,GAAQN,CAAAA,CAAUK,CAAVL,CAAd;AACA,aAAa,QAATM,CAAS,GACJF,CADI,GAaNA,CAAAA,GAAQ,GAHfC,CAAAA,GAAOA,CAAAA,CACJE,OADIF,CACI,mCADJA,EACyC,KADzCA,EAEJG,WAFIH,EAEJG,IACuBF,CAAAA,GAb1B;AAa0BA,KAfrBL,EAgBJ,EAhBIA,CAAP;AAmBFX;;AAAAA,EAAAA,MAAAA,CAAOmB,CAAPnB,EAAOmB,CAAsBT,CAAtBS,CAAPnB,EAA6BU;AAC3B,UAAA;AAAMI,MAAAA,KAAAA,EAACA;AAAP,QAAgBK,CAAAA,CAAKC,OAArB;;AAEA,QAAA,KAAsCG,CAAtC,KAAIF,KAAKC,EAAT,EAAiD;AAC/CD,WAAKC,EAALD,GAAgC,IAAIG,GAAJ,EAAhCH;;AACA,WAAK,MAAMf,CAAX,IAAmBI,CAAnB,EACEW,KAAKC,EAALD,CAA8BI,GAA9BJ,CAAkCf,CAAlCe;;AAEF,aAAOA,KAAKK,MAALL,CAAYX,CAAZW,CAAP;AAMFA;;AAAAA,SAAKC,EAALD,CAA+BM,OAA/BN,CAAwCf,CAAAA,IAAAA;AAEf,cAAnBI,CAAAA,CAAUJ,CAAVI,CAAmB,KACrBW,KAAKC,EAALD,CAA+BO,MAA/BP,CAAsCf,CAAtCe,GACIf,CAAAA,CAAKuB,QAALvB,CAAc,GAAdA,IACFQ,CAAAA,CAAMgB,cAANhB,CAAqBR,CAArBQ,CADER,GAMDQ,CAAAA,CAAcR,CAAdQ,CAAAA,GAAsB,EARJ;AAQI,KAV7BO;;AAgBA,SAAK,MAAMf,CAAX,IAAmBI,CAAnB,EAA8B;AAC5B,YAAMM,CAAAA,GAAQN,CAAAA,CAAUJ,CAAVI,CAAd;AACa,cAATM,CAAS,KACXK,KAAKC,EAALD,CAA8BI,GAA9BJ,CAAkCf,CAAlCe,GACIf,CAAAA,CAAKuB,QAALvB,CAAc,GAAdA,IACFQ,CAAAA,CAAMiB,WAANjB,CAAkBR,CAAlBQ,EAAwBE,CAAxBF,CADER,GAIDQ,CAAAA,CAAcR,CAAdQ,CAAAA,GAAsBE,CANd;AAUf;;AAAA,WAAOgB,CAAP;AAAOA;;AA/EqBjC,CAoGRmC,C;AArBbF,SAAAA,CAAAA,IAAAA,QAAAA","sourcesContent":["/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {AttributePart, noChange} from '../lit-html.js';\nimport {\n  directive,\n  Directive,\n  DirectiveParameters,\n  PartInfo,\n  PartType,\n} from '../directive.js';\n\n/**\n * A key-value set of CSS properties and values.\n *\n * The key should be either a valid CSS property name string, like\n * `'background-color'`, or a valid JavaScript camel case property name\n * for CSSStyleDeclaration like `backgroundColor`.\n */\nexport interface StyleInfo {\n  readonly [name: string]: string | undefined | null;\n}\n\nclass StyleMapDirective extends Directive {\n  _previousStyleProperties?: Set<string>;\n\n  constructor(partInfo: PartInfo) {\n    super(partInfo);\n    if (\n      partInfo.type !== PartType.ATTRIBUTE ||\n      partInfo.name !== 'style' ||\n      (partInfo.strings?.length as number) > 2\n    ) {\n      throw new Error(\n        'The `styleMap` directive must be used in the `style` attribute ' +\n          'and must be the only part in the attribute.'\n      );\n    }\n  }\n\n  render(styleInfo: StyleInfo) {\n    return Object.keys(styleInfo).reduce((style, prop) => {\n      const value = styleInfo[prop];\n      if (value == null) {\n        return style;\n      }\n      // Convert property names from camel-case to dash-case, i.e.:\n      //  `backgroundColor` -> `background-color`\n      // Vendor-prefixed names need an extra `-` appended to front:\n      //  `webkitAppearance` -> `-webkit-appearance`\n      // Exception is any property name containing a dash, including\n      // custom properties; we assume these are already dash-cased i.e.:\n      //  `--my-button-color` --> `--my-button-color`\n      prop = prop\n        .replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, '-$&')\n        .toLowerCase();\n      return style + `${prop}:${value};`;\n    }, '');\n  }\n\n  update(part: AttributePart, [styleInfo]: DirectiveParameters<this>) {\n    const {style} = part.element as HTMLElement;\n\n    if (this._previousStyleProperties === undefined) {\n      this._previousStyleProperties = new Set();\n      for (const name in styleInfo) {\n        this._previousStyleProperties.add(name);\n      }\n      return this.render(styleInfo);\n    }\n\n    // Remove old properties that no longer exist in styleInfo\n    // We use forEach() instead of for-of so that re don't require down-level\n    // iteration.\n    this._previousStyleProperties!.forEach((name) => {\n      // If the name isn't in styleInfo or it's null/undefined\n      if (styleInfo[name] == null) {\n        this._previousStyleProperties!.delete(name);\n        if (name.includes('-')) {\n          style.removeProperty(name);\n        } else {\n          // Note reset using empty string (vs null) as IE11 does not always\n          // reset via null (https://developer.mozilla.org/en-US/docs/Web/API/ElementCSSInlineStyle/style#setting_styles)\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (style as any)[name] = '';\n        }\n      }\n    });\n\n    // Add or update properties\n    for (const name in styleInfo) {\n      const value = styleInfo[name];\n      if (value != null) {\n        this._previousStyleProperties.add(name);\n        if (name.includes('-')) {\n          style.setProperty(name, value);\n        } else {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (style as any)[name] = value;\n        }\n      }\n    }\n    return noChange;\n  }\n}\n\n/**\n * A directive that applies CSS properties to an element.\n *\n * `styleMap` can only be used in the `style` attribute and must be the only\n * expression in the attribute. It takes the property names in the `styleInfo`\n * object and adds the property values as CSS properties. Property names with\n * dashes (`-`) are assumed to be valid CSS property names and set on the\n * element's style object using `setProperty()`. Names without dashes are\n * assumed to be camelCased JavaScript property names and set on the element's\n * style object using property assignment, allowing the style object to\n * translate JavaScript-style names to CSS property names.\n *\n * For example `styleMap({backgroundColor: 'red', 'border-top': '5px', '--size':\n * '0'})` sets the `background-color`, `border-top` and `--size` properties.\n *\n * @param styleInfo\n */\nexport const styleMap = directive(StyleMapDirective);\n\n/**\n * The type of the class that powers this directive. Necessary for naming the\n * directive's return type.\n */\nexport type {StyleMapDirective};\n"]},"metadata":{},"sourceType":"module"}