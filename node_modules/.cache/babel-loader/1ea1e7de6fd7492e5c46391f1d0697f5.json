{"ast":null,"code":"import ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { isEnter, isSpace, isShow } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport NavigationMode from \"@ui5/webcomponents-base/dist/types/NavigationMode.js\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport BreadcrumbsDesign from \"./types/BreadcrumbsDesign.js\";\nimport BreadcrumbsSeparatorStyle from \"./types/BreadcrumbsSeparatorStyle.js\";\nimport BreadcrumbsItem from \"./BreadcrumbsItem.js\";\nimport { BREADCRUMBS_ARIA_LABEL, BREADCRUMBS_OVERFLOW_ARIA_LABEL, BREADCRUMBS_CANCEL_BUTTON } from \"./generated/i18n/i18n-defaults.js\";\nimport Link from \"./Link.js\";\nimport Label from \"./Label.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport Icon from \"./Icon.js\"; // Templates\n\nimport BreadcrumbsTemplate from \"./generated/templates/BreadcrumbsTemplate.lit.js\";\nimport BreadcrumbsPopoverTemplate from \"./generated/templates/BreadcrumbsPopoverTemplate.lit.js\"; // Styles\n\nimport breadcrumbsCss from \"./generated/themes/Breadcrumbs.css.js\";\nimport breadcrumbsPopoverCss from \"./generated/themes/BreadcrumbsPopover.css.js\";\n/**\n * @public\n */\n\nconst metadata = {\n  tag: \"ui5-breadcrumbs\",\n  managedSlots: true,\n  languageAware: true,\n  slots:\n  /** @lends sap.ui.webcomponents.main.Breadcrumbs.prototype */\n  {\n    /**\n     * Defines the component items.\n     *\n     * <br><br>\n     * <b>Note:</b> Use the <code>ui5-breadcrumbs-item</code> component to define the desired items.\n     * @type {sap.ui.webcomponents.main.IBreadcrumbsItem[]}\n     * @slot items\n     * @public\n     */\n    \"default\": {\n      propertyName: \"items\",\n      type: HTMLElement,\n      invalidateOnChildChange: true\n    }\n  },\n  properties:\n  /** @lends  sap.ui.webcomponents.main.Breadcrumbs.prototype */\n  {\n    /**\n     * Defines the visual indication and behavior of the breadcrumbs.\n     * Available options are <code>Standard</code> (by default) and <code>NoCurrentPage</code>.\n     * <br><br>\n     * <b>Note:</b> The <code>Standard</code> breadcrumbs show the current page as the last item in the trail.\n     * The last item contains only plain text and is not a link.\n     *\n     * @type {BreadcrumbsDesign}\n     * @defaultvalue \"Standard\"\n     * @public\n    */\n    design: {\n      type: BreadcrumbsDesign,\n      defaultValue: BreadcrumbsDesign.Standard\n    },\n\n    /**\n     * Determines the visual style of the separator between the breadcrumb items.\n     *\n     * <br><br>\n     * Available options are:\n     * <ul>\n     * <li><code>Slash</code></li>\n     * <li><code>BackSlash</code></li>\n     * <li><code>DoubleBackSlash</code></li>\n     * <li><code>DoubleGreaterThan</code></li>\n     * <li><code>DoubleSlash</code></li>\n     * <li><code>GreaterThan</code></li>\n     * </ul>\n     *\n     * @type {BreadcrumbsSeparatorStyle}\n     * @defaultvalue \"Slash\"\n     * @public\n     */\n    separatorStyle: {\n      type: BreadcrumbsSeparatorStyle,\n      defaultValue: BreadcrumbsSeparatorStyle.Slash\n    },\n\n    /**\n     * Holds the number of items in the overflow.\n     *\n     * @type {Integer}\n     * @defaultvalue 0\n     * @private\n     */\n    _overflowSize: {\n      type: Integer,\n      noAttribute: true,\n      defaultValue: 0\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.Breadcrumbs.prototype */\n  {\n    /**\n     * Fires when a <code>BreadcrumbsItem</code> is clicked.\n     *\n     * @event sap.ui.webcomponents.main.Breadcrumbs#item-click\n     * @param {HTMLElement} item The clicked item.\n     * @public\n     */\n    \"item-click\": {\n      detail: {\n        item: {\n          type: HTMLElement\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Enables users to navigate between items by providing a list of links to previous steps in the user's navigation path.\n * It helps the user to be aware of their location within the application and allows faster navigation.\n * <br><br>\n * The last three steps can be accessed as links directly, while the remaining links prior to them are available\n * in a drop-down menu.\n * <br><br>\n * You can choose the type of separator to be used from a number of predefined options.\n *\n * <h3>Keyboard Handling</h3>\n * The <code>ui5-breadcrumbs</code> provides advanced keyboard handling.\n * <br>\n * <ul>\n * <li>[F4, ALT+UP, ALT+DOWN, SPACE, ENTER] - If the dropdown arrow is focused - opens/closes the drop-down.</li>\n * <li>[SPACE, ENTER] - Activates the focused item and triggers the <code>item-click</code> event.</li>\n * <li>[ESC] - Closes the drop-down.</li>\n * <li>[LEFT] - If the drop-down is closed - navigates one item to the left.</li>\n * <li>[RIGHT] - If the drop-down is closed - navigates one item to the right.</li>\n * <li>[UP] - If the drop-down is open - moves focus to the next item.</li>\n * <li>[DOWN] - If the drop-down is open - moves focus to the previous item.</li>\n * <li>[HOME] - Navigates to the first item.</li>\n * <li>[END] - Navigates to the last item.</li>\n * </ul>\n * <br>\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Breadcrumbs\n * @extends UI5Element\n * @tagname ui5-breadcrumbs\n * @appenddocs BreadcrumbsItem\n * @public\n * @since 1.0.0-rc.15\n */\n\nclass Breadcrumbs extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n\n  static get render() {\n    return litRender;\n  }\n\n  static get template() {\n    return BreadcrumbsTemplate;\n  }\n\n  static get staticAreaTemplate() {\n    return BreadcrumbsPopoverTemplate;\n  }\n\n  static get styles() {\n    return breadcrumbsCss;\n  }\n\n  static get staticAreaStyles() {\n    return breadcrumbsPopoverCss;\n  }\n\n  constructor() {\n    super();\n\n    this._initItemNavigation();\n\n    this._onResizeHandler = this._updateOverflow.bind(this); // maps items to their widths\n\n    this._breadcrumbItemWidths = new WeakMap(); // the width of the interactive element that opens the overflow\n\n    this._dropdownArrowLinkWidth = 0;\n    this._labelFocusAdaptor = {\n      id: `${this._id}-labelWrapper`,\n      getlabelWrapper: this.getCurrentLocationLabelWrapper.bind(this),\n\n      set _tabIndex(value) {\n        const wrapper = this.getlabelWrapper();\n        wrapper && wrapper.setAttribute(\"tabindex\", value);\n      },\n\n      get _tabIndex() {\n        const wrapper = this.getlabelWrapper();\n        return wrapper ? wrapper.getAttribute(\"tabindex\") : undefined;\n      }\n\n    };\n  }\n\n  onInvalidation(changeInfo) {\n    if (changeInfo.reason === \"childchange\") {\n      const itemIndex = this.getSlottedNodes(\"items\").indexOf(changeInfo.child),\n            isInOverflow = itemIndex < this._overflowSize;\n\n      if (isInOverflow) {\n        // the content of an overflowing item has changed\n        // => need to render the item outside the overflow to obtain its new width\n        // => lower-down the <code>_overfowSize</code> to exclude that item from the overflow\n        this._overflowSize = itemIndex;\n      }\n    }\n  }\n\n  onBeforeRendering() {\n    this._preprocessItems();\n  }\n\n  onAfterRendering() {\n    this._cacheWidths();\n\n    this._updateOverflow();\n  }\n\n  onEnterDOM() {\n    ResizeHandler.register(this, this._onResizeHandler);\n  }\n\n  onExitDOM() {\n    ResizeHandler.deregister(this, this._onResizeHandler);\n  }\n\n  _initItemNavigation() {\n    if (!this._itemNavigation) {\n      this._itemNavigation = new ItemNavigation(this, {\n        navigationMode: NavigationMode.Horizontal,\n        getItemsCallback: () => this._getFocusableItems()\n      });\n    }\n  }\n  /**\n   * Obtains the items for navigation via keyboard\n   * @private\n   */\n\n\n  _getFocusableItems() {\n    const items = this._links;\n\n    if (!this._isOverflowEmpty) {\n      items.unshift(this._dropdownArrowLink);\n    }\n\n    if (this._endsWithCurrentLocationLabel) {\n      items.push(this._labelFocusAdaptor);\n    }\n\n    return items;\n  }\n\n  _onfocusin(event) {\n    const target = event.target,\n          labelWrapper = this.getCurrentLocationLabelWrapper(),\n          currentItem = target === labelWrapper ? this._labelFocusAdaptor : target;\n\n    this._itemNavigation.setCurrentItem(currentItem);\n  }\n\n  _onkeydown(event) {\n    const isDropdownArrowFocused = this._isDropdownArrowFocused;\n\n    if (isShow(event) && isDropdownArrowFocused && !this._isOverflowEmpty) {\n      event.preventDefault();\n\n      this._toggleRespPopover();\n\n      return;\n    }\n\n    if (isSpace(event) && isDropdownArrowFocused && !this._isOverflowEmpty && !this._isPickerOpen) {\n      event.preventDefault();\n      return;\n    }\n\n    if ((isEnter(event) || isSpace(event)) && this._isCurrentLocationLabelFocused) {\n      this._onLabelPress();\n    }\n  }\n\n  _onkeyup(event) {\n    if (this._isDropdownArrowFocused && isSpace(event) && !this._isOverflowEmpty && !this._isPickerOpen) {\n      this._openRespPopover();\n    }\n  }\n  /**\n   * Caches the space required to render the content\n   * @private\n   */\n\n\n  _cacheWidths() {\n    const map = this._breadcrumbItemWidths,\n          items = this.getSlottedNodes(\"items\"),\n          label = this._currentLocationLabel;\n\n    for (let i = this._overflowSize; i < items.length; i++) {\n      const item = items[i],\n            link = this.shadowRoot.querySelector(`.ui5-breadcrumbs-link-wrapper #${item._id}-link`);\n      map.set(item, this._getElementWidth(link) || 0);\n    }\n\n    if (this._endsWithCurrentLocationLabel && label) {\n      const item = items[items.length - 1];\n      map.set(item, this._getElementWidth(label));\n    }\n\n    if (!this._isOverflowEmpty) {\n      this._dropdownArrowLinkWidth = this._getElementWidth(this._dropdownArrowLink);\n    }\n  }\n\n  _updateOverflow() {\n    const items = this.getSlottedNodes(\"items\"),\n          availableWidth = this.shadowRoot.querySelector(\".ui5-breadcrumbs-root\").offsetWidth;\n\n    let requiredWidth = this._getTotalContentWidth(),\n        overflowSize = 0;\n\n    if (requiredWidth > availableWidth) {\n      // need to show the component that opens the overflow\n      requiredWidth += this._dropdownArrowLinkWidth;\n    }\n\n    while (requiredWidth > availableWidth && overflowSize < this._maxAllowedOverflowSize) {\n      const itemToOverflow = items[overflowSize];\n      let itemWidth = 0;\n\n      if (this._isItemVisible(itemToOverflow)) {\n        itemWidth = this._breadcrumbItemWidths.get(itemToOverflow) || 0;\n      } // move the item to the overflow\n\n\n      requiredWidth -= itemWidth;\n      overflowSize++;\n    }\n\n    this._overflowSize = overflowSize; // if overflow was emptied while picker was open => close redundant popup\n\n    if (this._isOverflowEmpty && this._isPickerOpen) {\n      this.responsivePopover.close();\n    } // if the last focused link has done into the overflow =>\n    // ensure the first visible link is focusable\n\n\n    const focusableItems = this._getFocusableItems();\n\n    if (!focusableItems.some(x => x._tabIndex === \"0\")) {\n      this._itemNavigation.setCurrentItem(focusableItems[0]);\n    }\n  }\n\n  _getElementWidth(element) {\n    if (element) {\n      return Math.ceil(element.getBoundingClientRect().width);\n    }\n  }\n\n  _getTotalContentWidth() {\n    const items = this.getSlottedNodes(\"items\"),\n          widthsMap = this._breadcrumbItemWidths,\n          totalLinksWidth = items.reduce((sum, link) => sum + widthsMap.get(link), 0);\n    return totalLinksWidth;\n  }\n\n  _onLinkPress(event) {\n    const link = event.target,\n          items = this.getSlottedNodes(\"items\"),\n          item = items.find(x => `${x._id}-link` === link.id);\n    this.fireEvent(\"item-click\", {\n      item\n    });\n  }\n\n  _onLabelPress() {\n    const items = this.getSlottedNodes(\"items\"),\n          item = items[items.length - 1];\n    this.fireEvent(\"item-click\", {\n      item\n    });\n  }\n\n  _onOverflowListItemSelect(event) {\n    const listItem = event.detail.item,\n          items = this.getSlottedNodes(\"items\"),\n          item = items.find(x => `${x._id}-li` === listItem.id);\n    window.open(item.href, item.target || \"_self\", \"noopener,noreferrer\");\n    this.responsivePopover.close();\n    this.fireEvent(\"item-click\", {\n      item\n    });\n  }\n\n  async _respPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    return staticAreaItem.querySelector(\"[ui5-responsive-popover]\");\n  }\n\n  async _toggleRespPopover() {\n    this.responsivePopover = await this._respPopover();\n\n    if (this._isPickerOpen) {\n      this._closeRespPopover();\n    } else {\n      this._openRespPopover();\n    }\n  }\n\n  async _closeRespPopover() {\n    this.responsivePopover && this.responsivePopover.close();\n  }\n\n  async _openRespPopover() {\n    this.responsivePopover = await this._respPopover();\n    this.responsivePopover.showAt(this._dropdownArrowLink);\n  }\n\n  _isItemVisible(item) {\n    return !item.hidden && this._hasVisibleContent(item);\n  }\n\n  _hasVisibleContent(item) {\n    // the check is not complete but may be extended in the future if needed to cover\n    // cases becides the standard (UX-recommended) ones\n    return item.innerText || Array.from(item.children).some(child => !child.hidden);\n  }\n\n  _preprocessItems() {\n    this.items.forEach(item => {\n      item._getRealDomRef = () => this.getDomRef().querySelector(`[data-ui5-stable*=${item.stableDomRef}]`);\n    });\n  }\n\n  getCurrentLocationLabelWrapper() {\n    return this.shadowRoot.querySelector(\".ui5-breadcrumbs-current-location > span\");\n  }\n\n  get _endsWithCurrentLocationLabel() {\n    return this.design === BreadcrumbsDesign.Standard;\n  }\n\n  get _currentLocationText() {\n    const items = this.getSlottedNodes(\"items\");\n\n    if (this._endsWithCurrentLocationLabel && items.length > 1) {\n      const item = items[items.length - 1];\n\n      if (this._isItemVisible(item)) {\n        return item.innerText;\n      }\n    }\n\n    return \"\";\n  }\n\n  get _currentLocationLabel() {\n    return this.shadowRoot.querySelector(\".ui5-breadcrumbs-current-location ui5-label\");\n  }\n\n  get _isDropdownArrowFocused() {\n    return this._dropdownArrowLink._tabIndex === \"0\";\n  }\n\n  get _isCurrentLocationLabelFocused() {\n    const label = this.getCurrentLocationLabelWrapper();\n    return label && label.tabIndex === 0;\n  }\n  /**\n   * Returns the maximum allowed count of items in the overflow\n   * with respect to the UX requirement to never overflow the last visible item\n   */\n\n\n  get _maxAllowedOverflowSize() {\n    const items = this.getSlottedNodes(\"items\").filter(item => this._isItemVisible(item)); // all items except tha last visible one are allowed to overflow by UX requirement\n\n    return items.length - 1;\n  }\n  /**\n   * Getter for the interactive element that opens the overflow\n   * @private\n   */\n\n\n  get _dropdownArrowLink() {\n    return this.shadowRoot.querySelector(\".ui5-breadcrumbs-dropdown-arrow-link-wrapper ui5-link\");\n  }\n  /**\n   * Getter for the list of abstract breadcrumb items to be rendered as list-items inside the overflow\n   */\n\n\n  get _overflowItemsData() {\n    return this.getSlottedNodes(\"items\").slice(0, this._overflowSize).filter(item => this._isItemVisible(item)).reverse();\n  }\n  /**\n   * Getter for the list of abstract breadcrumb items to be rendered as links outside the overflow\n   */\n\n\n  get _linksData() {\n    const items = this.getSlottedNodes(\"items\").slice(this._overflowSize);\n\n    if (this._endsWithCurrentLocationLabel) {\n      items.pop();\n    }\n\n    return items.filter(item => this._isItemVisible(item));\n  }\n  /**\n   * Getter for the list of links corresponding to the abstract breadcrumb items\n   */\n\n\n  get _links() {\n    return Array.from(this.shadowRoot.querySelectorAll(\".ui5-breadcrumbs-link-wrapper ui5-link\"));\n  }\n\n  get _isOverflowEmpty() {\n    return this._overflowItemsData.length === 0;\n  }\n\n  get _ariaHasPopup() {\n    if (!this._isOverflowEmpty) {\n      return \"listbox\";\n    }\n\n    return undefined;\n  }\n\n  get _isPickerOpen() {\n    return !!this.responsivePopover && this.responsivePopover.opened;\n  }\n\n  get _accessibleNameText() {\n    return Breadcrumbs.i18nBundle.getText(BREADCRUMBS_ARIA_LABEL);\n  }\n\n  get _dropdownArrowAccessibleNameText() {\n    return Breadcrumbs.i18nBundle.getText(BREADCRUMBS_OVERFLOW_ARIA_LABEL);\n  }\n\n  get _cancelButtonText() {\n    return Breadcrumbs.i18nBundle.getText(BREADCRUMBS_CANCEL_BUTTON);\n  }\n\n  static get dependencies() {\n    return [BreadcrumbsItem, Link, Label, ResponsivePopover, List, StandardListItem, Icon];\n  }\n\n  static async onDefine() {\n    Breadcrumbs.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n\n}\n\nBreadcrumbs.define();\nexport default Breadcrumbs;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/Breadcrumbs.js"],"names":["ItemNavigation","litRender","isEnter","isSpace","isShow","Integer","getI18nBundle","ResizeHandler","NavigationMode","UI5Element","BreadcrumbsDesign","BreadcrumbsSeparatorStyle","BreadcrumbsItem","BREADCRUMBS_ARIA_LABEL","BREADCRUMBS_OVERFLOW_ARIA_LABEL","BREADCRUMBS_CANCEL_BUTTON","Link","Label","ResponsivePopover","List","StandardListItem","Icon","BreadcrumbsTemplate","BreadcrumbsPopoverTemplate","breadcrumbsCss","breadcrumbsPopoverCss","metadata","tag","managedSlots","languageAware","slots","propertyName","type","HTMLElement","invalidateOnChildChange","properties","design","defaultValue","Standard","separatorStyle","Slash","_overflowSize","noAttribute","events","detail","item","Breadcrumbs","render","template","staticAreaTemplate","styles","staticAreaStyles","constructor","_initItemNavigation","_onResizeHandler","_updateOverflow","bind","_breadcrumbItemWidths","WeakMap","_dropdownArrowLinkWidth","_labelFocusAdaptor","id","_id","getlabelWrapper","getCurrentLocationLabelWrapper","_tabIndex","value","wrapper","setAttribute","getAttribute","undefined","onInvalidation","changeInfo","reason","itemIndex","getSlottedNodes","indexOf","child","isInOverflow","onBeforeRendering","_preprocessItems","onAfterRendering","_cacheWidths","onEnterDOM","register","onExitDOM","deregister","_itemNavigation","navigationMode","Horizontal","getItemsCallback","_getFocusableItems","items","_links","_isOverflowEmpty","unshift","_dropdownArrowLink","_endsWithCurrentLocationLabel","push","_onfocusin","event","target","labelWrapper","currentItem","setCurrentItem","_onkeydown","isDropdownArrowFocused","_isDropdownArrowFocused","preventDefault","_toggleRespPopover","_isPickerOpen","_isCurrentLocationLabelFocused","_onLabelPress","_onkeyup","_openRespPopover","map","label","_currentLocationLabel","i","length","link","shadowRoot","querySelector","set","_getElementWidth","availableWidth","offsetWidth","requiredWidth","_getTotalContentWidth","overflowSize","_maxAllowedOverflowSize","itemToOverflow","itemWidth","_isItemVisible","get","responsivePopover","close","focusableItems","some","x","element","Math","ceil","getBoundingClientRect","width","widthsMap","totalLinksWidth","reduce","sum","_onLinkPress","find","fireEvent","_onOverflowListItemSelect","listItem","window","open","href","_respPopover","staticAreaItem","getStaticAreaItemDomRef","_closeRespPopover","showAt","hidden","_hasVisibleContent","innerText","Array","from","children","forEach","_getRealDomRef","getDomRef","stableDomRef","_currentLocationText","tabIndex","filter","_overflowItemsData","slice","reverse","_linksData","pop","querySelectorAll","_ariaHasPopup","opened","_accessibleNameText","i18nBundle","getText","_dropdownArrowAccessibleNameText","_cancelButtonText","dependencies","onDefine","define"],"mappings":"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","sourcesContent":["import ItemNavigation from \"@ui5/webcomponents-base/dist/delegate/ItemNavigation.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport {\n\tisEnter,\n\tisSpace,\n\tisShow,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport ResizeHandler from \"@ui5/webcomponents-base/dist/delegate/ResizeHandler.js\";\nimport NavigationMode from \"@ui5/webcomponents-base/dist/types/NavigationMode.js\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport BreadcrumbsDesign from \"./types/BreadcrumbsDesign.js\";\nimport BreadcrumbsSeparatorStyle from \"./types/BreadcrumbsSeparatorStyle.js\";\nimport BreadcrumbsItem from \"./BreadcrumbsItem.js\";\nimport {\n\tBREADCRUMBS_ARIA_LABEL,\n\tBREADCRUMBS_OVERFLOW_ARIA_LABEL,\n\tBREADCRUMBS_CANCEL_BUTTON,\n} from \"./generated/i18n/i18n-defaults.js\";\nimport Link from \"./Link.js\";\nimport Label from \"./Label.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport Icon from \"./Icon.js\";\n\n// Templates\nimport BreadcrumbsTemplate from \"./generated/templates/BreadcrumbsTemplate.lit.js\";\nimport BreadcrumbsPopoverTemplate from \"./generated/templates/BreadcrumbsPopoverTemplate.lit.js\";\n\n// Styles\nimport breadcrumbsCss from \"./generated/themes/Breadcrumbs.css.js\";\nimport breadcrumbsPopoverCss from \"./generated/themes/BreadcrumbsPopover.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-breadcrumbs\",\n\tmanagedSlots: true,\n\tlanguageAware: true,\n\tslots: /** @lends sap.ui.webcomponents.main.Breadcrumbs.prototype */ {\n\n\t\t/**\n\t\t * Defines the component items.\n\t\t *\n\t\t * <br><br>\n\t\t * <b>Note:</b> Use the <code>ui5-breadcrumbs-item</code> component to define the desired items.\n\t\t * @type {sap.ui.webcomponents.main.IBreadcrumbsItem[]}\n\t\t * @slot items\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\tpropertyName: \"items\",\n\t\t\ttype: HTMLElement,\n\t\t\tinvalidateOnChildChange: true,\n\t\t},\n\n\t},\n\tproperties: /** @lends  sap.ui.webcomponents.main.Breadcrumbs.prototype */ {\n\n\t\t/**\n\t\t * Defines the visual indication and behavior of the breadcrumbs.\n\t\t * Available options are <code>Standard</code> (by default) and <code>NoCurrentPage</code>.\n\t\t * <br><br>\n\t\t * <b>Note:</b> The <code>Standard</code> breadcrumbs show the current page as the last item in the trail.\n\t\t * The last item contains only plain text and is not a link.\n\t\t *\n\t\t * @type {BreadcrumbsDesign}\n\t\t * @defaultvalue \"Standard\"\n\t\t * @public\n\t\t*/\n\t\tdesign: {\n\t\t\ttype: BreadcrumbsDesign,\n\t\t\tdefaultValue: BreadcrumbsDesign.Standard,\n\t\t},\n\n\t\t/**\n\t\t * Determines the visual style of the separator between the breadcrumb items.\n\t\t *\n\t\t * <br><br>\n\t\t * Available options are:\n\t\t * <ul>\n\t\t * <li><code>Slash</code></li>\n\t\t * <li><code>BackSlash</code></li>\n\t\t * <li><code>DoubleBackSlash</code></li>\n\t\t * <li><code>DoubleGreaterThan</code></li>\n\t\t * <li><code>DoubleSlash</code></li>\n\t\t * <li><code>GreaterThan</code></li>\n\t\t * </ul>\n\t\t *\n\t\t * @type {BreadcrumbsSeparatorStyle}\n\t\t * @defaultvalue \"Slash\"\n\t\t * @public\n\t\t */\n\t\tseparatorStyle: {\n\t\t\ttype: BreadcrumbsSeparatorStyle,\n\t\t\tdefaultValue: BreadcrumbsSeparatorStyle.Slash,\n\t\t},\n\n\t\t/**\n\t\t * Holds the number of items in the overflow.\n\t\t *\n\t\t * @type {Integer}\n\t\t * @defaultvalue 0\n\t\t * @private\n\t\t */\n\t\t_overflowSize: {\n\t\t\ttype: Integer,\n\t\t\tnoAttribute: true,\n\t\t\tdefaultValue: 0,\n\t\t},\n\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.Breadcrumbs.prototype */ {\n\n\t\t/**\n\t\t * Fires when a <code>BreadcrumbsItem</code> is clicked.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.Breadcrumbs#item-click\n\t\t * @param {HTMLElement} item The clicked item.\n\t\t * @public\n\t\t */\n\t\t\"item-click\": {\n\t\t\tdetail: {\n\t\t\t\titem: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Enables users to navigate between items by providing a list of links to previous steps in the user's navigation path.\n * It helps the user to be aware of their location within the application and allows faster navigation.\n * <br><br>\n * The last three steps can be accessed as links directly, while the remaining links prior to them are available\n * in a drop-down menu.\n * <br><br>\n * You can choose the type of separator to be used from a number of predefined options.\n *\n * <h3>Keyboard Handling</h3>\n * The <code>ui5-breadcrumbs</code> provides advanced keyboard handling.\n * <br>\n * <ul>\n * <li>[F4, ALT+UP, ALT+DOWN, SPACE, ENTER] - If the dropdown arrow is focused - opens/closes the drop-down.</li>\n * <li>[SPACE, ENTER] - Activates the focused item and triggers the <code>item-click</code> event.</li>\n * <li>[ESC] - Closes the drop-down.</li>\n * <li>[LEFT] - If the drop-down is closed - navigates one item to the left.</li>\n * <li>[RIGHT] - If the drop-down is closed - navigates one item to the right.</li>\n * <li>[UP] - If the drop-down is open - moves focus to the next item.</li>\n * <li>[DOWN] - If the drop-down is open - moves focus to the previous item.</li>\n * <li>[HOME] - Navigates to the first item.</li>\n * <li>[END] - Navigates to the last item.</li>\n * </ul>\n * <br>\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Breadcrumbs\n * @extends UI5Element\n * @tagname ui5-breadcrumbs\n * @appenddocs BreadcrumbsItem\n * @public\n * @since 1.0.0-rc.15\n */\nclass Breadcrumbs extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn BreadcrumbsTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn BreadcrumbsPopoverTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn breadcrumbsCss;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn breadcrumbsPopoverCss;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initItemNavigation();\n\n\t\tthis._onResizeHandler = this._updateOverflow.bind(this);\n\n\t\t// maps items to their widths\n\t\tthis._breadcrumbItemWidths = new WeakMap();\n\t\t// the width of the interactive element that opens the overflow\n\t\tthis._dropdownArrowLinkWidth = 0;\n\n\t\tthis._labelFocusAdaptor = {\n\t\t\tid: `${this._id}-labelWrapper`,\n\t\t\tgetlabelWrapper: this.getCurrentLocationLabelWrapper.bind(this),\n\t\t\tset _tabIndex(value) {\n\t\t\t\tconst wrapper = this.getlabelWrapper();\n\t\t\t\twrapper && wrapper.setAttribute(\"tabindex\", value);\n\t\t\t},\n\t\t\tget _tabIndex() {\n\t\t\t\tconst wrapper = this.getlabelWrapper();\n\t\t\t\treturn (wrapper) ? wrapper.getAttribute(\"tabindex\") : undefined;\n\t\t\t},\n\t\t};\n\t}\n\n\tonInvalidation(changeInfo) {\n\t\tif (changeInfo.reason === \"childchange\") {\n\t\t\tconst itemIndex = this.getSlottedNodes(\"items\").indexOf(changeInfo.child),\n\t\t\t\tisInOverflow = itemIndex < this._overflowSize;\n\t\t\tif (isInOverflow) {\n\t\t\t\t// the content of an overflowing item has changed\n\t\t\t\t// => need to render the item outside the overflow to obtain its new width\n\t\t\t\t// => lower-down the <code>_overfowSize</code> to exclude that item from the overflow\n\t\t\t\tthis._overflowSize = itemIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\tonBeforeRendering() {\n\t\tthis._preprocessItems();\n\t}\n\n\tonAfterRendering() {\n\t\tthis._cacheWidths();\n\t\tthis._updateOverflow();\n\t}\n\n\tonEnterDOM() {\n\t\tResizeHandler.register(this, this._onResizeHandler);\n\t}\n\n\tonExitDOM() {\n\t\tResizeHandler.deregister(this, this._onResizeHandler);\n\t}\n\n\t_initItemNavigation() {\n\t\tif (!this._itemNavigation) {\n\t\t\tthis._itemNavigation = new ItemNavigation(this, {\n\t\t\t\tnavigationMode: NavigationMode.Horizontal,\n\t\t\t\tgetItemsCallback: () => this._getFocusableItems(),\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Obtains the items for navigation via keyboard\n\t * @private\n\t */\n\t_getFocusableItems() {\n\t\tconst items = this._links;\n\n\t\tif (!this._isOverflowEmpty) {\n\t\t\titems.unshift(this._dropdownArrowLink);\n\t\t}\n\n\t\tif (this._endsWithCurrentLocationLabel) {\n\t\t\titems.push(this._labelFocusAdaptor);\n\t\t}\n\t\treturn items;\n\t}\n\n\t_onfocusin(event) {\n\t\tconst target = event.target,\n\t\t\tlabelWrapper = this.getCurrentLocationLabelWrapper(),\n\t\t\tcurrentItem = (target === labelWrapper) ? this._labelFocusAdaptor : target;\n\n\t\tthis._itemNavigation.setCurrentItem(currentItem);\n\t}\n\n\t_onkeydown(event) {\n\t\tconst isDropdownArrowFocused = this._isDropdownArrowFocused;\n\n\t\tif (isShow(event) && isDropdownArrowFocused && !this._isOverflowEmpty) {\n\t\t\tevent.preventDefault();\n\t\t\tthis._toggleRespPopover();\n\t\t\treturn;\n\t\t}\n\t\tif (isSpace(event) && isDropdownArrowFocused && !this._isOverflowEmpty && !this._isPickerOpen) {\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif ((isEnter(event) || isSpace(event)) && this._isCurrentLocationLabelFocused) {\n\t\t\tthis._onLabelPress();\n\t\t}\n\t}\n\n\t_onkeyup(event) {\n\t\tif (this._isDropdownArrowFocused && isSpace(event) && !this._isOverflowEmpty && !this._isPickerOpen) {\n\t\t\tthis._openRespPopover();\n\t\t}\n\t}\n\n\t/**\n\t * Caches the space required to render the content\n\t * @private\n\t */\n\t_cacheWidths() {\n\t\tconst map = this._breadcrumbItemWidths,\n\t\t\titems = this.getSlottedNodes(\"items\"),\n\t\t\tlabel = this._currentLocationLabel;\n\n\t\tfor (let i = this._overflowSize; i < items.length; i++) {\n\t\t\tconst item = items[i],\n\t\t\t\tlink = this.shadowRoot.querySelector(`.ui5-breadcrumbs-link-wrapper #${item._id}-link`);\n\t\t\tmap.set(item, this._getElementWidth(link) || 0);\n\t\t}\n\n\t\tif (this._endsWithCurrentLocationLabel && label) {\n\t\t\tconst item = items[items.length - 1];\n\t\t\tmap.set(item, this._getElementWidth(label));\n\t\t}\n\n\t\tif (!this._isOverflowEmpty) {\n\t\t\tthis._dropdownArrowLinkWidth = this._getElementWidth(this._dropdownArrowLink);\n\t\t}\n\t}\n\n\t_updateOverflow() {\n\t\tconst items = this.getSlottedNodes(\"items\"),\n\t\t\tavailableWidth = this.shadowRoot.querySelector(\".ui5-breadcrumbs-root\").offsetWidth;\n\t\tlet requiredWidth = this._getTotalContentWidth(),\n\t\t\toverflowSize = 0;\n\n\t\tif (requiredWidth > availableWidth) {\n\t\t\t// need to show the component that opens the overflow\n\t\t\trequiredWidth += this._dropdownArrowLinkWidth;\n\t\t}\n\n\t\twhile ((requiredWidth > availableWidth) && (overflowSize < this._maxAllowedOverflowSize)) {\n\t\t\tconst itemToOverflow = items[overflowSize];\n\t\t\tlet itemWidth = 0;\n\n\t\t\tif (this._isItemVisible(itemToOverflow)) {\n\t\t\t\titemWidth = this._breadcrumbItemWidths.get(itemToOverflow) || 0;\n\t\t\t}\n\n\t\t\t// move the item to the overflow\n\t\t\trequiredWidth -= itemWidth;\n\t\t\toverflowSize++;\n\t\t}\n\n\t\tthis._overflowSize = overflowSize;\n\n\t\t// if overflow was emptied while picker was open => close redundant popup\n\t\tif (this._isOverflowEmpty && this._isPickerOpen) {\n\t\t\tthis.responsivePopover.close();\n\t\t}\n\n\t\t// if the last focused link has done into the overflow =>\n\t\t// ensure the first visible link is focusable\n\t\tconst focusableItems = this._getFocusableItems();\n\t\tif (!focusableItems.some(x => x._tabIndex === \"0\")) {\n\t\t\tthis._itemNavigation.setCurrentItem(focusableItems[0]);\n\t\t}\n\t}\n\n\t_getElementWidth(element) {\n\t\tif (element) {\n\t\t\treturn Math.ceil(element.getBoundingClientRect().width);\n\t\t}\n\t}\n\n\t_getTotalContentWidth() {\n\t\tconst items = this.getSlottedNodes(\"items\"),\n\t\t\twidthsMap = this._breadcrumbItemWidths,\n\t\t\ttotalLinksWidth = items.reduce((sum, link) => sum + widthsMap.get(link), 0);\n\n\t\treturn totalLinksWidth;\n\t}\n\n\t_onLinkPress(event) {\n\t\tconst link = event.target,\n\t\t\titems = this.getSlottedNodes(\"items\"),\n\t\t\titem = items.find(x => `${x._id}-link` === link.id);\n\t\tthis.fireEvent(\"item-click\", { item });\n\t}\n\n\t_onLabelPress() {\n\t\tconst items = this.getSlottedNodes(\"items\"),\n\t\t\titem = items[items.length - 1];\n\t\tthis.fireEvent(\"item-click\", { item });\n\t}\n\n\t_onOverflowListItemSelect(event) {\n\t\tconst listItem = event.detail.item,\n\t\t\titems = this.getSlottedNodes(\"items\"),\n\t\t\titem = items.find(x => `${x._id}-li` === listItem.id);\n\n\t\twindow.open(item.href, item.target || \"_self\", \"noopener,noreferrer\");\n\t\tthis.responsivePopover.close();\n\t\tthis.fireEvent(\"item-click\", { item });\n\t}\n\n\tasync _respPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\treturn staticAreaItem.querySelector(\"[ui5-responsive-popover]\");\n\t}\n\n\tasync _toggleRespPopover() {\n\t\tthis.responsivePopover = await this._respPopover();\n\n\t\tif (this._isPickerOpen) {\n\t\t\tthis._closeRespPopover();\n\t\t} else {\n\t\t\tthis._openRespPopover();\n\t\t}\n\t}\n\n\tasync _closeRespPopover() {\n\t\tthis.responsivePopover && this.responsivePopover.close();\n\t}\n\n\tasync _openRespPopover() {\n\t\tthis.responsivePopover = await this._respPopover();\n\t\tthis.responsivePopover.showAt(this._dropdownArrowLink);\n\t}\n\n\t_isItemVisible(item) {\n\t\treturn !item.hidden && this._hasVisibleContent(item);\n\t}\n\n\t_hasVisibleContent(item) {\n\t\t// the check is not complete but may be extended in the future if needed to cover\n\t\t// cases becides the standard (UX-recommended) ones\n\t\treturn item.innerText || Array.from(item.children).some(child => !child.hidden);\n\t}\n\n\t_preprocessItems() {\n\t\tthis.items.forEach(item => {\n\t\t\titem._getRealDomRef = () => this.getDomRef().querySelector(`[data-ui5-stable*=${item.stableDomRef}]`);\n\t\t});\n\t}\n\n\tgetCurrentLocationLabelWrapper() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-breadcrumbs-current-location > span\");\n\t}\n\n\tget _endsWithCurrentLocationLabel() {\n\t\treturn this.design === BreadcrumbsDesign.Standard;\n\t}\n\n\tget _currentLocationText() {\n\t\tconst items = this.getSlottedNodes(\"items\");\n\t\tif (this._endsWithCurrentLocationLabel && items.length > 1) {\n\t\t\tconst item = items[items.length - 1];\n\t\t\tif (this._isItemVisible(item)) {\n\t\t\t\treturn item.innerText;\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tget _currentLocationLabel() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-breadcrumbs-current-location ui5-label\");\n\t}\n\n\tget _isDropdownArrowFocused() {\n\t\treturn this._dropdownArrowLink._tabIndex === \"0\";\n\t}\n\n\tget _isCurrentLocationLabelFocused() {\n\t\tconst label = this.getCurrentLocationLabelWrapper();\n\t\treturn label && label.tabIndex === 0;\n\t}\n\n\t/**\n\t * Returns the maximum allowed count of items in the overflow\n\t * with respect to the UX requirement to never overflow the last visible item\n\t */\n\tget _maxAllowedOverflowSize() {\n\t\tconst items = this.getSlottedNodes(\"items\").filter(item => this._isItemVisible(item));\n\t\t// all items except tha last visible one are allowed to overflow by UX requirement\n\t\treturn items.length - 1;\n\t}\n\n\t/**\n\t * Getter for the interactive element that opens the overflow\n\t * @private\n\t */\n\tget _dropdownArrowLink() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-breadcrumbs-dropdown-arrow-link-wrapper ui5-link\");\n\t}\n\n\t/**\n\t * Getter for the list of abstract breadcrumb items to be rendered as list-items inside the overflow\n\t */\n\tget _overflowItemsData() {\n\t\treturn this.getSlottedNodes(\"items\")\n\t\t\t.slice(0, this._overflowSize)\n\t\t\t.filter(item => this._isItemVisible(item))\n\t\t\t.reverse();\n\t}\n\n\t/**\n\t * Getter for the list of abstract breadcrumb items to be rendered as links outside the overflow\n\t */\n\tget _linksData() {\n\t\tconst items = this.getSlottedNodes(\"items\").slice(this._overflowSize);\n\n\t\tif (this._endsWithCurrentLocationLabel) {\n\t\t\titems.pop();\n\t\t}\n\n\t\treturn items.filter(item => this._isItemVisible(item));\n\t}\n\n\t/**\n\t * Getter for the list of links corresponding to the abstract breadcrumb items\n\t */\n\tget _links() {\n\t\treturn Array.from(this.shadowRoot.querySelectorAll(\".ui5-breadcrumbs-link-wrapper ui5-link\"));\n\t}\n\n\tget _isOverflowEmpty() {\n\t\treturn this._overflowItemsData.length === 0;\n\t}\n\n\tget _ariaHasPopup() {\n\t\tif (!this._isOverflowEmpty) {\n\t\t\treturn \"listbox\";\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tget _isPickerOpen() {\n\t\treturn !!this.responsivePopover && this.responsivePopover.opened;\n\t}\n\n\tget _accessibleNameText() {\n\t\treturn Breadcrumbs.i18nBundle.getText(BREADCRUMBS_ARIA_LABEL);\n\t}\n\n\tget _dropdownArrowAccessibleNameText() {\n\t\treturn Breadcrumbs.i18nBundle.getText(BREADCRUMBS_OVERFLOW_ARIA_LABEL);\n\t}\n\n\tget _cancelButtonText() {\n\t\treturn Breadcrumbs.i18nBundle.getText(BREADCRUMBS_CANCEL_BUTTON);\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\tBreadcrumbsItem,\n\t\t\tLink,\n\t\t\tLabel,\n\t\t\tResponsivePopover,\n\t\t\tList,\n\t\t\tStandardListItem,\n\t\t\tIcon,\n\t\t];\n\t}\n\n\tstatic async onDefine() {\n\t\tBreadcrumbs.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n}\n\nBreadcrumbs.define();\n\nexport default Breadcrumbs;\n"]},"metadata":{},"sourceType":"module"}