{"ast":null,"code":"import getLocale from \"@ui5/webcomponents-base/dist/locale/getLocale.js\";\nimport { getFirstDayOfWeek } from \"@ui5/webcomponents-base/dist/config/FormatSettings.js\";\nimport getCachedLocaleDataInstance from \"@ui5/webcomponents-localization/dist/getCachedLocaleDataInstance.js\";\nimport { isSpace, isSpaceShift, isEnter, isEnterShift, isUp, isDown, isLeft, isRight, isHome, isEnd, isHomeCtrl, isEndCtrl, isPageUp, isPageDown, isPageUpShift, isPageUpAlt, isPageUpShiftCtrl, isPageDownShift, isPageDownAlt, isPageDownShiftCtrl } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport CalendarDate from \"@ui5/webcomponents-localization/dist/dates/CalendarDate.js\";\nimport calculateWeekNumber from \"@ui5/webcomponents-localization/dist/dates/calculateWeekNumber.js\";\nimport CalendarType from \"@ui5/webcomponents-base/dist/types/CalendarType.js\";\nimport CalendarSelectionMode from \"./types/CalendarSelectionMode.js\";\nimport CalendarPart from \"./CalendarPart.js\";\nimport DayPickerTemplate from \"./generated/templates/DayPickerTemplate.lit.js\";\nimport { DAY_PICKER_WEEK_NUMBER_TEXT, DAY_PICKER_NON_WORKING_DAY, DAY_PICKER_TODAY } from \"./generated/i18n/i18n-defaults.js\";\nimport dayPickerCSS from \"./generated/themes/DayPicker.css.js\";\n/**\n * @public\n */\n\nconst metadata = {\n  tag: \"ui5-daypicker\",\n  properties:\n  /** @lends  sap.ui.webcomponents.main.DayPicker.prototype */\n  {\n    /**\n     * An array of UTC timestamps representing the selected date or dates depending on the capabilities of the picker component.\n     * @type {Array}\n     * @public\n     */\n    selectedDates: {\n      type: Integer,\n      multiple: true,\n      compareValues: true\n    },\n\n    /**\n     * Defines the type of selection used in the day picker component.\n     * Accepted property values are:<br>\n     * <ul>\n     * <li><code>CalendarSelectionMode.Single</code> - enables a single date selection.(default value)</li>\n     * <li><code>CalendarSelectionMode.Range</code> - enables selection of a date range.</li>\n     * <li><code>CalendarSelectionMode.Multiple</code> - enables selection of multiple dates.</li>\n     * </ul>\n     * @type {CalendarSelectionMode}\n     * @defaultvalue \"Single\"\n     * @public\n     */\n    selectionMode: {\n      type: CalendarSelectionMode,\n      defaultValue: CalendarSelectionMode.Single\n    },\n\n    /**\n     * Defines the visibility of the week numbers column.\n     * <br><br>\n     *\n     * <b>Note:<b> For calendars other than Gregorian,\n     * the week numbers are not displayed regardless of what is set.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.0.0-rc.8\n     */\n    hideWeekNumbers: {\n      type: Boolean\n    },\n\n    /**\n     * @type {Object}\n     * @private\n     */\n    _weeks: {\n      type: Object,\n      multiple: true\n    },\n    _dayNames: {\n      type: Object,\n      multiple: true\n    },\n\n    /**\n     * When set, the component will skip all work in onBeforeRendering and will not automatically set the focus on itself\n     * @type {boolean}\n     * @private\n     */\n    _hidden: {\n      type: Boolean,\n      noAttribute: true\n    },\n\n    /**\n     * When selectionMode=\"Range\" and the first day in the range is selected, this is the currently hovered (when using mouse) or focused (when using keyboard) day by the user\n     * @private\n     */\n    _secondTimestamp: {\n      type: String\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.DayPicker.prototype */\n  {\n    /**\n     * Fired when the selected date(s) change\n     * @public\n     * @event\n     */\n    change: {},\n\n    /**\n     * Fired when the timestamp changes (user navigates with the keyboard) or clicks with the mouse\n     * @public\n     * @event\n     */\n    navigate: {}\n  }\n};\n\nconst isBetween = (x, num1, num2) => x > Math.min(num1, num2) && x < Math.max(num1, num2);\n\nconst DAYS_IN_WEEK = 7;\n/**\n * @class\n *\n * Represents one month view inside a calendar.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.DayPicker\n * @extends CalendarPart\n * @tagname ui5-daypicker\n * @public\n */\n\nclass DayPicker extends CalendarPart {\n  static get metadata() {\n    return metadata;\n  }\n\n  static get template() {\n    return DayPickerTemplate;\n  }\n\n  static get styles() {\n    return dayPickerCSS;\n  }\n\n  onBeforeRendering() {\n    const localeData = getCachedLocaleDataInstance(getLocale());\n\n    this._buildWeeks(localeData);\n\n    this._buildDayNames(localeData);\n  }\n  /**\n   * Builds the _weeks object that represents the month\n   * @param localeData\n   * @private\n   */\n\n\n  _buildWeeks(localeData) {\n    if (this._hidden) {\n      return; // Optimization to not do any work unless the current picker\n    }\n\n    this._weeks = [];\n\n    const firstDayOfWeek = this._getFirstDayOfWeek();\n\n    const monthsNames = localeData.getMonths(\"wide\", this._primaryCalendarType);\n    const secondaryMonthsNames = this.hasSecondaryCalendarType && localeData.getMonths(\"wide\", this.secondaryCalendarType);\n    const nonWorkingDayLabel = DayPicker.i18nBundle.getText(DAY_PICKER_NON_WORKING_DAY);\n    const todayLabel = DayPicker.i18nBundle.getText(DAY_PICKER_TODAY);\n\n    const tempDate = this._getFirstDay(); // date that will be changed by 1 day 42 times\n\n\n    const todayDate = CalendarDate.fromLocalJSDate(new Date(), this._primaryCalendarType); // current day date - calculate once\n\n    const calendarDate = this._calendarDate; // store the _calendarDate value as this getter is expensive and degrades IE11 perf\n\n    const minDate = this._minDate; // store the _minDate (expensive getter)\n\n    const maxDate = this._maxDate; // store the _maxDate (expensive getter)\n\n    const tempSecondDate = this.hasSecondaryCalendarType && this._getSecondaryDay(tempDate);\n\n    let week = [];\n\n    for (let i = 0; i < DAYS_IN_WEEK * 6; i++) {\n      // always show 6 weeks total, 42 days to avoid jumping\n      const timestamp = tempDate.valueOf() / 1000; // no need to round because CalendarDate does it\n\n      let dayOfTheWeek = tempDate.getDay() - firstDayOfWeek;\n\n      if (dayOfTheWeek < 0) {\n        dayOfTheWeek += DAYS_IN_WEEK;\n      }\n\n      const isFocused = tempDate.getMonth() === calendarDate.getMonth() && tempDate.getDate() === calendarDate.getDate();\n\n      const isSelected = this._isDaySelected(timestamp);\n\n      const isSelectedBetween = this._isDayInsideSelectionRange(timestamp);\n\n      const isOtherMonth = tempDate.getMonth() !== calendarDate.getMonth();\n\n      const isWeekend = this._isWeekend(tempDate);\n\n      const isDisabled = tempDate.valueOf() < minDate.valueOf() || tempDate.valueOf() > maxDate.valueOf();\n      const isToday = tempDate.isSame(todayDate);\n      const isFirstDayOfWeek = tempDate.getDay() === firstDayOfWeek;\n      const nonWorkingAriaLabel = isWeekend ? `${nonWorkingDayLabel} ` : \"\";\n      const todayAriaLabel = isToday ? `${todayLabel} ` : \"\";\n      const ariaLabel = this.hasSecondaryCalendarType ? `${todayAriaLabel}${nonWorkingAriaLabel}${monthsNames[tempDate.getMonth()]} ${tempDate.getDate()}, ${tempDate.getYear()}; ${secondaryMonthsNames[tempSecondDate.getMonth()]} ${tempSecondDate.getDate()}, ${tempSecondDate.getYear()}` : `${todayAriaLabel}${nonWorkingAriaLabel}${monthsNames[tempDate.getMonth()]} ${tempDate.getDate()}, ${tempDate.getYear()}`;\n      const day = {\n        timestamp: timestamp.toString(),\n        focusRef: isFocused,\n        _tabIndex: isFocused ? \"0\" : \"-1\",\n        selected: isSelected,\n        day: tempDate.getDate(),\n        secondDay: this.hasSecondaryCalendarType && tempSecondDate.getDate(),\n        _isSecondaryCalendarType: this.hasSecondaryCalendarType,\n        classes: `ui5-dp-item ui5-dp-wday${dayOfTheWeek}`,\n        ariaLabel,\n        ariaSelected: isSelected ? \"true\" : \"false\",\n        ariaDisabled: isOtherMonth ? \"true\" : undefined,\n        disabled: isDisabled\n      };\n\n      if (isFirstDayOfWeek) {\n        day.classes += \" ui5-dp-firstday\";\n      }\n\n      if (isSelected) {\n        day.classes += \" ui5-dp-item--selected\";\n      }\n\n      if (isSelectedBetween) {\n        day.classes += \" ui5-dp-item--selected-between\";\n      }\n\n      if (isToday) {\n        day.classes += \" ui5-dp-item--now\";\n      }\n\n      if (isOtherMonth) {\n        day.classes += \" ui5-dp-item--othermonth\";\n      }\n\n      if (isWeekend) {\n        day.classes += \" ui5-dp-item--weeekend\";\n      }\n\n      if (isDisabled) {\n        day.classes += \" ui5-dp-item--disabled\";\n      }\n\n      if (this.hasSecondaryCalendarType) {\n        day.classes += \" ui5-dp-item--withsecondtype\";\n      }\n\n      week.push(day);\n\n      if (dayOfTheWeek === DAYS_IN_WEEK - 1) {\n        // 0-indexed so 6 is the last day of the week\n        week.unshift({\n          weekNum: calculateWeekNumber(getFirstDayOfWeek(), tempDate.toUTCJSDate(), tempDate.getYear(), getLocale(), localeData),\n          isHidden: this.shouldHideWeekNumbers\n        });\n      }\n\n      if (week.length === DAYS_IN_WEEK + 1) {\n        // 7 entries for each day + 1 for the week numbers\n        this._weeks.push(week);\n\n        week = [];\n      }\n\n      tempDate.setDate(tempDate.getDate() + 1);\n\n      if (this.hasSecondaryCalendarType) {\n        tempSecondDate.setDate(tempSecondDate.getDate() + 1);\n      }\n    }\n  }\n  /**\n   * Builds the dayNames object (header of the month)\n   * @param localeData\n   * @private\n   */\n\n\n  _buildDayNames(localeData) {\n    if (this._hidden) {\n      return; // Optimization to not do any work unless the current picker\n    }\n\n    let dayOfTheWeek;\n    const aDayNamesWide = localeData.getDays(\"wide\", this._primaryCalendarType);\n    const aDayNamesAbbreviated = localeData.getDays(\"abbreviated\", this._primaryCalendarType);\n    let dayName;\n    this._dayNames = [];\n\n    this._dayNames.push({\n      classes: \"ui5-dp-dayname\",\n      name: DayPicker.i18nBundle.getText(DAY_PICKER_WEEK_NUMBER_TEXT)\n    });\n\n    for (let i = 0; i < DAYS_IN_WEEK; i++) {\n      dayOfTheWeek = i + this._getFirstDayOfWeek();\n\n      if (dayOfTheWeek > DAYS_IN_WEEK - 1) {\n        // 0-indexed so index of 6 is the maximum allowed\n        dayOfTheWeek -= DAYS_IN_WEEK;\n      }\n\n      dayName = {\n        name: aDayNamesWide[dayOfTheWeek],\n        ultraShortName: aDayNamesAbbreviated[dayOfTheWeek],\n        classes: \"ui5-dp-dayname\"\n      };\n\n      this._dayNames.push(dayName);\n    }\n\n    this._dayNames[1].classes += \" ui5-dp-firstday\";\n\n    if (this.shouldHideWeekNumbers) {\n      this._dayNames.shift();\n    }\n  }\n\n  onAfterRendering() {\n    if (this._autoFocus && !this._hidden) {\n      this.focus();\n    }\n  }\n\n  _onfocusin() {\n    this._autoFocus = true;\n  }\n\n  _onfocusout() {\n    this._autoFocus = false;\n  }\n  /**\n   * Tells if the day is selected (dark blue)\n   * @param timestamp\n   * @returns {boolean}\n   * @private\n   */\n\n\n  _isDaySelected(timestamp) {\n    if (this.selectionMode === CalendarSelectionMode.Single) {\n      return timestamp === this.selectedDates[0];\n    } // Multiple, Range\n\n\n    return this.selectedDates.includes(timestamp);\n  }\n  /**\n   * Tells if the day is inside a selection range (light blue)\n   * @param timestamp\n   * @returns {*}\n   * @private\n   */\n\n\n  _isDayInsideSelectionRange(timestamp) {\n    // No selection at all (or not in range selection mode)\n    if (this.selectionMode !== CalendarSelectionMode.Range || !this.selectedDates.length) {\n      return false;\n    } // Only one date selected - the user is hovering with the mouse or navigating with the keyboard to select the second one\n\n\n    if (this.selectedDates.length === 1 && this._secondTimestamp) {\n      return isBetween(timestamp, this.selectedDates[0], this._secondTimestamp);\n    } // Two dates selected - stable range\n\n\n    return isBetween(timestamp, this.selectedDates[0], this.selectedDates[1]);\n  }\n  /**\n   * Selects/deselects a day\n   * @param event\n   * @param isShift true if the user did Click+Shift or Enter+Shift (but not Space+Shift)\n   * @private\n   */\n\n\n  _selectDate(event, isShift) {\n    const target = event.target;\n\n    if (!this._isDayPressed(target)) {\n      return;\n    }\n\n    const timestamp = this._getTimestampFromDom(target);\n\n    this._safelySetTimestamp(timestamp);\n\n    this._updateSecondTimestamp();\n\n    if (this.selectionMode === CalendarSelectionMode.Single) {\n      this.selectedDates = [timestamp];\n    } else if (this.selectionMode === CalendarSelectionMode.Multiple) {\n      if (this.selectedDates.length > 0 && isShift) {\n        this._multipleSelection(timestamp);\n      } else {\n        this._toggleTimestampInSelection(timestamp);\n      }\n    } else {\n      this.selectedDates = this.selectedDates.length === 1 ? [...this.selectedDates, timestamp] : [timestamp];\n    }\n\n    this.fireEvent(\"change\", {\n      timestamp: this.timestamp,\n      dates: this.selectedDates\n    });\n  }\n  /**\n   * Selects/deselects the whole row (week)\n   * @param event\n   * @private\n   */\n\n\n  _selectWeek(event) {\n    this._weeks.forEach(week => {\n      const dayInThisWeek = week.findIndex(item => {\n        const date = CalendarDate.fromTimestamp(parseInt(item.timestamp) * 1000);\n        return date.getMonth() === this._calendarDate.getMonth() && date.getDate() === this._calendarDate.getDate();\n      }) !== -1;\n\n      if (dayInThisWeek) {\n        // The current day is in this week\n        const notAllDaysOfThisWeekSelected = week.some(item => item.timestamp && !this.selectedDates.includes(parseInt(item.timestamp)));\n\n        if (notAllDaysOfThisWeekSelected) {\n          // even if one day is not selected, select the whole week\n          week.filter(item => item.timestamp).forEach(item => {\n            this._addTimestampToSelection(parseInt(item.timestamp));\n          });\n        } else {\n          // only if all days of this week are selected, deselect them\n          week.filter(item => item.timestamp).forEach(item => {\n            this._removeTimestampFromSelection(parseInt(item.timestamp));\n          });\n        }\n      }\n    });\n\n    this.fireEvent(\"change\", {\n      timestamp: this.timestamp,\n      dates: this.selectedDates\n    });\n  }\n\n  _toggleTimestampInSelection(timestamp) {\n    if (this.selectedDates.includes(timestamp)) {\n      this._removeTimestampFromSelection(timestamp);\n    } else {\n      this._addTimestampToSelection(timestamp);\n    }\n  }\n\n  _addTimestampToSelection(timestamp) {\n    if (!this.selectedDates.includes(timestamp)) {\n      this.selectedDates = [...this.selectedDates, timestamp];\n    }\n  }\n\n  _removeTimestampFromSelection(timestamp) {\n    this.selectedDates = this.selectedDates.filter(value => value !== timestamp);\n  }\n  /**\n   * When at least one day is selected and the user pressed shift\n   * @param timestamp\n   * @private\n   */\n\n\n  _multipleSelection(timestamp) {\n    const min = Math.min(...this.selectedDates);\n    const max = Math.max(...this.selectedDates);\n    let start;\n    let end;\n    let toggle = false;\n\n    if (timestamp < min) {\n      start = timestamp;\n      end = min;\n    } else if (timestamp >= min && timestamp <= max) {\n      // inside the current range - toggle all between the selected and focused\n      const distanceToMin = Math.abs(timestamp - min);\n      const distanceToMax = Math.abs(timestamp - max);\n\n      if (distanceToMin < distanceToMax) {\n        start = timestamp;\n        end = max;\n      } else {\n        start = min;\n        end = timestamp;\n      }\n\n      toggle = true;\n    } else {\n      start = max;\n      end = timestamp;\n    }\n\n    const startDate = CalendarDate.fromTimestamp(start * 1000);\n    const endDate = CalendarDate.fromTimestamp(end * 1000);\n\n    while (startDate.valueOf() <= endDate.valueOf()) {\n      this[toggle ? \"_toggleTimestampInSelection\" : \"_addTimestampToSelection\"](startDate.valueOf() / 1000);\n      startDate.setDate(startDate.getDate() + 1);\n    }\n  }\n  /**\n   * Set the hovered day as the _secondTimestamp\n   * @param event\n   * @private\n   */\n\n\n  _onmouseover(event) {\n    const hoveredItem = event.target.closest(\".ui5-dp-item\");\n\n    if (hoveredItem && this.selectionMode === CalendarSelectionMode.Range && this.selectedDates.length === 1) {\n      this._secondTimestamp = this._getTimestampFromDom(hoveredItem);\n    }\n  }\n\n  _onkeydown(event) {\n    let preventDefault = true;\n\n    if (isEnter(event) || isEnterShift(event)) {\n      this._selectDate(event, isEnterShift(event));\n    } else if (isSpace(event) || isSpaceShift(event)) {\n      event.preventDefault();\n    } else if (isLeft(event)) {\n      this._modifyTimestampBy(-1, \"day\");\n    } else if (isRight(event)) {\n      this._modifyTimestampBy(1, \"day\");\n    } else if (isUp(event)) {\n      this._modifyTimestampBy(-7, \"day\");\n    } else if (isDown(event)) {\n      this._modifyTimestampBy(7, \"day\");\n    } else if (isPageUp(event)) {\n      this._modifyTimestampBy(-1, \"month\");\n    } else if (isPageDown(event)) {\n      this._modifyTimestampBy(1, \"month\");\n    } else if (isPageUpShift(event) || isPageUpAlt(event)) {\n      this._modifyTimestampBy(-1, \"year\");\n    } else if (isPageDownShift(event) || isPageDownAlt(event)) {\n      this._modifyTimestampBy(1, \"year\");\n    } else if (isPageUpShiftCtrl(event)) {\n      this._modifyTimestampBy(-10, \"year\");\n    } else if (isPageDownShiftCtrl(event)) {\n      this._modifyTimestampBy(10, \"year\");\n    } else if (isHome(event) || isEnd(event)) {\n      this._onHomeOrEnd(isHome(event));\n    } else if (isHomeCtrl(event)) {\n      const tempDate = new CalendarDate(this._calendarDate, this._primaryCalendarType);\n      tempDate.setDate(1); // Set the first day of the month\n\n      this._setTimestamp(tempDate.valueOf() / 1000);\n    } else if (isEndCtrl(event)) {\n      const tempDate = new CalendarDate(this._calendarDate, this._primaryCalendarType);\n      tempDate.setMonth(tempDate.getMonth() + 1);\n      tempDate.setDate(0); // Set the last day of the month (0th day of next month)\n\n      this._setTimestamp(tempDate.valueOf() / 1000);\n    } else {\n      preventDefault = false;\n    }\n\n    if (preventDefault) {\n      event.preventDefault();\n    }\n  }\n\n  _onkeyup(event) {\n    // Even if Space+Shift was pressed, ignore the shift unless in Multiple selection\n    if (isSpace(event) || isSpaceShift(event) && this.selectionMode !== CalendarSelectionMode.Multiple) {\n      this._selectDate(event, false);\n    } else if (isSpaceShift(event)) {\n      this._selectWeek(event);\n    }\n  }\n  /**\n   * Click is the same as Enter: Click+Shift has the same effect as Enter+Shift\n   * @param event\n   * @private\n   */\n\n\n  _onclick(event) {\n    this._selectDate(event, event.shiftKey);\n  }\n  /**\n   * One Home or End, move the focus to the first or last item in the row\n   * @param homePressed\n   * @private\n   */\n\n\n  _onHomeOrEnd(homePressed) {\n    this._weeks.forEach(week => {\n      const dayInThisWeek = week.findIndex(item => {\n        const date = CalendarDate.fromTimestamp(parseInt(item.timestamp) * 1000);\n        return date.getMonth() === this._calendarDate.getMonth() && date.getDate() === this._calendarDate.getDate();\n      }) !== -1;\n\n      if (dayInThisWeek) {\n        // The current day is in this week\n        const index = homePressed ? 1 : 7; // select the first (if Home) or last (if End) day of the week\n\n        this._setTimestamp(parseInt(week[index].timestamp));\n      }\n    });\n  }\n  /**\n   * Called from Calendar.js\n   * @protected\n   */\n\n\n  _hasPreviousPage() {\n    return !(this._calendarDate.getMonth() === this._minDate.getMonth() && this._calendarDate.getYear() === this._minDate.getYear());\n  }\n  /**\n   * Called from Calendar.js\n   * @protected\n   */\n\n\n  _hasNextPage() {\n    return !(this._calendarDate.getMonth() === this._maxDate.getMonth() && this._calendarDate.getYear() === this._maxDate.getYear());\n  }\n  /**\n   * Called from Calendar.js\n   * Same as PageUp\n   * @protected\n   */\n\n\n  _showPreviousPage() {\n    this._modifyTimestampBy(-1, \"month\");\n  }\n  /**\n   * Called from Calendar.js\n   * Same as PageDown\n   * @protected\n   */\n\n\n  _showNextPage() {\n    this._modifyTimestampBy(1, \"month\");\n  }\n  /**\n   * Modifies the timestamp by a certain amount of days/months/years\n   * @param amount\n   * @param unit\n   * @private\n   */\n\n\n  _modifyTimestampBy(amount, unit) {\n    // Modify the current timestamp\n    this._safelyModifyTimestampBy(amount, unit);\n\n    this._updateSecondTimestamp(); // Notify the calendar to update its timestamp\n\n\n    this.fireEvent(\"navigate\", {\n      timestamp: this.timestamp\n    });\n  }\n  /**\n   * Sets the timestamp to an absolute value\n   * @param value\n   * @private\n   */\n\n\n  _setTimestamp(value) {\n    this._safelySetTimestamp(value);\n\n    this._updateSecondTimestamp();\n\n    this.fireEvent(\"navigate\", {\n      timestamp: this.timestamp\n    });\n  }\n  /**\n   * During range selection, when the user is navigating with the keyboard, the currently focused day is considered the \"second day\"\n   * @private\n   */\n\n\n  _updateSecondTimestamp() {\n    if (this.selectionMode === CalendarSelectionMode.Range && this.selectedDates.length === 1) {\n      this._secondTimestamp = this.timestamp;\n    }\n  }\n\n  get shouldHideWeekNumbers() {\n    if (this._primaryCalendarType !== CalendarType.Gregorian) {\n      return true;\n    }\n\n    return this.hideWeekNumbers;\n  }\n\n  get hasSecondaryCalendarType() {\n    return !!this.secondaryCalendarType;\n  }\n\n  _isWeekend(oDate) {\n    const localeData = getCachedLocaleDataInstance(getLocale());\n    const iWeekDay = oDate.getDay(),\n          iWeekendStart = localeData.getWeekendStart(),\n          iWeekendEnd = localeData.getWeekendEnd();\n    return iWeekDay >= iWeekendStart && iWeekDay <= iWeekendEnd || iWeekendEnd < iWeekendStart && (iWeekDay >= iWeekendStart || iWeekDay <= iWeekendEnd);\n  }\n\n  _isDayPressed(target) {\n    const targetParent = target.parentNode;\n    return target.className.indexOf(\"ui5-dp-item\") > -1 || targetParent && targetParent.classList && targetParent.classList.contains(\"ui5-dp-item\");\n  }\n\n  _getSecondaryDay(tempDate) {\n    return new CalendarDate(tempDate, this.secondaryCalendarType);\n  }\n\n  _getFirstDay() {\n    let daysFromPreviousMonth;\n\n    const firstDayOfWeek = this._getFirstDayOfWeek(); // determine weekday of first day in month\n\n\n    const firstDay = new CalendarDate(this._calendarDate, this._primaryCalendarType);\n    firstDay.setDate(1);\n    daysFromPreviousMonth = firstDay.getDay() - firstDayOfWeek;\n\n    if (daysFromPreviousMonth < 0) {\n      daysFromPreviousMonth = 7 + daysFromPreviousMonth;\n    }\n\n    if (daysFromPreviousMonth > 0) {\n      firstDay.setDate(1 - daysFromPreviousMonth);\n    }\n\n    return firstDay;\n  }\n\n  _getFirstDayOfWeek() {\n    const localeData = getCachedLocaleDataInstance(getLocale());\n    const confFirstDayOfWeek = getFirstDayOfWeek();\n    return Number.isInteger(confFirstDayOfWeek) ? confFirstDayOfWeek : localeData.getFirstDayOfWeek();\n  }\n\n  get styles() {\n    return {\n      wrapper: {\n        display: this._hidden ? \"none\" : \"flex\",\n        \"justify-content\": \"center\"\n      },\n      main: {\n        width: \"100%\"\n      }\n    };\n  }\n\n  get ariaRoledescription() {\n    return this.hasSecondaryCalendarType ? `${this._primaryCalendarType} calendar with secondary ${this.secondaryCalendarType} calendar` : `${this._primaryCalendarType} calendar`;\n  }\n\n}\n\nDayPicker.define();\nexport default DayPicker;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/DayPicker.js"],"names":["getLocale","getFirstDayOfWeek","getCachedLocaleDataInstance","isSpace","isSpaceShift","isEnter","isEnterShift","isUp","isDown","isLeft","isRight","isHome","isEnd","isHomeCtrl","isEndCtrl","isPageUp","isPageDown","isPageUpShift","isPageUpAlt","isPageUpShiftCtrl","isPageDownShift","isPageDownAlt","isPageDownShiftCtrl","Integer","CalendarDate","calculateWeekNumber","CalendarType","CalendarSelectionMode","CalendarPart","DayPickerTemplate","DAY_PICKER_WEEK_NUMBER_TEXT","DAY_PICKER_NON_WORKING_DAY","DAY_PICKER_TODAY","dayPickerCSS","metadata","tag","properties","selectedDates","type","multiple","compareValues","selectionMode","defaultValue","Single","hideWeekNumbers","Boolean","_weeks","Object","_dayNames","_hidden","noAttribute","_secondTimestamp","String","events","change","navigate","isBetween","x","num1","num2","Math","min","max","DAYS_IN_WEEK","DayPicker","template","styles","onBeforeRendering","localeData","_buildWeeks","_buildDayNames","firstDayOfWeek","_getFirstDayOfWeek","monthsNames","getMonths","_primaryCalendarType","secondaryMonthsNames","hasSecondaryCalendarType","secondaryCalendarType","nonWorkingDayLabel","i18nBundle","getText","todayLabel","tempDate","_getFirstDay","todayDate","fromLocalJSDate","Date","calendarDate","_calendarDate","minDate","_minDate","maxDate","_maxDate","tempSecondDate","_getSecondaryDay","week","i","timestamp","valueOf","dayOfTheWeek","getDay","isFocused","getMonth","getDate","isSelected","_isDaySelected","isSelectedBetween","_isDayInsideSelectionRange","isOtherMonth","isWeekend","_isWeekend","isDisabled","isToday","isSame","isFirstDayOfWeek","nonWorkingAriaLabel","todayAriaLabel","ariaLabel","getYear","day","toString","focusRef","_tabIndex","selected","secondDay","_isSecondaryCalendarType","classes","ariaSelected","ariaDisabled","undefined","disabled","push","unshift","weekNum","toUTCJSDate","isHidden","shouldHideWeekNumbers","length","setDate","aDayNamesWide","getDays","aDayNamesAbbreviated","dayName","name","ultraShortName","shift","onAfterRendering","_autoFocus","focus","_onfocusin","_onfocusout","includes","Range","_selectDate","event","isShift","target","_isDayPressed","_getTimestampFromDom","_safelySetTimestamp","_updateSecondTimestamp","Multiple","_multipleSelection","_toggleTimestampInSelection","fireEvent","dates","_selectWeek","forEach","dayInThisWeek","findIndex","item","date","fromTimestamp","parseInt","notAllDaysOfThisWeekSelected","some","filter","_addTimestampToSelection","_removeTimestampFromSelection","value","start","end","toggle","distanceToMin","abs","distanceToMax","startDate","endDate","_onmouseover","hoveredItem","closest","_onkeydown","preventDefault","_modifyTimestampBy","_onHomeOrEnd","_setTimestamp","setMonth","_onkeyup","_onclick","shiftKey","homePressed","index","_hasPreviousPage","_hasNextPage","_showPreviousPage","_showNextPage","amount","unit","_safelyModifyTimestampBy","Gregorian","oDate","iWeekDay","iWeekendStart","getWeekendStart","iWeekendEnd","getWeekendEnd","targetParent","parentNode","className","indexOf","classList","contains","daysFromPreviousMonth","firstDay","confFirstDayOfWeek","Number","isInteger","wrapper","display","main","width","ariaRoledescription","define"],"mappings":"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","sourcesContent":["import getLocale from \"@ui5/webcomponents-base/dist/locale/getLocale.js\";\nimport { getFirstDayOfWeek } from \"@ui5/webcomponents-base/dist/config/FormatSettings.js\";\nimport getCachedLocaleDataInstance from \"@ui5/webcomponents-localization/dist/getCachedLocaleDataInstance.js\";\nimport {\n\tisSpace,\n\tisSpaceShift,\n\tisEnter,\n\tisEnterShift,\n\tisUp,\n\tisDown,\n\tisLeft,\n\tisRight,\n\tisHome,\n\tisEnd,\n\tisHomeCtrl,\n\tisEndCtrl,\n\tisPageUp,\n\tisPageDown,\n\tisPageUpShift,\n\tisPageUpAlt,\n\tisPageUpShiftCtrl,\n\tisPageDownShift,\n\tisPageDownAlt,\n\tisPageDownShiftCtrl,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport CalendarDate from \"@ui5/webcomponents-localization/dist/dates/CalendarDate.js\";\nimport calculateWeekNumber from \"@ui5/webcomponents-localization/dist/dates/calculateWeekNumber.js\";\nimport CalendarType from \"@ui5/webcomponents-base/dist/types/CalendarType.js\";\nimport CalendarSelectionMode from \"./types/CalendarSelectionMode.js\";\nimport CalendarPart from \"./CalendarPart.js\";\nimport DayPickerTemplate from \"./generated/templates/DayPickerTemplate.lit.js\";\n\nimport {\n\tDAY_PICKER_WEEK_NUMBER_TEXT,\n\tDAY_PICKER_NON_WORKING_DAY,\n\tDAY_PICKER_TODAY,\n} from \"./generated/i18n/i18n-defaults.js\";\n\nimport dayPickerCSS from \"./generated/themes/DayPicker.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-daypicker\",\n\tproperties: /** @lends  sap.ui.webcomponents.main.DayPicker.prototype */ {\n\t\t/**\n\t\t * An array of UTC timestamps representing the selected date or dates depending on the capabilities of the picker component.\n\t\t * @type {Array}\n\t\t * @public\n\t\t */\n\t\tselectedDates: {\n\t\t\ttype: Integer,\n\t\t\tmultiple: true,\n\t\t\tcompareValues: true,\n\t\t},\n\n\t\t/**\n\t\t * Defines the type of selection used in the day picker component.\n\t\t * Accepted property values are:<br>\n\t\t * <ul>\n\t\t * <li><code>CalendarSelectionMode.Single</code> - enables a single date selection.(default value)</li>\n\t\t * <li><code>CalendarSelectionMode.Range</code> - enables selection of a date range.</li>\n\t\t * <li><code>CalendarSelectionMode.Multiple</code> - enables selection of multiple dates.</li>\n\t\t * </ul>\n\t\t * @type {CalendarSelectionMode}\n\t\t * @defaultvalue \"Single\"\n\t\t * @public\n\t\t */\n\t\tselectionMode: {\n\t\t\ttype: CalendarSelectionMode,\n\t\t\tdefaultValue: CalendarSelectionMode.Single,\n\t\t},\n\n\t\t/**\n\t\t * Defines the visibility of the week numbers column.\n\t\t * <br><br>\n\t\t *\n\t\t * <b>Note:<b> For calendars other than Gregorian,\n\t\t * the week numbers are not displayed regardless of what is set.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.0.0-rc.8\n\t\t */\n\t\thideWeekNumbers: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\t_weeks: {\n\t\t\ttype: Object,\n\t\t\tmultiple: true,\n\t\t},\n\n\t\t_dayNames: {\n\t\t\ttype: Object,\n\t\t\tmultiple: true,\n\t\t},\n\n\t\t/**\n\t\t * When set, the component will skip all work in onBeforeRendering and will not automatically set the focus on itself\n\t\t * @type {boolean}\n\t\t * @private\n\t\t */\n\t\t_hidden: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t/**\n\t\t * When selectionMode=\"Range\" and the first day in the range is selected, this is the currently hovered (when using mouse) or focused (when using keyboard) day by the user\n\t\t * @private\n\t\t */\n\t\t_secondTimestamp: {\n\t\t\ttype: String,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.DayPicker.prototype */ {\n\t\t/**\n\t\t * Fired when the selected date(s) change\n\t\t * @public\n\t\t * @event\n\t\t */\n\t\tchange: {},\n\t\t/**\n\t\t * Fired when the timestamp changes (user navigates with the keyboard) or clicks with the mouse\n\t\t * @public\n\t\t * @event\n\t\t */\n\t\tnavigate: {},\n\t},\n};\n\nconst isBetween = (x, num1, num2) => x > Math.min(num1, num2) && x < Math.max(num1, num2);\n\nconst DAYS_IN_WEEK = 7;\n\n/**\n * @class\n *\n * Represents one month view inside a calendar.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.DayPicker\n * @extends CalendarPart\n * @tagname ui5-daypicker\n * @public\n */\nclass DayPicker extends CalendarPart {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get template() {\n\t\treturn DayPickerTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn dayPickerCSS;\n\t}\n\n\tonBeforeRendering() {\n\t\tconst localeData = getCachedLocaleDataInstance(getLocale());\n\t\tthis._buildWeeks(localeData);\n\t\tthis._buildDayNames(localeData);\n\t}\n\n\t/**\n\t * Builds the _weeks object that represents the month\n\t * @param localeData\n\t * @private\n\t */\n\t_buildWeeks(localeData) {\n\t\tif (this._hidden) {\n\t\t\treturn; // Optimization to not do any work unless the current picker\n\t\t}\n\n\t\tthis._weeks = [];\n\n\t\tconst firstDayOfWeek = this._getFirstDayOfWeek();\n\t\tconst monthsNames = localeData.getMonths(\"wide\", this._primaryCalendarType);\n\t\tconst secondaryMonthsNames = this.hasSecondaryCalendarType && localeData.getMonths(\"wide\", this.secondaryCalendarType);\n\t\tconst nonWorkingDayLabel = DayPicker.i18nBundle.getText(DAY_PICKER_NON_WORKING_DAY);\n\t\tconst todayLabel = DayPicker.i18nBundle.getText(DAY_PICKER_TODAY);\n\t\tconst tempDate = this._getFirstDay(); // date that will be changed by 1 day 42 times\n\t\tconst todayDate = CalendarDate.fromLocalJSDate(new Date(), this._primaryCalendarType); // current day date - calculate once\n\t\tconst calendarDate = this._calendarDate; // store the _calendarDate value as this getter is expensive and degrades IE11 perf\n\t\tconst minDate = this._minDate; // store the _minDate (expensive getter)\n\t\tconst maxDate = this._maxDate; // store the _maxDate (expensive getter)\n\n\t\tconst tempSecondDate = this.hasSecondaryCalendarType && this._getSecondaryDay(tempDate);\n\n\t\tlet week = [];\n\t\tfor (let i = 0; i < DAYS_IN_WEEK * 6; i++) { // always show 6 weeks total, 42 days to avoid jumping\n\t\t\tconst timestamp = tempDate.valueOf() / 1000; // no need to round because CalendarDate does it\n\n\t\t\tlet dayOfTheWeek = tempDate.getDay() - firstDayOfWeek;\n\t\t\tif (dayOfTheWeek < 0) {\n\t\t\t\tdayOfTheWeek += DAYS_IN_WEEK;\n\t\t\t}\n\n\t\t\tconst isFocused = tempDate.getMonth() === calendarDate.getMonth() && tempDate.getDate() === calendarDate.getDate();\n\t\t\tconst isSelected = this._isDaySelected(timestamp);\n\t\t\tconst isSelectedBetween = this._isDayInsideSelectionRange(timestamp);\n\t\t\tconst isOtherMonth = tempDate.getMonth() !== calendarDate.getMonth();\n\t\t\tconst isWeekend = this._isWeekend(tempDate);\n\t\t\tconst isDisabled = tempDate.valueOf() < minDate.valueOf() || tempDate.valueOf() > maxDate.valueOf();\n\t\t\tconst isToday = tempDate.isSame(todayDate);\n\t\t\tconst isFirstDayOfWeek = tempDate.getDay() === firstDayOfWeek;\n\n\t\t\tconst nonWorkingAriaLabel = isWeekend ? `${nonWorkingDayLabel} ` : \"\";\n\t\t\tconst todayAriaLabel = isToday ? `${todayLabel} ` : \"\";\n\t\t\tconst ariaLabel = this.hasSecondaryCalendarType\n\t\t\t\t? `${todayAriaLabel}${nonWorkingAriaLabel}${monthsNames[tempDate.getMonth()]} ${tempDate.getDate()}, ${tempDate.getYear()}; ${secondaryMonthsNames[tempSecondDate.getMonth()]} ${tempSecondDate.getDate()}, ${tempSecondDate.getYear()}`\n\t\t\t\t: `${todayAriaLabel}${nonWorkingAriaLabel}${monthsNames[tempDate.getMonth()]} ${tempDate.getDate()}, ${tempDate.getYear()}`;\n\n\t\t\tconst day = {\n\t\t\t\ttimestamp: timestamp.toString(),\n\t\t\t\tfocusRef: isFocused,\n\t\t\t\t_tabIndex: isFocused ? \"0\" : \"-1\",\n\t\t\t\tselected: isSelected,\n\t\t\t\tday: tempDate.getDate(),\n\t\t\t\tsecondDay: this.hasSecondaryCalendarType && tempSecondDate.getDate(),\n\t\t\t\t_isSecondaryCalendarType: this.hasSecondaryCalendarType,\n\t\t\t\tclasses: `ui5-dp-item ui5-dp-wday${dayOfTheWeek}`,\n\t\t\t\tariaLabel,\n\t\t\t\tariaSelected: isSelected ? \"true\" : \"false\",\n\t\t\t\tariaDisabled: isOtherMonth ? \"true\" : undefined,\n\t\t\t\tdisabled: isDisabled,\n\t\t\t};\n\n\t\t\tif (isFirstDayOfWeek) {\n\t\t\t\tday.classes += \" ui5-dp-firstday\";\n\t\t\t}\n\n\t\t\tif (isSelected) {\n\t\t\t\tday.classes += \" ui5-dp-item--selected\";\n\t\t\t}\n\n\t\t\tif (isSelectedBetween) {\n\t\t\t\tday.classes += \" ui5-dp-item--selected-between\";\n\t\t\t}\n\n\t\t\tif (isToday) {\n\t\t\t\tday.classes += \" ui5-dp-item--now\";\n\t\t\t}\n\n\t\t\tif (isOtherMonth) {\n\t\t\t\tday.classes += \" ui5-dp-item--othermonth\";\n\t\t\t}\n\n\t\t\tif (isWeekend) {\n\t\t\t\tday.classes += \" ui5-dp-item--weeekend\";\n\t\t\t}\n\n\t\t\tif (isDisabled) {\n\t\t\t\tday.classes += \" ui5-dp-item--disabled\";\n\t\t\t}\n\n\t\t\tif (this.hasSecondaryCalendarType) {\n\t\t\t\tday.classes += \" ui5-dp-item--withsecondtype\";\n\t\t\t}\n\n\t\t\tweek.push(day);\n\n\t\t\tif (dayOfTheWeek === DAYS_IN_WEEK - 1) { // 0-indexed so 6 is the last day of the week\n\t\t\t\tweek.unshift({\n\t\t\t\t\tweekNum: calculateWeekNumber(getFirstDayOfWeek(), tempDate.toUTCJSDate(), tempDate.getYear(), getLocale(), localeData),\n\t\t\t\t\tisHidden: this.shouldHideWeekNumbers,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (week.length === DAYS_IN_WEEK + 1) { // 7 entries for each day + 1 for the week numbers\n\t\t\t\tthis._weeks.push(week);\n\t\t\t\tweek = [];\n\t\t\t}\n\n\t\t\ttempDate.setDate(tempDate.getDate() + 1);\n\t\t\tif (this.hasSecondaryCalendarType) {\n\t\t\t\ttempSecondDate.setDate(tempSecondDate.getDate() + 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Builds the dayNames object (header of the month)\n\t * @param localeData\n\t * @private\n\t */\n\t_buildDayNames(localeData) {\n\t\tif (this._hidden) {\n\t\t\treturn; // Optimization to not do any work unless the current picker\n\t\t}\n\n\t\tlet dayOfTheWeek;\n\n\t\tconst aDayNamesWide = localeData.getDays(\"wide\", this._primaryCalendarType);\n\t\tconst aDayNamesAbbreviated = localeData.getDays(\"abbreviated\", this._primaryCalendarType);\n\t\tlet dayName;\n\n\t\tthis._dayNames = [];\n\t\tthis._dayNames.push({\n\t\t\tclasses: \"ui5-dp-dayname\",\n\t\t\tname: DayPicker.i18nBundle.getText(DAY_PICKER_WEEK_NUMBER_TEXT),\n\t\t});\n\t\tfor (let i = 0; i < DAYS_IN_WEEK; i++) {\n\t\t\tdayOfTheWeek = i + this._getFirstDayOfWeek();\n\t\t\tif (dayOfTheWeek > DAYS_IN_WEEK - 1) { // 0-indexed so index of 6 is the maximum allowed\n\t\t\t\tdayOfTheWeek -= DAYS_IN_WEEK;\n\t\t\t}\n\t\t\tdayName = {\n\t\t\t\tname: aDayNamesWide[dayOfTheWeek],\n\t\t\t\tultraShortName: aDayNamesAbbreviated[dayOfTheWeek],\n\t\t\t\tclasses: \"ui5-dp-dayname\",\n\t\t\t};\n\n\t\t\tthis._dayNames.push(dayName);\n\t\t}\n\n\t\tthis._dayNames[1].classes += \" ui5-dp-firstday\";\n\n\t\tif (this.shouldHideWeekNumbers) {\n\t\t\tthis._dayNames.shift();\n\t\t}\n\t}\n\n\tonAfterRendering() {\n\t\tif (this._autoFocus && !this._hidden) {\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\t_onfocusin() {\n\t\tthis._autoFocus = true;\n\t}\n\n\t_onfocusout() {\n\t\tthis._autoFocus = false;\n\t}\n\n\t/**\n\t * Tells if the day is selected (dark blue)\n\t * @param timestamp\n\t * @returns {boolean}\n\t * @private\n\t */\n\t_isDaySelected(timestamp) {\n\t\tif (this.selectionMode === CalendarSelectionMode.Single) {\n\t\t\treturn timestamp === this.selectedDates[0];\n\t\t}\n\n\t\t// Multiple, Range\n\t\treturn this.selectedDates.includes(timestamp);\n\t}\n\n\t/**\n\t * Tells if the day is inside a selection range (light blue)\n\t * @param timestamp\n\t * @returns {*}\n\t * @private\n\t */\n\t_isDayInsideSelectionRange(timestamp) {\n\t\t// No selection at all (or not in range selection mode)\n\t\tif (this.selectionMode !== CalendarSelectionMode.Range || !this.selectedDates.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Only one date selected - the user is hovering with the mouse or navigating with the keyboard to select the second one\n\t\tif (this.selectedDates.length === 1 && this._secondTimestamp) {\n\t\t\treturn isBetween(timestamp, this.selectedDates[0], this._secondTimestamp);\n\t\t}\n\n\t\t// Two dates selected - stable range\n\t\treturn isBetween(timestamp, this.selectedDates[0], this.selectedDates[1]);\n\t}\n\n\t/**\n\t * Selects/deselects a day\n\t * @param event\n\t * @param isShift true if the user did Click+Shift or Enter+Shift (but not Space+Shift)\n\t * @private\n\t */\n\t_selectDate(event, isShift) {\n\t\tconst target = event.target;\n\n\t\tif (!this._isDayPressed(target)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst timestamp = this._getTimestampFromDom(target);\n\n\t\tthis._safelySetTimestamp(timestamp);\n\t\tthis._updateSecondTimestamp();\n\n\t\tif (this.selectionMode === CalendarSelectionMode.Single) {\n\t\t\tthis.selectedDates = [timestamp];\n\t\t} else if (this.selectionMode === CalendarSelectionMode.Multiple) {\n\t\t\tif (this.selectedDates.length > 0 && isShift) {\n\t\t\t\tthis._multipleSelection(timestamp);\n\t\t\t} else {\n\t\t\t\tthis._toggleTimestampInSelection(timestamp);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.selectedDates = (this.selectedDates.length === 1) ? [...this.selectedDates, timestamp]\t: [timestamp];\n\t\t}\n\n\t\tthis.fireEvent(\"change\", {\n\t\t\ttimestamp: this.timestamp,\n\t\t\tdates: this.selectedDates,\n\t\t});\n\t}\n\n\t/**\n\t * Selects/deselects the whole row (week)\n\t * @param event\n\t * @private\n\t */\n\t_selectWeek(event) {\n\t\tthis._weeks.forEach(week => {\n\t\t\tconst dayInThisWeek = week.findIndex(item => {\n\t\t\t\tconst date = CalendarDate.fromTimestamp(parseInt(item.timestamp) * 1000);\n\t\t\t\treturn date.getMonth() === this._calendarDate.getMonth() && date.getDate() === this._calendarDate.getDate();\n\t\t\t}) !== -1;\n\t\t\tif (dayInThisWeek) { // The current day is in this week\n\t\t\t\tconst notAllDaysOfThisWeekSelected = week.some(item => item.timestamp && !this.selectedDates.includes(parseInt(item.timestamp)));\n\t\t\t\tif (notAllDaysOfThisWeekSelected) { // even if one day is not selected, select the whole week\n\t\t\t\t\tweek.filter(item => item.timestamp).forEach(item => {\n\t\t\t\t\t\tthis._addTimestampToSelection(parseInt(item.timestamp));\n\t\t\t\t\t});\n\t\t\t\t} else { // only if all days of this week are selected, deselect them\n\t\t\t\t\tweek.filter(item => item.timestamp).forEach(item => {\n\t\t\t\t\t\tthis._removeTimestampFromSelection(parseInt(item.timestamp));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.fireEvent(\"change\", {\n\t\t\ttimestamp: this.timestamp,\n\t\t\tdates: this.selectedDates,\n\t\t});\n\t}\n\n\t_toggleTimestampInSelection(timestamp) {\n\t\tif (this.selectedDates.includes(timestamp)) {\n\t\t\tthis._removeTimestampFromSelection(timestamp);\n\t\t} else {\n\t\t\tthis._addTimestampToSelection(timestamp);\n\t\t}\n\t}\n\n\t_addTimestampToSelection(timestamp) {\n\t\tif (!this.selectedDates.includes(timestamp)) {\n\t\t\tthis.selectedDates = [...this.selectedDates, timestamp];\n\t\t}\n\t}\n\n\t_removeTimestampFromSelection(timestamp) {\n\t\tthis.selectedDates = this.selectedDates.filter(value => value !== timestamp);\n\t}\n\n\t/**\n\t * When at least one day is selected and the user pressed shift\n\t * @param timestamp\n\t * @private\n\t */\n\t_multipleSelection(timestamp) {\n\t\tconst min = Math.min(...this.selectedDates);\n\t\tconst max = Math.max(...this.selectedDates);\n\t\tlet start;\n\t\tlet end;\n\t\tlet toggle = false;\n\n\t\tif (timestamp < min) {\n\t\t\tstart = timestamp;\n\t\t\tend = min;\n\t\t} else if (timestamp >= min && timestamp <= max) { // inside the current range - toggle all between the selected and focused\n\t\t\tconst distanceToMin = Math.abs(timestamp - min);\n\t\t\tconst distanceToMax = Math.abs(timestamp - max);\n\n\t\t\tif (distanceToMin < distanceToMax) {\n\t\t\t\tstart = timestamp;\n\t\t\t\tend = max;\n\t\t\t} else {\n\t\t\t\tstart = min;\n\t\t\t\tend = timestamp;\n\t\t\t}\n\t\t\ttoggle = true;\n\t\t} else {\n\t\t\tstart = max;\n\t\t\tend = timestamp;\n\t\t}\n\n\t\tconst startDate = CalendarDate.fromTimestamp(start * 1000);\n\t\tconst endDate = CalendarDate.fromTimestamp(end * 1000);\n\n\t\twhile (startDate.valueOf() <= endDate.valueOf()) {\n\t\t\tthis[toggle ? \"_toggleTimestampInSelection\" : \"_addTimestampToSelection\"](startDate.valueOf() / 1000);\n\t\t\tstartDate.setDate(startDate.getDate() + 1);\n\t\t}\n\t}\n\n\t/**\n\t * Set the hovered day as the _secondTimestamp\n\t * @param event\n\t * @private\n\t */\n\t_onmouseover(event) {\n\t\tconst hoveredItem = event.target.closest(\".ui5-dp-item\");\n\t\tif (hoveredItem && this.selectionMode === CalendarSelectionMode.Range && this.selectedDates.length === 1) {\n\t\t\tthis._secondTimestamp = this._getTimestampFromDom(hoveredItem);\n\t\t}\n\t}\n\n\t_onkeydown(event) {\n\t\tlet preventDefault = true;\n\n\t\tif (isEnter(event) || isEnterShift(event)) {\n\t\t\tthis._selectDate(event, isEnterShift(event));\n\t\t} else if (isSpace(event) || isSpaceShift(event)) {\n\t\t\tevent.preventDefault();\n\t\t} else if (isLeft(event)) {\n\t\t\tthis._modifyTimestampBy(-1, \"day\");\n\t\t} else if (isRight(event)) {\n\t\t\tthis._modifyTimestampBy(1, \"day\");\n\t\t} else if (isUp(event)) {\n\t\t\tthis._modifyTimestampBy(-7, \"day\");\n\t\t} else if (isDown(event)) {\n\t\t\tthis._modifyTimestampBy(7, \"day\");\n\t\t} else if (isPageUp(event)) {\n\t\t\tthis._modifyTimestampBy(-1, \"month\");\n\t\t} else if (isPageDown(event)) {\n\t\t\tthis._modifyTimestampBy(1, \"month\");\n\t\t} else if (isPageUpShift(event) || isPageUpAlt(event)) {\n\t\t\tthis._modifyTimestampBy(-1, \"year\");\n\t\t} else if (isPageDownShift(event) || isPageDownAlt(event)) {\n\t\t\tthis._modifyTimestampBy(1, \"year\");\n\t\t} else if (isPageUpShiftCtrl(event)) {\n\t\t\tthis._modifyTimestampBy(-10, \"year\");\n\t\t} else if (isPageDownShiftCtrl(event)) {\n\t\t\tthis._modifyTimestampBy(10, \"year\");\n\t\t} else if (isHome(event) || isEnd(event)) {\n\t\t\tthis._onHomeOrEnd(isHome(event));\n\t\t} else if (isHomeCtrl(event)) {\n\t\t\tconst tempDate = new CalendarDate(this._calendarDate, this._primaryCalendarType);\n\t\t\ttempDate.setDate(1); // Set the first day of the month\n\t\t\tthis._setTimestamp(tempDate.valueOf() / 1000);\n\t\t} else if (isEndCtrl(event)) {\n\t\t\tconst tempDate = new CalendarDate(this._calendarDate, this._primaryCalendarType);\n\t\t\ttempDate.setMonth(tempDate.getMonth() + 1);\n\t\t\ttempDate.setDate(0); // Set the last day of the month (0th day of next month)\n\t\t\tthis._setTimestamp(tempDate.valueOf() / 1000);\n\t\t} else {\n\t\t\tpreventDefault = false;\n\t\t}\n\n\t\tif (preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\t_onkeyup(event) {\n\t\t// Even if Space+Shift was pressed, ignore the shift unless in Multiple selection\n\t\tif (isSpace(event) || (isSpaceShift(event) && this.selectionMode !== CalendarSelectionMode.Multiple)) {\n\t\t\tthis._selectDate(event, false);\n\t\t} else if (isSpaceShift(event)) {\n\t\t\tthis._selectWeek(event);\n\t\t}\n\t}\n\n\t/**\n\t * Click is the same as Enter: Click+Shift has the same effect as Enter+Shift\n\t * @param event\n\t * @private\n\t */\n\t_onclick(event) {\n\t\tthis._selectDate(event, event.shiftKey);\n\t}\n\n\t/**\n\t * One Home or End, move the focus to the first or last item in the row\n\t * @param homePressed\n\t * @private\n\t */\n\t_onHomeOrEnd(homePressed) {\n\t\tthis._weeks.forEach(week => {\n\t\t\tconst dayInThisWeek = week.findIndex(item => {\n\t\t\t\tconst date = CalendarDate.fromTimestamp(parseInt(item.timestamp) * 1000);\n\t\t\t\treturn date.getMonth() === this._calendarDate.getMonth() && date.getDate() === this._calendarDate.getDate();\n\t\t\t}) !== -1;\n\t\t\tif (dayInThisWeek) { // The current day is in this week\n\t\t\t\tconst index = homePressed ? 1 : 7; // select the first (if Home) or last (if End) day of the week\n\t\t\t\tthis._setTimestamp(parseInt(week[index].timestamp));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Called from Calendar.js\n\t * @protected\n\t */\n\t_hasPreviousPage() {\n\t\treturn !(this._calendarDate.getMonth() === this._minDate.getMonth() && this._calendarDate.getYear() === this._minDate.getYear());\n\t}\n\n\t/**\n\t * Called from Calendar.js\n\t * @protected\n\t */\n\t_hasNextPage() {\n\t\treturn !(this._calendarDate.getMonth() === this._maxDate.getMonth() && this._calendarDate.getYear() === this._maxDate.getYear());\n\t}\n\n\t/**\n\t * Called from Calendar.js\n\t * Same as PageUp\n\t * @protected\n\t */\n\t_showPreviousPage() {\n\t\tthis._modifyTimestampBy(-1, \"month\");\n\t}\n\n\t/**\n\t * Called from Calendar.js\n\t * Same as PageDown\n\t * @protected\n\t */\n\t_showNextPage() {\n\t\tthis._modifyTimestampBy(1, \"month\");\n\t}\n\n\t/**\n\t * Modifies the timestamp by a certain amount of days/months/years\n\t * @param amount\n\t * @param unit\n\t * @private\n\t */\n\t_modifyTimestampBy(amount, unit) {\n\t\t// Modify the current timestamp\n\t\tthis._safelyModifyTimestampBy(amount, unit);\n\t\tthis._updateSecondTimestamp();\n\n\t\t// Notify the calendar to update its timestamp\n\t\tthis.fireEvent(\"navigate\", { timestamp: this.timestamp });\n\t}\n\n\t/**\n\t * Sets the timestamp to an absolute value\n\t * @param value\n\t * @private\n\t */\n\t_setTimestamp(value) {\n\t\tthis._safelySetTimestamp(value);\n\t\tthis._updateSecondTimestamp();\n\t\tthis.fireEvent(\"navigate\", { timestamp: this.timestamp });\n\t}\n\n\t/**\n\t * During range selection, when the user is navigating with the keyboard, the currently focused day is considered the \"second day\"\n\t * @private\n\t */\n\t_updateSecondTimestamp() {\n\t\tif (this.selectionMode === CalendarSelectionMode.Range && this.selectedDates.length === 1) {\n\t\t\tthis._secondTimestamp = this.timestamp;\n\t\t}\n\t}\n\n\tget shouldHideWeekNumbers() {\n\t\tif (this._primaryCalendarType !== CalendarType.Gregorian) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.hideWeekNumbers;\n\t}\n\n\tget hasSecondaryCalendarType() {\n\t\treturn !!this.secondaryCalendarType;\n\t}\n\n\t_isWeekend(oDate) {\n\t\tconst localeData = getCachedLocaleDataInstance(getLocale());\n\n\t\tconst iWeekDay = oDate.getDay(),\n\t\t\tiWeekendStart = localeData.getWeekendStart(),\n\t\t\tiWeekendEnd = localeData.getWeekendEnd();\n\n\t\treturn (iWeekDay >= iWeekendStart && iWeekDay <= iWeekendEnd)\n\t\t\t|| (iWeekendEnd < iWeekendStart && (iWeekDay >= iWeekendStart || iWeekDay <= iWeekendEnd));\n\t}\n\n\t_isDayPressed(target) {\n\t\tconst targetParent = target.parentNode;\n\t\treturn (target.className.indexOf(\"ui5-dp-item\") > -1) || (targetParent && targetParent.classList && targetParent.classList.contains(\"ui5-dp-item\"));\n\t}\n\n\t_getSecondaryDay(tempDate) {\n\t\treturn new CalendarDate(tempDate, this.secondaryCalendarType);\n\t}\n\n\t_getFirstDay() {\n\t\tlet daysFromPreviousMonth;\n\n\t\tconst firstDayOfWeek = this._getFirstDayOfWeek();\n\n\t\t// determine weekday of first day in month\n\t\tconst firstDay = new CalendarDate(this._calendarDate, this._primaryCalendarType);\n\t\tfirstDay.setDate(1);\n\t\tdaysFromPreviousMonth = firstDay.getDay() - firstDayOfWeek;\n\t\tif (daysFromPreviousMonth < 0) {\n\t\t\tdaysFromPreviousMonth = 7 + daysFromPreviousMonth;\n\t\t}\n\n\t\tif (daysFromPreviousMonth > 0) {\n\t\t\tfirstDay.setDate(1 - daysFromPreviousMonth);\n\t\t}\n\n\t\treturn firstDay;\n\t}\n\n\t_getFirstDayOfWeek() {\n\t\tconst localeData = getCachedLocaleDataInstance(getLocale());\n\t\tconst confFirstDayOfWeek = getFirstDayOfWeek();\n\t\treturn Number.isInteger(confFirstDayOfWeek) ? confFirstDayOfWeek : localeData.getFirstDayOfWeek();\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\twrapper: {\n\t\t\t\tdisplay: this._hidden ? \"none\" : \"flex\",\n\t\t\t\t\"justify-content\": \"center\",\n\t\t\t},\n\t\t\tmain: {\n\t\t\t\twidth: \"100%\",\n\t\t\t},\n\t\t};\n\t}\n\n\tget ariaRoledescription() {\n\t\treturn this.hasSecondaryCalendarType\n\t\t\t? `${this._primaryCalendarType} calendar with secondary ${this.secondaryCalendarType} calendar`\n\t\t\t: `${this._primaryCalendarType} calendar`;\n\t}\n}\n\nDayPicker.define();\n\nexport default DayPicker;\n"]},"metadata":{},"sourceType":"module"}