{"ast":null,"code":"import _extends from '@babel/runtime/helpers/extends';\nimport _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport { isPhone } from '@ui5/webcomponents-base/dist/Device';\nimport { addCustomCSS } from '@ui5/webcomponents-base/dist/Theming';\nimport { useI18nBundle } from '@ui5/webcomponents-react-base/dist/hooks';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/dist/StyleClassHelper';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/dist/ThemingParameters';\nimport { useConsolidatedRef } from '@ui5/webcomponents-react-base/dist/useConsolidatedRef';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/dist/usePassThroughHtmlProps';\nimport { AVAILABLE_ACTIONS, CANCEL, X_OF_Y } from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { Button } from '@ui5/webcomponents-react/dist/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/dist/ButtonDesign';\nimport { ResponsivePopover } from '@ui5/webcomponents-react/dist/ResponsivePopover';\nimport React, { forwardRef, useRef, useReducer, Children, useCallback, cloneElement } from 'react';\nimport { createPortal } from 'react-dom';\nimport { createUseStyles } from 'react-jss';\nvar styles = {\n  /*\n   *  is being applied to the encapsulating ul element\n   */\n  actionSheet: {\n    margin: 0,\n    padding: '0.1875rem 0.375rem',\n    '& ui5-button': {\n      display: 'block'\n    }\n  },\n  contentMobile: {\n    backgroundColor: ThemingParameters.sapGroup_ContentBackground,\n    padding: '0.25rem 0.5rem',\n    boxSizing: 'border-box',\n    overflow: 'auto',\n    maxHeight: '82vh',\n    borderTopLeftRadius: ThemingParameters.sapElement_BorderCornerRadius,\n    borderTopRightRadius: ThemingParameters.sapElement_BorderCornerRadius,\n    boxShadow: ThemingParameters.sapContent_Shadow2,\n    '& > *': {\n      margin: '0.25rem 0'\n    }\n  }\n};\nvar styles$1 = styles;\nvar useStyles = createUseStyles(styles$1, {\n  name: 'ActionSheet'\n});\naddCustomCSS('ui5-button', \"\\n  :host([data-action-btn-index]:not([design=\\\"Negative\\\"])) .ui5-button-root {\\n    justify-content: flex-start;\\n  }\\n  \");\n\nif (isPhone()) {\n  addCustomCSS('ui5-responsive-popover', \"\\n  :host([data-actionsheet]) ui5-button {\\n    display: none;\\n  }\\n  :host([data-actionsheet]) ui5-dialog {\\n    top: auto !important;\\n    bottom: 0;\\n    height: auto;\\n    border-radius: 0;\\n    background-color: transparent;\\n    box-shadow: none;\\n    box-sizing: border-box;\\n    min-height: unset;\\n  }\\n  :host([data-actionsheet]) ui5-title {\\n    color: \".concat(ThemingParameters.sapContent_ContrastTextColor, \" !important;\\n    text-shadow: none;\\n    text-align: start !important;\\n    padding-left:1rem !important;\\n  }\\n  \"));\n}\n/**\n * The `ActionSheet` holds a list of buttons from which the user can select to complete an action. <br />\n * The children of the action sheet should be `Button` components. Elements in the `ActionSheet` are left-aligned. Actions should be arranged in order of importance, from top to bottom.\n */\n\n\nvar ActionSheet = /*#__PURE__*/forwardRef(function (props, ref) {\n  var children = props.children,\n      style = props.style,\n      slot = props.slot,\n      className = props.className,\n      allowTargetOverlap = props.allowTargetOverlap,\n      headerText = props.headerText,\n      horizontalAlign = props.horizontalAlign,\n      initialFocus = props.initialFocus,\n      modal = props.modal,\n      hideArrow = props.hideArrow,\n      placementType = props.placementType,\n      verticalAlign = props.verticalAlign,\n      footer = props.footer,\n      header = props.header,\n      onAfterClose = props.onAfterClose,\n      onAfterOpen = props.onAfterOpen,\n      onBeforeClose = props.onBeforeClose,\n      onBeforeOpen = props.onBeforeOpen,\n      showCancelButton = props.showCancelButton,\n      alwaysShowHeader = props.alwaysShowHeader;\n  var i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  var classes = useStyles();\n  var actionSheetClasses = StyleClassHelper.of(classes.actionSheet).putIfPresent(className);\n  var popoverRef = useConsolidatedRef(ref);\n  var actionBtnsRef = useRef(null);\n\n  var _useReducer = useReducer(function (_, action) {\n    return parseInt(action.target.dataset.actionBtnIndex);\n  }, 0),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      focusedItem = _useReducer2[0],\n      setFocusedItem = _useReducer2[1];\n\n  var childrenToRender = Children.toArray(children).filter(Boolean);\n  var childrenArrayLength = childrenToRender.length;\n  var childrenLength = isPhone() && showCancelButton ? childrenArrayLength + 1 : childrenArrayLength;\n\n  var handleCancelBtnClick = function handleCancelBtnClick() {\n    popoverRef.current.close();\n  };\n\n  var onActionButtonClicked = function onActionButtonClicked(handler) {\n    return function (e) {\n      popoverRef.current.close();\n\n      if (typeof handler === 'function') {\n        handler(e);\n      }\n    };\n  };\n\n  var handleKeyDown = useCallback(function (e) {\n    var currentIndex = parseInt(e.target.dataset.actionBtnIndex);\n\n    if (e.key === 'ArrowDown' && currentIndex + 1 < childrenLength) {\n      actionBtnsRef.current.querySelector(\"[data-action-btn-index=\\\"\".concat(currentIndex + 1, \"\\\"]\")).focus();\n    }\n\n    if (e.key === 'ArrowUp' && currentIndex > 0) {\n      actionBtnsRef.current.querySelector(\"[data-action-btn-index=\\\"\".concat(currentIndex - 1, \"\\\"]\")).focus();\n    }\n  }, [childrenLength, actionBtnsRef.current]);\n\n  var renderActionSheetButton = function renderActionSheetButton(element, index, childrenArray) {\n    var _element$props, _element$props2;\n\n    return /*#__PURE__*/cloneElement(element, {\n      role: 'button',\n      key: index,\n      design: ButtonDesign.Transparent,\n      onClick: onActionButtonClicked((_element$props = element.props) === null || _element$props === void 0 ? void 0 : _element$props.onClick),\n      'data-action-btn-index': index,\n      'aria-label': \"\".concat(i18nBundle.getText(X_OF_Y, index + 1, childrenArray.length), \" \").concat((_element$props2 = element.props) === null || _element$props2 === void 0 ? void 0 : _element$props2.children),\n      tabIndex: focusedItem === index ? 0 : -1,\n      onFocus: setFocusedItem\n    });\n  };\n\n  var passThroughProps = usePassThroughHtmlProps(props, ['onAfterClose', 'onAfterOpen', 'onBeforeClose', 'onBeforeOpen']);\n  var handleAfterOpen = useCallback(function (e) {\n    if (isPhone()) {\n      actionBtnsRef.current.querySelector(\"[data-action-btn-index=\\\"\".concat(focusedItem, \"\\\"]\")).focus();\n    }\n\n    if (typeof onAfterOpen === 'function') {\n      onAfterOpen(e);\n    }\n  }, [onAfterOpen, actionBtnsRef.current, focusedItem]);\n  var displayHeader = alwaysShowHeader || isPhone();\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(ResponsivePopover, _extends({\n    \"aria-modal\": true,\n    role: \"dialog\",\n    style: style,\n    slot: slot,\n    allowTargetOverlap: allowTargetOverlap,\n    headerText: displayHeader ? headerText : undefined,\n    horizontalAlign: horizontalAlign,\n    initialFocus: initialFocus,\n    modal: modal,\n    hideArrow: hideArrow,\n    placementType: placementType,\n    verticalAlign: verticalAlign,\n    footer: footer,\n    header: displayHeader ? header : undefined,\n    onAfterClose: onAfterClose,\n    onBeforeClose: onBeforeClose,\n    onBeforeOpen: onBeforeOpen\n  }, passThroughProps, {\n    onAfterOpen: handleAfterOpen,\n    ref: popoverRef,\n    className: actionSheetClasses.className,\n    \"data-actionsheet\": true\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: isPhone() ? classes.contentMobile : undefined,\n    role: \"presentation\",\n    \"aria-label\": i18nBundle.getText(AVAILABLE_ACTIONS),\n    onKeyDown: handleKeyDown,\n    ref: actionBtnsRef\n  }, childrenToRender.map(renderActionSheetButton), isPhone() && showCancelButton && /*#__PURE__*/React.createElement(Button, {\n    design: ButtonDesign.Negative,\n    onClick: handleCancelBtnClick,\n    tabIndex: focusedItem === childrenLength - 1 ? 0 : -1,\n    \"data-action-btn-index\": childrenLength - 1,\n    onFocus: setFocusedItem\n  }, i18nBundle.getText(CANCEL)))), document.body);\n});\nActionSheet.defaultProps = {\n  showCancelButton: true,\n  alwaysShowHeader: true\n};\nActionSheet.displayName = 'ActionSheet';\nexport { ActionSheet };","map":{"version":3,"sources":["../src/components/ActionSheet/ActionSheet.jss.ts","../src/components/ActionSheet/index.tsx"],"names":["styles","actionSheet","margin","padding","display","contentMobile","backgroundColor","ThemingParameters","boxSizing","overflow","maxHeight","borderTopLeftRadius","borderTopRightRadius","boxShadow","useStyles","createUseStyles","name","addCustomCSS","isPhone","ActionSheet","forwardRef","children","style","slot","className","allowTargetOverlap","headerText","horizontalAlign","initialFocus","modal","hideArrow","placementType","verticalAlign","footer","header","onAfterClose","onAfterOpen","onBeforeClose","onBeforeOpen","showCancelButton","alwaysShowHeader","props","i18nBundle","useI18nBundle","classes","actionSheetClasses","StyleClassHelper","popoverRef","useConsolidatedRef","actionBtnsRef","useRef","focusedItem","setFocusedItem","useReducer","parseInt","action","childrenToRender","Children","childrenArrayLength","childrenLength","handleCancelBtnClick","onActionButtonClicked","handler","handleKeyDown","useCallback","currentIndex","e","renderActionSheetButton","cloneElement","role","key","design","ButtonDesign","onClick","element","index","childrenArray","tabIndex","onFocus","passThroughProps","usePassThroughHtmlProps","handleAfterOpen","displayHeader","createPortal","document"],"mappings":"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","sourcesContent":["import { ThemingParameters } from '@ui5/webcomponents-react-base/dist/ThemingParameters';\n\nconst styles = {\n  /*\n   *  is being applied to the encapsulating ul element\n   */\n  actionSheet: {\n    margin: 0,\n    padding: '0.1875rem 0.375rem',\n    '& ui5-button': {\n      display: 'block'\n    }\n  },\n  contentMobile: {\n    backgroundColor: ThemingParameters.sapGroup_ContentBackground,\n    padding: '0.25rem 0.5rem',\n    boxSizing: 'border-box',\n    overflow: 'auto',\n    maxHeight: '82vh',\n    borderTopLeftRadius: ThemingParameters.sapElement_BorderCornerRadius,\n    borderTopRightRadius: ThemingParameters.sapElement_BorderCornerRadius,\n    boxShadow: ThemingParameters.sapContent_Shadow2,\n    '& > *': {\n      margin: '0.25rem 0'\n    }\n  }\n};\n\nexport default styles;\n","import { isPhone } from '@ui5/webcomponents-base/dist/Device';\nimport { addCustomCSS } from '@ui5/webcomponents-base/dist/Theming';\nimport { useI18nBundle } from '@ui5/webcomponents-react-base/dist/hooks';\nimport { StyleClassHelper } from '@ui5/webcomponents-react-base/dist/StyleClassHelper';\nimport { ThemingParameters } from '@ui5/webcomponents-react-base/dist/ThemingParameters';\nimport { useConsolidatedRef } from '@ui5/webcomponents-react-base/dist/useConsolidatedRef';\nimport { usePassThroughHtmlProps } from '@ui5/webcomponents-react-base/dist/usePassThroughHtmlProps';\nimport { AVAILABLE_ACTIONS, CANCEL, X_OF_Y } from '@ui5/webcomponents-react/dist/assets/i18n/i18n-defaults';\nimport { Button } from '@ui5/webcomponents-react/dist/Button';\nimport { ButtonDesign } from '@ui5/webcomponents-react/dist/ButtonDesign';\nimport { ResponsivePopover } from '@ui5/webcomponents-react/dist/ResponsivePopover';\nimport React, {\n  Children,\n  cloneElement,\n  forwardRef,\n  ReactElement,\n  RefObject,\n  useCallback,\n  useReducer,\n  useRef\n} from 'react';\nimport { createPortal } from 'react-dom';\nimport { createUseStyles } from 'react-jss';\nimport { Ui5ResponsivePopoverDomRef } from '@ui5/webcomponents-react/interfaces/Ui5ResponsivePopoverDomRef';\nimport { ButtonPropTypes } from '../../webComponents/Button';\nimport { ResponsivePopoverPropTypes } from '../../webComponents/ResponsivePopover';\nimport styles from './ActionSheet.jss';\n\nexport interface ActionSheetPropTypes extends Omit<ResponsivePopoverPropTypes, 'children'> {\n  /**\n   * Defines the actions of the <code>ActionSheet</code>. <br><b>Note:</b> Although this slot accepts all HTML Elements, it is strongly recommended that you only use `Buttons` in order to preserve the intended design.\n   */\n  children?: ReactElement<ButtonPropTypes> | ReactElement<ButtonPropTypes>[];\n  /**\n   * Displays a cancel button below the action buttons on mobile devices. No cancel button will be shown on desktop and tablet devices.\n   */\n  showCancelButton?: boolean;\n  /**\n   * Defines whether the `header` or `headerText` should always be displayed or only on mobile devices.\n   */\n  alwaysShowHeader?: boolean;\n}\n\nconst useStyles = createUseStyles(styles, { name: 'ActionSheet' });\n\naddCustomCSS(\n  'ui5-button',\n  `\n  :host([data-action-btn-index]:not([design=\"Negative\"])) .ui5-button-root {\n    justify-content: flex-start;\n  }\n  `\n);\n\nif (isPhone()) {\n  addCustomCSS(\n    'ui5-responsive-popover',\n    `\n  :host([data-actionsheet]) ui5-button {\n    display: none;\n  }\n  :host([data-actionsheet]) ui5-dialog {\n    top: auto !important;\n    bottom: 0;\n    height: auto;\n    border-radius: 0;\n    background-color: transparent;\n    box-shadow: none;\n    box-sizing: border-box;\n    min-height: unset;\n  }\n  :host([data-actionsheet]) ui5-title {\n    color: ${ThemingParameters.sapContent_ContrastTextColor} !important;\n    text-shadow: none;\n    text-align: start !important;\n    padding-left:1rem !important;\n  }\n  `\n  );\n}\n\n/**\n * The `ActionSheet` holds a list of buttons from which the user can select to complete an action. <br />\n * The children of the action sheet should be `Button` components. Elements in the `ActionSheet` are left-aligned. Actions should be arranged in order of importance, from top to bottom.\n */\nconst ActionSheet = forwardRef((props: ActionSheetPropTypes, ref: RefObject<Ui5ResponsivePopoverDomRef>) => {\n  const {\n    children,\n    style,\n    slot,\n    className,\n    allowTargetOverlap,\n    headerText,\n    horizontalAlign,\n    initialFocus,\n    modal,\n    hideArrow,\n    placementType,\n    verticalAlign,\n    footer,\n    header,\n    onAfterClose,\n    onAfterOpen,\n    onBeforeClose,\n    onBeforeOpen,\n    showCancelButton,\n    alwaysShowHeader\n  } = props;\n  const i18nBundle = useI18nBundle('@ui5/webcomponents-react');\n  const classes = useStyles();\n  const actionSheetClasses = StyleClassHelper.of(classes.actionSheet).putIfPresent(className);\n  const popoverRef: RefObject<Ui5ResponsivePopoverDomRef> = useConsolidatedRef(ref);\n  const actionBtnsRef = useRef(null);\n  const [focusedItem, setFocusedItem] = useReducer((_, action) => {\n    return parseInt(action.target.dataset.actionBtnIndex);\n  }, 0);\n  const childrenToRender = Children.toArray(children).filter(Boolean);\n  const childrenArrayLength = childrenToRender.length;\n  const childrenLength = isPhone() && showCancelButton ? childrenArrayLength + 1 : childrenArrayLength;\n\n  const handleCancelBtnClick = () => {\n    popoverRef.current.close();\n  };\n\n  const onActionButtonClicked = (handler) => (e) => {\n    popoverRef.current.close();\n    if (typeof handler === 'function') {\n      handler(e);\n    }\n  };\n\n  const handleKeyDown = useCallback(\n    (e) => {\n      const currentIndex = parseInt(e.target.dataset.actionBtnIndex);\n      if (e.key === 'ArrowDown' && currentIndex + 1 < childrenLength) {\n        actionBtnsRef.current.querySelector(`[data-action-btn-index=\"${currentIndex + 1}\"]`).focus();\n      }\n      if (e.key === 'ArrowUp' && currentIndex > 0) {\n        actionBtnsRef.current.querySelector(`[data-action-btn-index=\"${currentIndex - 1}\"]`).focus();\n      }\n    },\n    [childrenLength, actionBtnsRef.current]\n  );\n\n  const renderActionSheetButton = (element, index: number, childrenArray) => {\n    return cloneElement(element, {\n      role: 'button',\n      key: index,\n      design: ButtonDesign.Transparent,\n      onClick: onActionButtonClicked(element.props?.onClick),\n      'data-action-btn-index': index,\n      'aria-label': `${i18nBundle.getText(X_OF_Y, index + 1, childrenArray.length)} ${element.props?.children}`,\n      tabIndex: focusedItem === index ? 0 : -1,\n      onFocus: setFocusedItem\n    });\n  };\n\n  const passThroughProps = usePassThroughHtmlProps(props, [\n    'onAfterClose',\n    'onAfterOpen',\n    'onBeforeClose',\n    'onBeforeOpen'\n  ]);\n  const handleAfterOpen = useCallback(\n    (e) => {\n      if (isPhone()) {\n        actionBtnsRef.current.querySelector(`[data-action-btn-index=\"${focusedItem}\"]`).focus();\n      }\n      if (typeof onAfterOpen === 'function') {\n        onAfterOpen(e);\n      }\n    },\n    [onAfterOpen, actionBtnsRef.current, focusedItem]\n  );\n  const displayHeader = alwaysShowHeader || isPhone();\n\n  return createPortal(\n    <ResponsivePopover\n      aria-modal\n      role=\"dialog\"\n      style={style}\n      slot={slot}\n      allowTargetOverlap={allowTargetOverlap}\n      headerText={displayHeader ? headerText : undefined}\n      horizontalAlign={horizontalAlign}\n      initialFocus={initialFocus}\n      modal={modal}\n      hideArrow={hideArrow}\n      placementType={placementType}\n      verticalAlign={verticalAlign}\n      footer={footer}\n      header={displayHeader ? header : undefined}\n      onAfterClose={onAfterClose}\n      onBeforeClose={onBeforeClose}\n      onBeforeOpen={onBeforeOpen}\n      {...passThroughProps}\n      onAfterOpen={handleAfterOpen}\n      ref={popoverRef}\n      className={actionSheetClasses.className}\n      data-actionsheet\n    >\n      <div\n        className={isPhone() ? classes.contentMobile : undefined}\n        role=\"presentation\"\n        aria-label={i18nBundle.getText(AVAILABLE_ACTIONS)}\n        onKeyDown={handleKeyDown}\n        ref={actionBtnsRef}\n      >\n        {childrenToRender.map(renderActionSheetButton)}\n        {isPhone() && showCancelButton && (\n          <Button\n            design={ButtonDesign.Negative}\n            onClick={handleCancelBtnClick}\n            tabIndex={focusedItem === childrenLength - 1 ? 0 : -1}\n            data-action-btn-index={childrenLength - 1}\n            onFocus={setFocusedItem}\n          >\n            {i18nBundle.getText(CANCEL)}\n          </Button>\n        )}\n      </div>\n    </ResponsivePopover>,\n    document.body\n  );\n});\n\nActionSheet.defaultProps = {\n  showCancelButton: true,\n  alwaysShowHeader: true\n};\n\nActionSheet.displayName = 'ActionSheet';\n\nexport { ActionSheet };\n"]},"metadata":{},"sourceType":"module"}