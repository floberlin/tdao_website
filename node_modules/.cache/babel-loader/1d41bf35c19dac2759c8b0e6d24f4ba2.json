{"ast":null,"code":"import _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _objectSpread from '@babel/runtime/helpers/objectSpread2';\nimport { CheckBox } from '@ui5/webcomponents-react/dist/CheckBox';\nimport { TableSelectionMode } from '@ui5/webcomponents-react/dist/TableSelectionMode';\nimport React from 'react';\nvar reOpenBracket = /\\[/g;\nvar reCloseBracket = /\\]/g;\n\nfunction makePathArray(obj) {\n  return flattenDeep(obj) // remove all periods in parts\n  .map(function (d) {\n    return String(d).replace('.', '_');\n  }) // join parts using period\n  .join('.') // replace brackets with periods\n  .replace(reOpenBracket, '.').replace(reCloseBracket, '') // split it back out on periods\n  .split('.');\n}\n\nfunction flattenDeep(arr) {\n  var newArr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (!Array.isArray(arr)) {\n    newArr.push(arr);\n  } else {\n    for (var i = 0; i < arr.length; i += 1) {\n      flattenDeep(arr[i], newArr);\n    }\n  }\n\n  return newArr;\n} // copied from https://github.com/tannerlinsley/react-table/blob/master/src/utils.js#L169-L191 (13.Jan 2021)\n\n\nvar pathObjCache = new Map();\n\nfunction getBy(obj, path, def) {\n  if (!path) {\n    return obj;\n  }\n\n  var cacheKey = typeof path === 'function' ? path : JSON.stringify(path);\n\n  var pathObj = pathObjCache.get(cacheKey) || function () {\n    var pathObj = makePathArray(path);\n    pathObjCache.set(cacheKey, pathObj);\n    return pathObj;\n  }();\n\n  var val;\n\n  try {\n    val = pathObj.reduce(function (cursor, pathPart) {\n      return cursor[pathPart];\n    }, obj);\n  } catch (e) {// continue regardless of error\n  }\n\n  return typeof val !== 'undefined' ? val : def;\n}\n\nvar customCheckBoxStyling = {\n  verticalAlign: 'middle'\n};\n\nvar headerProps = function headerProps(props, _ref) {\n  var selectionMode = _ref.instance.webComponentsReactProperties.selectionMode;\n\n  if (props.key === 'header___ui5wcr__internal_selection_column' && selectionMode === TableSelectionMode.MULTI_SELECT) {\n    return [props, {\n      onClick: undefined,\n      onKeyDown: undefined\n    }];\n  }\n\n  return props;\n};\n\nvar columns = function columns(_columns) {\n  return _columns.map(function (column) {\n    if (column.id === '__ui5wcr__internal_selection_column') {\n      return _objectSpread(_objectSpread({}, column), {}, {\n        Cell: function Cell(instance) {\n          var webComponentsReactProperties = instance.webComponentsReactProperties,\n              row = instance.row;\n\n          if (row.disableSelect === true) {\n            if (row.isGrouped && webComponentsReactProperties.selectionMode === TableSelectionMode.SINGLE_SELECT) {\n              return null;\n            }\n\n            if (webComponentsReactProperties.selectionMode === TableSelectionMode.SINGLE_SELECT) {\n              return /*#__PURE__*/React.createElement(\"div\", {\n                onClick: undefined,\n                \"data-name\": \"internal_selection_column\"\n              });\n            }\n\n            return /*#__PURE__*/React.createElement(CheckBox, _extends({}, row.getToggleRowSelectedProps(), {\n              disabled: true,\n              style: customCheckBoxStyling,\n              \"data-name\": \"internal_selection_column\",\n              tabIndex: -1\n            }));\n          }\n\n          return column.Cell(instance);\n        },\n        Header: function Header() {\n          return null;\n        }\n      });\n    }\n\n    return column;\n  });\n};\n/**\n * A plugin hook for disabling row selection of specific rows.\n * __Note:__ The \"Select All\" checkbox is not available with this hook.\n *\n * @param disableRowSelection - Can be either a `string` or a `function`. `string:` Defines the key in the dataset for disabling rows. If the value of the key is `true`, then the row will not be selectable. `function:` Programmatically disable rows for selection. The function receives the current row as parameter.\n */\n\n\nvar useRowDisableSelection = function useRowDisableSelection(disableRowSelection) {\n  var disableRowAccessor = typeof disableRowSelection === 'function' ? disableRowSelection : function (d) {\n    return getBy(d.original, disableRowSelection, undefined);\n  };\n\n  var getRowProps = function getRowProps(rowProps, _ref2) {\n    var row = _ref2.row,\n        instance = _ref2.instance;\n    var webComponentsReactProperties = instance.webComponentsReactProperties;\n\n    if (disableRowAccessor(row) === true) {\n      row.disableSelect = true;\n      return _objectSpread(_objectSpread({}, rowProps), {}, {\n        onClick: undefined,\n        className: webComponentsReactProperties.classes.tr\n      });\n    }\n\n    return rowProps;\n  };\n\n  var columnDeps = function columnDeps(deps) {\n    return [].concat(_toConsumableArray(deps), [disableRowSelection]);\n  };\n\n  var useDisableSelectionRow = function useDisableSelectionRow(hooks) {\n    hooks.getHeaderProps.push(headerProps);\n    hooks.getRowProps.push(getRowProps);\n    hooks.columns.push(columns);\n    hooks.columnsDeps.push(columnDeps);\n  };\n\n  useDisableSelectionRow.pluginName = 'useRowDisableSelection';\n  return useDisableSelectionRow;\n};\n\nexport { useRowDisableSelection };","map":{"version":3,"sources":["../src/components/AnalyticalTable/util/index.ts","../src/components/AnalyticalTable/pluginHooks/useRowDisableSelection.tsx"],"names":["reOpenBracket","reCloseBracket","String","newArr","Array","i","arr","flattenDeep","pathObjCache","cacheKey","JSON","pathObj","makePathArray","val","cursor","customCheckBoxStyling","verticalAlign","headerProps","instance","webComponentsReactProperties","selectionMode","props","TableSelectionMode","onClick","onKeyDown","undefined","columns","column","Cell","row","Header","useRowDisableSelection","disableRowAccessor","getBy","d","getRowProps","className","tr","columnDeps","useDisableSelectionRow","hooks"],"mappings":"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","sourcesContent":["import { defaultOrderByFn } from 'react-table';\n\nexport const orderByFn = (rows, functions, directions) => {\n  const wrapSortFn = (sortFn, index) => {\n    const desc = directions[index] === false || directions[index] === 'desc';\n\n    return (rowA, rowB) => {\n      if (rowA.original?.emptyRow && !rowB.original?.emptyRow) {\n        return desc ? -1 : 1;\n      }\n      if (!rowA.original?.emptyRow && rowB.original?.emptyRow) {\n        return desc ? 1 : -1;\n      }\n      if (rowA.original?.emptyRow && rowB.original?.emptyRow) {\n        return 0;\n      }\n      return sortFn(rowA, rowB);\n    };\n  };\n\n  const wrappedSortfunctions = functions.map(wrapSortFn);\n\n  return defaultOrderByFn(rows, wrappedSortfunctions, directions);\n};\n\n// copied from https://github.com/tannerlinsley/react-table/blob/f97fb98509d0b27cc0bebcf3137872afe4f2809e/src/utils.js#L320-L347 (13. Jan 2021)\nconst reOpenBracket = /\\[/g;\nconst reCloseBracket = /\\]/g;\n\nfunction makePathArray(obj) {\n  return (\n    flattenDeep(obj)\n      // remove all periods in parts\n      .map((d) => String(d).replace('.', '_'))\n      // join parts using period\n      .join('.')\n      // replace brackets with periods\n      .replace(reOpenBracket, '.')\n      .replace(reCloseBracket, '')\n      // split it back out on periods\n      .split('.')\n  );\n}\n\nfunction flattenDeep(arr, newArr = []) {\n  if (!Array.isArray(arr)) {\n    newArr.push(arr);\n  } else {\n    for (let i = 0; i < arr.length; i += 1) {\n      flattenDeep(arr[i], newArr);\n    }\n  }\n  return newArr;\n}\n\n// copied from https://github.com/tannerlinsley/react-table/blob/master/src/utils.js#L169-L191 (13.Jan 2021)\nconst pathObjCache = new Map();\n\nexport function getBy(obj, path, def) {\n  if (!path) {\n    return obj;\n  }\n  const cacheKey = typeof path === 'function' ? path : JSON.stringify(path);\n\n  const pathObj =\n    pathObjCache.get(cacheKey) ||\n    (() => {\n      const pathObj = makePathArray(path);\n      pathObjCache.set(cacheKey, pathObj);\n      return pathObj;\n    })();\n  let val;\n\n  try {\n    val = pathObj.reduce((cursor, pathPart) => {\n      return cursor[pathPart];\n    }, obj);\n  } catch (e) {\n    // continue regardless of error\n  }\n  return typeof val !== 'undefined' ? val : def;\n}\n","import { CheckBox } from '@ui5/webcomponents-react/dist/CheckBox';\nimport { TableSelectionMode } from '@ui5/webcomponents-react/dist/TableSelectionMode';\nimport React from 'react';\nimport { getBy } from '../util';\n\ntype DisableRowSelectionType = string | ((row: Record<any, any>) => boolean);\n\nconst customCheckBoxStyling = {\n  verticalAlign: 'middle'\n};\n\nconst headerProps = (\n  props,\n  {\n    instance: {\n      webComponentsReactProperties: { selectionMode }\n    }\n  }\n) => {\n  if (props.key === 'header___ui5wcr__internal_selection_column' && selectionMode === TableSelectionMode.MULTI_SELECT) {\n    return [props, { onClick: undefined, onKeyDown: undefined }];\n  }\n  return props;\n};\n\nconst columns = (columns) => {\n  return columns.map((column) => {\n    if (column.id === '__ui5wcr__internal_selection_column') {\n      return {\n        ...column,\n        Cell: (instance) => {\n          const { webComponentsReactProperties, row } = instance;\n          if (row.disableSelect === true) {\n            if (row.isGrouped && webComponentsReactProperties.selectionMode === TableSelectionMode.SINGLE_SELECT) {\n              return null;\n            }\n            if (webComponentsReactProperties.selectionMode === TableSelectionMode.SINGLE_SELECT) {\n              return <div onClick={undefined} data-name=\"internal_selection_column\" />;\n            }\n            return (\n              <CheckBox\n                {...row.getToggleRowSelectedProps()}\n                disabled\n                style={customCheckBoxStyling}\n                data-name=\"internal_selection_column\"\n                tabIndex={-1}\n              />\n            );\n          }\n          return column.Cell(instance);\n        },\n        Header: () => null\n      };\n    }\n    return column;\n  });\n};\n\n/**\n * A plugin hook for disabling row selection of specific rows.\n * __Note:__ The \"Select All\" checkbox is not available with this hook.\n *\n * @param disableRowSelection - Can be either a `string` or a `function`. `string:` Defines the key in the dataset for disabling rows. If the value of the key is `true`, then the row will not be selectable. `function:` Programmatically disable rows for selection. The function receives the current row as parameter.\n */\nexport const useRowDisableSelection = (disableRowSelection: DisableRowSelectionType) => {\n  const disableRowAccessor =\n    typeof disableRowSelection === 'function'\n      ? disableRowSelection\n      : (d) => getBy(d.original, disableRowSelection, undefined);\n  const getRowProps = (rowProps, { row, instance }) => {\n    const { webComponentsReactProperties } = instance;\n    if (disableRowAccessor(row) === true) {\n      row.disableSelect = true;\n      return { ...rowProps, onClick: undefined, className: webComponentsReactProperties.classes.tr };\n    }\n    return rowProps;\n  };\n\n  const columnDeps = (deps) => {\n    return [...deps, disableRowSelection];\n  };\n\n  const useDisableSelectionRow = (hooks) => {\n    hooks.getHeaderProps.push(headerProps);\n    hooks.getRowProps.push(getRowProps);\n    hooks.columns.push(columns);\n    hooks.columnsDeps.push(columnDeps);\n  };\n\n  useDisableSelectionRow.pluginName = 'useRowDisableSelection';\n\n  return useDisableSelectionRow;\n};\n"]},"metadata":{},"sourceType":"module"}