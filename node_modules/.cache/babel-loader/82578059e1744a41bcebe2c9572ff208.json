{"ast":null,"code":"import _classCallCheck from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport DateFormat from \"@ui5/webcomponents-localization/dist/DateFormat.js\";\nimport { isEnter, isSpace, isDown, isUp, isLeft, isRight, isHome, isEnd, isHomeCtrl, isEndCtrl, isPageUp, isPageDown } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport getLocale from \"@ui5/webcomponents-base/dist/locale/getLocale.js\";\nimport CalendarDate from \"@ui5/webcomponents-localization/dist/dates/CalendarDate.js\";\nimport { getMaxCalendarDate } from \"@ui5/webcomponents-localization/dist/dates/ExtremeDates.js\";\nimport CalendarPart from \"./CalendarPart.js\";\nimport YearPickerTemplate from \"./generated/templates/YearPickerTemplate.lit.js\";\nimport styles from \"./generated/themes/YearPicker.css.js\";\n/**\n * @public\n */\n\nvar metadata = {\n  tag: \"ui5-yearpicker\",\n  properties:\n  /** @lends  sap.ui.webcomponents.main.YearPicker.prototype */\n  {\n    /**\n     * An array of UTC timestamps representing the selected date or dates depending on the capabilities of the picker component.\n     * @type {Array}\n     * @public\n     */\n    selectedDates: {\n      type: Integer,\n      multiple: true,\n      compareValues: true\n    },\n    _years: {\n      type: Object,\n      multiple: true\n    },\n    _hidden: {\n      type: Boolean,\n      noAttribute: true\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.YearPicker.prototype */\n  {\n    /**\n     * Fired when the user selects a year (space/enter/click).\n     * @public\n     * @event\n     */\n    change: {},\n\n    /**\n     * Fired when the timestamp changes - the user navigates with the keyboard or clicks with the mouse.\n     * @since 1.0.0-rc.9\n     * @public\n     * @event\n     */\n    navigate: {}\n  }\n};\nvar PAGE_SIZE = 20; // Total years on a single page\n\nvar ROW_SIZE = 4; // Years per row (5 rows of 4 years each)\n\n/**\n * @class\n *\n * Displays years which can be selected.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.YearPicker\n * @extends CalendarPart\n * @tagname ui5-yearpicker\n * @public\n */\n\nvar YearPicker = /*#__PURE__*/function (_CalendarPart) {\n  _inherits(YearPicker, _CalendarPart);\n\n  var _super = _createSuper(YearPicker);\n\n  function YearPicker() {\n    _classCallCheck(this, YearPicker);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(YearPicker, [{\n    key: \"onBeforeRendering\",\n    value: function onBeforeRendering() {\n      this._buildYears();\n    }\n  }, {\n    key: \"_buildYears\",\n    value: function _buildYears() {\n      var _this = this;\n\n      if (this._hidden) {\n        return;\n      }\n\n      var oYearFormat = DateFormat.getDateInstance({\n        format: \"y\",\n        calendarType: this._primaryCalendarType\n      }, getLocale());\n\n      this._calculateFirstYear();\n\n      this._lastYear = this._firstYear + PAGE_SIZE - 1;\n      var calendarDate = this._calendarDate; // store the value of the expensive getter\n\n      var minDate = this._minDate; // store the value of the expensive getter\n\n      var maxDate = this._maxDate; // store the value of the expensive getter\n\n      var tempDate = new CalendarDate(calendarDate, this._primaryCalendarType);\n      tempDate.setYear(this._firstYear);\n      var intervals = [];\n      var timestamp;\n      /* eslint-disable no-loop-func */\n\n      for (var i = 0; i < PAGE_SIZE; i++) {\n        timestamp = tempDate.valueOf() / 1000;\n        var isSelected = this.selectedDates.some(function (itemTimestamp) {\n          var date = CalendarDate.fromTimestamp(itemTimestamp * 1000, _this._primaryCalendarType);\n          return date.getYear() === tempDate.getYear();\n        });\n        var isFocused = tempDate.getYear() === calendarDate.getYear();\n        var isDisabled = tempDate.getYear() < minDate.getYear() || tempDate.getYear() > maxDate.getYear();\n        var year = {\n          timestamp: timestamp.toString(),\n          _tabIndex: isFocused ? \"0\" : \"-1\",\n          focusRef: isFocused,\n          selected: isSelected,\n          ariaSelected: isSelected ? \"true\" : \"false\",\n          year: oYearFormat.format(tempDate.toLocalJSDate()),\n          disabled: isDisabled,\n          classes: \"ui5-yp-item\"\n        };\n\n        if (isSelected) {\n          year.classes += \" ui5-yp-item--selected\";\n        }\n\n        if (isDisabled) {\n          year.classes += \" ui5-yp-item--disabled\";\n        }\n\n        var intervalIndex = parseInt(i / ROW_SIZE);\n\n        if (intervals[intervalIndex]) {\n          intervals[intervalIndex].push(year);\n        } else {\n          intervals[intervalIndex] = [year];\n        }\n\n        tempDate.setYear(tempDate.getYear() + 1);\n      }\n\n      this._years = intervals;\n    }\n  }, {\n    key: \"_calculateFirstYear\",\n    value: function _calculateFirstYear() {\n      var absoluteMaxYear = getMaxCalendarDate(this._primaryCalendarType).getYear(); // 9999\n\n      var currentYear = this._calendarDate.getYear(); // 1. If first load - center the current year (set first year to be current year minus half page size)\n\n\n      if (!this._firstYear) {\n        this._firstYear = currentYear - PAGE_SIZE / 2;\n      } // 2. If out of range - change by a page (20) - do not center in order to keep the same position as the last page\n\n\n      if (currentYear < this._firstYear) {\n        this._firstYear -= PAGE_SIZE;\n      } else if (currentYear >= this._firstYear + PAGE_SIZE) {\n        this._firstYear += PAGE_SIZE;\n      } // 3. If the date was changed by more than 20 years - reset _firstYear completely\n\n\n      if (Math.abs(this._firstYear - currentYear) >= PAGE_SIZE) {\n        this._firstYear = currentYear - PAGE_SIZE / 2;\n      } // Keep it in the range between the min and max year\n\n\n      this._firstYear = Math.max(this._firstYear, this._minDate.getYear());\n      this._firstYear = Math.min(this._firstYear, this._maxDate.getYear()); // If first year is > 9980, make it 9980 to not show any years beyond 9999\n\n      if (this._firstYear > absoluteMaxYear - PAGE_SIZE + 1) {\n        this._firstYear = absoluteMaxYear - PAGE_SIZE + 1;\n      }\n    }\n  }, {\n    key: \"onAfterRendering\",\n    value: function onAfterRendering() {\n      if (!this._hidden) {\n        this.focus();\n      }\n    }\n  }, {\n    key: \"_onkeydown\",\n    value: function _onkeydown(event) {\n      var preventDefault = true;\n\n      if (isEnter(event)) {\n        this._selectYear(event);\n      } else if (isSpace(event)) {\n        event.preventDefault();\n      } else if (isLeft(event)) {\n        this._modifyTimestampBy(-1);\n      } else if (isRight(event)) {\n        this._modifyTimestampBy(1);\n      } else if (isUp(event)) {\n        this._modifyTimestampBy(-ROW_SIZE);\n      } else if (isDown(event)) {\n        this._modifyTimestampBy(ROW_SIZE);\n      } else if (isPageUp(event)) {\n        this._modifyTimestampBy(-PAGE_SIZE);\n      } else if (isPageDown(event)) {\n        this._modifyTimestampBy(PAGE_SIZE);\n      } else if (isHome(event) || isEnd(event)) {\n        this._onHomeOrEnd(isHome(event));\n      } else if (isHomeCtrl(event)) {\n        this._setTimestamp(parseInt(this._years[0][0].timestamp)); // first year of first row\n\n      } else if (isEndCtrl(event)) {\n        this._setTimestamp(parseInt(this._years[PAGE_SIZE / ROW_SIZE - 1][ROW_SIZE - 1].timestamp)); // last year of last row\n\n      } else {\n        preventDefault = false;\n      }\n\n      if (preventDefault) {\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"_onHomeOrEnd\",\n    value: function _onHomeOrEnd(homePressed) {\n      var _this2 = this;\n\n      this._years.forEach(function (row) {\n        var indexInRow = row.findIndex(function (item) {\n          return CalendarDate.fromTimestamp(parseInt(item.timestamp) * 1000).getYear() === _this2._calendarDate.getYear();\n        });\n\n        if (indexInRow !== -1) {\n          // The current year is on this row\n          var index = homePressed ? 0 : ROW_SIZE - 1; // select the first (if Home) or last (if End) year on the row\n\n          _this2._setTimestamp(parseInt(row[index].timestamp));\n        }\n      });\n    }\n    /**\n     * Sets the timestamp to an absolute value\n     * @param value\n     * @private\n     */\n\n  }, {\n    key: \"_setTimestamp\",\n    value: function _setTimestamp(value) {\n      this._safelySetTimestamp(value);\n\n      this.fireEvent(\"navigate\", {\n        timestamp: this.timestamp\n      });\n    }\n    /**\n     * Modifies timestamp by a given amount of years and, if necessary, loads the prev/next page\n     * @param amount\n     * @private\n     */\n\n  }, {\n    key: \"_modifyTimestampBy\",\n    value: function _modifyTimestampBy(amount) {\n      // Modify the current timestamp\n      this._safelyModifyTimestampBy(amount, \"year\"); // Notify the calendar to update its timestamp\n\n\n      this.fireEvent(\"navigate\", {\n        timestamp: this.timestamp\n      });\n    }\n  }, {\n    key: \"_onkeyup\",\n    value: function _onkeyup(event) {\n      if (isSpace(event)) {\n        this._selectYear(event);\n      }\n    }\n    /**\n     * User clicked with the mouser or pressed Enter/Space\n     * @param event\n     * @private\n     */\n\n  }, {\n    key: \"_selectYear\",\n    value: function _selectYear(event) {\n      event.preventDefault();\n\n      if (event.target.className.indexOf(\"ui5-yp-item\") > -1) {\n        var timestamp = this._getTimestampFromDom(event.target);\n\n        this._safelySetTimestamp(timestamp);\n\n        this.fireEvent(\"change\", {\n          timestamp: this.timestamp\n        });\n      }\n    }\n    /**\n     * Called from Calendar.js\n     * @protected\n     */\n\n  }, {\n    key: \"_hasPreviousPage\",\n    value: function _hasPreviousPage() {\n      return this._firstYear > this._minDate.getYear();\n    }\n    /**\n     * Called from Calendar.js\n     * @protected\n     */\n\n  }, {\n    key: \"_hasNextPage\",\n    value: function _hasNextPage() {\n      return this._firstYear + PAGE_SIZE - 1 < this._maxDate.getYear();\n    }\n    /**\n     * Called by Calendar.js\n     * User pressed the \"<\" button in the calendar header (same as PageUp)\n     * @protected\n     */\n\n  }, {\n    key: \"_showPreviousPage\",\n    value: function _showPreviousPage() {\n      this._modifyTimestampBy(-PAGE_SIZE);\n    }\n    /**\n     * Called by Calendar.js\n     * User pressed the \">\" button in the calendar header (same as PageDown)\n     * @protected\n     */\n\n  }, {\n    key: \"_showNextPage\",\n    value: function _showNextPage() {\n      this._modifyTimestampBy(PAGE_SIZE);\n    }\n  }], [{\n    key: \"metadata\",\n    get: function get() {\n      return metadata;\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return styles;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return YearPickerTemplate;\n    }\n  }]);\n\n  return YearPicker;\n}(CalendarPart);\n\nYearPicker.define();\nexport default YearPicker;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/YearPicker.js"],"names":["DateFormat","isEnter","isSpace","isDown","isUp","isLeft","isRight","isHome","isEnd","isHomeCtrl","isEndCtrl","isPageUp","isPageDown","Integer","getLocale","CalendarDate","getMaxCalendarDate","CalendarPart","YearPickerTemplate","styles","metadata","tag","properties","selectedDates","type","multiple","compareValues","_years","Object","_hidden","Boolean","noAttribute","events","change","navigate","PAGE_SIZE","ROW_SIZE","YearPicker","_buildYears","oYearFormat","getDateInstance","format","calendarType","_primaryCalendarType","_calculateFirstYear","_lastYear","_firstYear","calendarDate","_calendarDate","minDate","_minDate","maxDate","_maxDate","tempDate","setYear","intervals","timestamp","i","valueOf","isSelected","some","itemTimestamp","date","fromTimestamp","getYear","isFocused","isDisabled","year","toString","_tabIndex","focusRef","selected","ariaSelected","toLocalJSDate","disabled","classes","intervalIndex","parseInt","push","absoluteMaxYear","currentYear","Math","abs","max","min","focus","event","preventDefault","_selectYear","_modifyTimestampBy","_onHomeOrEnd","_setTimestamp","homePressed","forEach","row","indexInRow","findIndex","item","index","value","_safelySetTimestamp","fireEvent","amount","_safelyModifyTimestampBy","target","className","indexOf","_getTimestampFromDom","define"],"mappings":"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","sourcesContent":["import DateFormat from \"@ui5/webcomponents-localization/dist/DateFormat.js\";\nimport {\n\tisEnter,\n\tisSpace,\n\tisDown,\n\tisUp,\n\tisLeft,\n\tisRight,\n\tisHome,\n\tisEnd,\n\tisHomeCtrl,\n\tisEndCtrl,\n\tisPageUp,\n\tisPageDown,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport getLocale from \"@ui5/webcomponents-base/dist/locale/getLocale.js\";\nimport CalendarDate from \"@ui5/webcomponents-localization/dist/dates/CalendarDate.js\";\nimport { getMaxCalendarDate } from \"@ui5/webcomponents-localization/dist/dates/ExtremeDates.js\";\nimport CalendarPart from \"./CalendarPart.js\";\nimport YearPickerTemplate from \"./generated/templates/YearPickerTemplate.lit.js\";\nimport styles from \"./generated/themes/YearPicker.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-yearpicker\",\n\tproperties: /** @lends  sap.ui.webcomponents.main.YearPicker.prototype */ {\n\t\t/**\n\t\t * An array of UTC timestamps representing the selected date or dates depending on the capabilities of the picker component.\n\t\t * @type {Array}\n\t\t * @public\n\t\t */\n\t\tselectedDates: {\n\t\t\ttype: Integer,\n\t\t\tmultiple: true,\n\t\t\tcompareValues: true,\n\t\t},\n\n\t\t_years: {\n\t\t\ttype: Object,\n\t\t\tmultiple: true,\n\t\t},\n\n\t\t_hidden: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.YearPicker.prototype */ {\n\t\t/**\n\t\t * Fired when the user selects a year (space/enter/click).\n\t\t * @public\n\t\t * @event\n\t\t */\n\t\tchange: {},\n\t\t/**\n\t\t * Fired when the timestamp changes - the user navigates with the keyboard or clicks with the mouse.\n\t\t * @since 1.0.0-rc.9\n\t\t * @public\n\t\t * @event\n\t\t */\n\t\tnavigate: {},\n\t},\n};\n\nconst PAGE_SIZE = 20; // Total years on a single page\nconst ROW_SIZE = 4; // Years per row (5 rows of 4 years each)\n\n/**\n * @class\n *\n * Displays years which can be selected.\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.YearPicker\n * @extends CalendarPart\n * @tagname ui5-yearpicker\n * @public\n */\nclass YearPicker extends CalendarPart {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get template() {\n\t\treturn YearPickerTemplate;\n\t}\n\n\tonBeforeRendering() {\n\t\tthis._buildYears();\n\t}\n\n\t_buildYears() {\n\t\tif (this._hidden) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst oYearFormat = DateFormat.getDateInstance({ format: \"y\", calendarType: this._primaryCalendarType }, getLocale());\n\n\t\tthis._calculateFirstYear();\n\t\tthis._lastYear = this._firstYear + PAGE_SIZE - 1;\n\n\t\tconst calendarDate = this._calendarDate; // store the value of the expensive getter\n\t\tconst minDate = this._minDate; // store the value of the expensive getter\n\t\tconst maxDate = this._maxDate; // store the value of the expensive getter\n\t\tconst tempDate = new CalendarDate(calendarDate, this._primaryCalendarType);\n\t\ttempDate.setYear(this._firstYear);\n\n\t\tconst intervals = [];\n\t\tlet timestamp;\n\n\t\t/* eslint-disable no-loop-func */\n\t\tfor (let i = 0; i < PAGE_SIZE; i++) {\n\t\t\ttimestamp = tempDate.valueOf() / 1000;\n\n\t\t\tconst isSelected = this.selectedDates.some(itemTimestamp => {\n\t\t\t\tconst date = CalendarDate.fromTimestamp(itemTimestamp * 1000, this._primaryCalendarType);\n\t\t\t\treturn date.getYear() === tempDate.getYear();\n\t\t\t});\n\t\t\tconst isFocused = tempDate.getYear() === calendarDate.getYear();\n\t\t\tconst isDisabled = tempDate.getYear() < minDate.getYear() || tempDate.getYear() > maxDate.getYear();\n\n\t\t\tconst year = {\n\t\t\t\ttimestamp: timestamp.toString(),\n\t\t\t\t_tabIndex: isFocused ? \"0\" : \"-1\",\n\t\t\t\tfocusRef: isFocused,\n\t\t\t\tselected: isSelected,\n\t\t\t\tariaSelected: isSelected ? \"true\" : \"false\",\n\t\t\t\tyear: oYearFormat.format(tempDate.toLocalJSDate()),\n\t\t\t\tdisabled: isDisabled,\n\t\t\t\tclasses: \"ui5-yp-item\",\n\t\t\t};\n\n\t\t\tif (isSelected) {\n\t\t\t\tyear.classes += \" ui5-yp-item--selected\";\n\t\t\t}\n\n\t\t\tif (isDisabled) {\n\t\t\t\tyear.classes += \" ui5-yp-item--disabled\";\n\t\t\t}\n\n\t\t\tconst intervalIndex = parseInt(i / ROW_SIZE);\n\n\t\t\tif (intervals[intervalIndex]) {\n\t\t\t\tintervals[intervalIndex].push(year);\n\t\t\t} else {\n\t\t\t\tintervals[intervalIndex] = [year];\n\t\t\t}\n\n\t\t\ttempDate.setYear(tempDate.getYear() + 1);\n\t\t}\n\n\t\tthis._years = intervals;\n\t}\n\n\t_calculateFirstYear() {\n\t\tconst absoluteMaxYear = getMaxCalendarDate(this._primaryCalendarType).getYear(); // 9999\n\t\tconst currentYear = this._calendarDate.getYear();\n\n\t\t// 1. If first load - center the current year (set first year to be current year minus half page size)\n\t\tif (!this._firstYear) {\n\t\t\tthis._firstYear = currentYear - PAGE_SIZE / 2;\n\t\t}\n\n\t\t// 2. If out of range - change by a page (20) - do not center in order to keep the same position as the last page\n\t\tif (currentYear < this._firstYear) {\n\t\t\tthis._firstYear -= PAGE_SIZE;\n\t\t} else if (currentYear >= this._firstYear + PAGE_SIZE) {\n\t\t\tthis._firstYear += PAGE_SIZE;\n\t\t}\n\n\t\t// 3. If the date was changed by more than 20 years - reset _firstYear completely\n\t\tif (Math.abs(this._firstYear - currentYear) >= PAGE_SIZE) {\n\t\t\tthis._firstYear = currentYear - PAGE_SIZE / 2;\n\t\t}\n\n\t\t// Keep it in the range between the min and max year\n\t\tthis._firstYear = Math.max(this._firstYear, this._minDate.getYear());\n\t\tthis._firstYear = Math.min(this._firstYear, this._maxDate.getYear());\n\n\t\t// If first year is > 9980, make it 9980 to not show any years beyond 9999\n\t\tif (this._firstYear > absoluteMaxYear - PAGE_SIZE + 1) {\n\t\t\tthis._firstYear = absoluteMaxYear - PAGE_SIZE + 1;\n\t\t}\n\t}\n\n\tonAfterRendering() {\n\t\tif (!this._hidden) {\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\t_onkeydown(event) {\n\t\tlet preventDefault = true;\n\n\t\tif (isEnter(event)) {\n\t\t\tthis._selectYear(event);\n\t\t} else if (isSpace(event)) {\n\t\t\tevent.preventDefault();\n\t\t} else if (isLeft(event)) {\n\t\t\tthis._modifyTimestampBy(-1);\n\t\t} else if (isRight(event)) {\n\t\t\tthis._modifyTimestampBy(1);\n\t\t} else if (isUp(event)) {\n\t\t\tthis._modifyTimestampBy(-ROW_SIZE);\n\t\t} else if (isDown(event)) {\n\t\t\tthis._modifyTimestampBy(ROW_SIZE);\n\t\t} else if (isPageUp(event)) {\n\t\t\tthis._modifyTimestampBy(-PAGE_SIZE);\n\t\t} else if (isPageDown(event)) {\n\t\t\tthis._modifyTimestampBy(PAGE_SIZE);\n\t\t} else if (isHome(event) || isEnd(event)) {\n\t\t\tthis._onHomeOrEnd(isHome(event));\n\t\t} else if (isHomeCtrl(event)) {\n\t\t\tthis._setTimestamp(parseInt(this._years[0][0].timestamp)); // first year of first row\n\t\t} else if (isEndCtrl(event)) {\n\t\t\tthis._setTimestamp(parseInt(this._years[PAGE_SIZE / ROW_SIZE - 1][ROW_SIZE - 1].timestamp)); // last year of last row\n\t\t} else {\n\t\t\tpreventDefault = false;\n\t\t}\n\n\t\tif (preventDefault) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\t_onHomeOrEnd(homePressed) {\n\t\tthis._years.forEach(row => {\n\t\t\tconst indexInRow = row.findIndex(item => CalendarDate.fromTimestamp(parseInt(item.timestamp) * 1000).getYear() === this._calendarDate.getYear());\n\t\t\tif (indexInRow !== -1) { // The current year is on this row\n\t\t\t\tconst index = homePressed ? 0 : ROW_SIZE - 1; // select the first (if Home) or last (if End) year on the row\n\t\t\t\tthis._setTimestamp(parseInt(row[index].timestamp));\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Sets the timestamp to an absolute value\n\t * @param value\n\t * @private\n\t */\n\t_setTimestamp(value) {\n\t\tthis._safelySetTimestamp(value);\n\t\tthis.fireEvent(\"navigate\", { timestamp: this.timestamp });\n\t}\n\n\t/**\n\t * Modifies timestamp by a given amount of years and, if necessary, loads the prev/next page\n\t * @param amount\n\t * @private\n\t */\n\t_modifyTimestampBy(amount) {\n\t\t// Modify the current timestamp\n\t\tthis._safelyModifyTimestampBy(amount, \"year\");\n\n\t\t// Notify the calendar to update its timestamp\n\t\tthis.fireEvent(\"navigate\", { timestamp: this.timestamp });\n\t}\n\n\t_onkeyup(event) {\n\t\tif (isSpace(event)) {\n\t\t\tthis._selectYear(event);\n\t\t}\n\t}\n\n\t/**\n\t * User clicked with the mouser or pressed Enter/Space\n\t * @param event\n\t * @private\n\t */\n\t_selectYear(event) {\n\t\tevent.preventDefault();\n\t\tif (event.target.className.indexOf(\"ui5-yp-item\") > -1) {\n\t\t\tconst timestamp = this._getTimestampFromDom(event.target);\n\t\t\tthis._safelySetTimestamp(timestamp);\n\t\t\tthis.fireEvent(\"change\", { timestamp: this.timestamp });\n\t\t}\n\t}\n\n\t/**\n\t * Called from Calendar.js\n\t * @protected\n\t */\n\t_hasPreviousPage() {\n\t\treturn this._firstYear > this._minDate.getYear();\n\t}\n\n\t/**\n\t * Called from Calendar.js\n\t * @protected\n\t */\n\t_hasNextPage() {\n\t\treturn this._firstYear + PAGE_SIZE - 1 < this._maxDate.getYear();\n\t}\n\n\t/**\n\t * Called by Calendar.js\n\t * User pressed the \"<\" button in the calendar header (same as PageUp)\n\t * @protected\n\t */\n\t_showPreviousPage() {\n\t\tthis._modifyTimestampBy(-PAGE_SIZE);\n\t}\n\n\t/**\n\t * Called by Calendar.js\n\t * User pressed the \">\" button in the calendar header (same as PageDown)\n\t * @protected\n\t */\n\t_showNextPage() {\n\t\tthis._modifyTimestampBy(PAGE_SIZE);\n\t}\n}\n\nYearPicker.define();\n\nexport default YearPicker;\n"]},"metadata":{},"sourceType":"module"}