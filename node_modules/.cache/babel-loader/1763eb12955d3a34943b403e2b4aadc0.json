{"ast":null,"code":"import { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { isChrome } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { getFirstFocusableElement, getLastFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport { hasStyle, createStyle } from \"@ui5/webcomponents-base/dist/ManagedStyles.js\";\nimport { isTabPrevious } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { getNextZIndex, getFocusedElement, isFocusedElementWithinNode } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport PopupTemplate from \"./generated/templates/PopupTemplate.lit.js\";\nimport PopupBlockLayer from \"./generated/templates/PopupBlockLayerTemplate.lit.js\";\nimport { addOpenedPopup, removeOpenedPopup } from \"./popup-utils/OpenedPopupsRegistry.js\"; // Styles\n\nimport styles from \"./generated/themes/Popup.css.js\";\nimport staticAreaStyles from \"./generated/themes/PopupStaticAreaStyles.css.js\";\nimport globalStyles from \"./generated/themes/PopupGlobal.css.js\";\n/**\n * @public\n */\n\nconst metadata = {\n  managedSlots: true,\n  slots:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Defines the content of the Popup.\n     * @type {HTMLElement[]}\n     * @slot\n     * @public\n     */\n    \"default\": {\n      type: HTMLElement,\n      propertyName: \"content\"\n    }\n  },\n  properties:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Defines the ID of the HTML Element, which will get the initial focus.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    initialFocus: {\n      type: String\n    },\n\n    /**\n     * Defines if the focus should be returned to the previously focused element,\n     * when the popup closes.\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     * @since 1.0.0-rc.8\n    */\n    preventFocusRestore: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates if the element is open\n     * @private\n     * @type {boolean}\n     * @defaultvalue false\n     */\n    opened: {\n      type: Boolean\n    },\n\n    /**\n     * Defines the accessible name of the component.\n     *\n     * @type {String}\n     * @defaultvalue \"\"\n     * @public\n     * @since 1.0.0-rc.15\n     */\n    accessibleName: {\n      type: String,\n      defaultValue: undefined\n    },\n\n    /**\n     * Defines the IDs of the elements that label the component.\n     *\n     * @type {String}\n     * @defaultvalue \"\"\n     * @public\n     * @since 1.1.0\n     */\n    accessibleNameRef: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * @private\n     */\n    _disableInitialFocus: {\n      type: Boolean\n    },\n    _blockLayerHidden: {\n      type: Boolean\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.Popup.prototype */\n  {\n    /**\n     * Fired before the component is opened. This event can be cancelled, which will prevent the popup from opening. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#before-open\n     * @allowPreventDefault\n     */\n    \"before-open\": {},\n\n    /**\n     * Fired after the component is opened. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#after-open\n     */\n    \"after-open\": {},\n\n    /**\n     * Fired before the component is closed. This event can be cancelled, which will prevent the popup from closing. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#before-close\n     * @allowPreventDefault\n     * @param {boolean} escPressed Indicates that <code>ESC</code> key has triggered the event.\n     */\n    \"before-close\": {\n      detail: {\n        escPressed: {\n          type: Boolean\n        }\n      }\n    },\n\n    /**\n     * Fired after the component is closed. <b>This event does not bubble.</b>\n     *\n     * @public\n     * @event sap.ui.webcomponents.main.Popup#after-close\n     */\n    \"after-close\": {},\n\n    /**\n     * Fired whenever the popup content area is scrolled\n     *\n     * @private\n     * @event sap.ui.webcomponents.main.Popup#scroll\n     */\n    \"scroll\": {}\n  }\n};\n\nconst createBlockingStyle = () => {\n  if (!hasStyle(\"data-ui5-popup-scroll-blocker\")) {\n    createStyle(globalStyles, \"data-ui5-popup-scroll-blocker\");\n  }\n};\n\ncreateBlockingStyle();\nconst bodyScrollingBlockers = new Set();\n/**\n * @class\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Base class for all popup Web Components.\n *\n * If you need to create your own popup-like custom UI5 Web Components, it is highly recommended that you extend\n * at least Popup in order to have consistency with other popups in terms of modal behavior and z-index management.\n *\n * 1. The Popup class handles modality:\n *  - The \"isModal\" getter can be overridden by derivatives to provide their own conditions when they are modal or not\n *  - Derivatives may call the \"blockBodyScrolling\" and \"unblockBodyScrolling\" static methods to temporarily remove scrollbars on the body\n *  - Derivatives may call the \"open\" and \"close\" methods which handle focus, manage the popup registry and for modal popups, manage the blocking layer\n *\n *  2. Provides blocking layer (relevant for modal popups only):\n *   - It is in the static area\n *   - Controlled by the \"open\" and \"close\" methods\n *\n * 3. The Popup class \"traps\" focus:\n *  - Derivatives may call the \"applyInitialFocus\" method (usually when opening, to transfer focus inside the popup)\n *\n * 4. The Popup class automatically assigns \"z-index\"\n *  - Each time a popup is opened, it gets a higher than the previously opened popup z-index\n *\n * 5. The template of this component exposes two inline partials you can override in derivatives:\n *  - beforeContent (upper part of the box, useful for header/title/close button)\n *  - afterContent (lower part, useful for footer/action buttons)\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Popup\n * @extends sap.ui.webcomponents.base.UI5Element\n * @public\n */\n\nclass Popup extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n\n  static get render() {\n    return litRender;\n  }\n\n  static get styles() {\n    return styles;\n  }\n\n  static get template() {\n    return PopupTemplate;\n  }\n\n  static get staticAreaTemplate() {\n    return PopupBlockLayer;\n  }\n\n  static get staticAreaStyles() {\n    return staticAreaStyles;\n  }\n\n  onEnterDOM() {\n    if (!this.isOpen()) {\n      this._blockLayerHidden = true;\n    }\n  }\n\n  onExitDOM() {\n    if (this.isOpen()) {\n      Popup.unblockBodyScrolling(this);\n\n      this._removeOpenedPopup();\n    }\n  }\n\n  get _displayProp() {\n    return \"block\";\n  }\n  /**\n   * Prevents the user from interacting with the content under the block layer\n   */\n\n\n  _preventBlockLayerFocus(event) {\n    event.preventDefault();\n  }\n  /**\n   * Temporarily removes scrollbars from the body\n   * @protected\n   */\n\n\n  static blockBodyScrolling(popup) {\n    bodyScrollingBlockers.add(popup);\n\n    if (bodyScrollingBlockers.size !== 1) {\n      return;\n    }\n\n    if (window.pageYOffset > 0) {\n      document.body.style.top = `-${window.pageYOffset}px`;\n    }\n\n    document.body.classList.add(\"ui5-popup-scroll-blocker\");\n  }\n  /**\n   * Restores scrollbars on the body, if needed\n   * @protected\n   */\n\n\n  static unblockBodyScrolling(popup) {\n    bodyScrollingBlockers.delete(popup);\n\n    if (bodyScrollingBlockers.size !== 0) {\n      return;\n    }\n\n    document.body.classList.remove(\"ui5-popup-scroll-blocker\");\n    window.scrollTo(0, -parseFloat(document.body.style.top));\n    document.body.style.top = \"\";\n  }\n\n  _scroll(e) {\n    this.fireEvent(\"scroll\", {\n      scrollTop: e.target.scrollTop,\n      targetRef: e.target\n    });\n  }\n\n  _onkeydown(e) {\n    if (e.target === this._root && isTabPrevious(e)) {\n      e.preventDefault();\n    }\n  }\n\n  _onfocusout(e) {\n    // relatedTarget is the element, which will get focus. If no such element exists, focus the root.\n    // This happens after the mouse is released in order to not interrupt text selection.\n    if (!e.relatedTarget) {\n      this._shouldFocusRoot = true;\n    }\n  }\n\n  _onmousedown(e) {\n    this._root.removeAttribute(\"tabindex\");\n\n    if (this.shadowRoot.contains(e.target)) {\n      this._shouldFocusRoot = true;\n    } else {\n      this._shouldFocusRoot = false;\n    }\n  }\n\n  _onmouseup() {\n    this._root.tabIndex = -1;\n\n    if (this._shouldFocusRoot) {\n      if (isChrome()) {\n        this._root.focus();\n      }\n\n      this._shouldFocusRoot = false;\n    }\n  }\n  /**\n   * Focus trapping\n   * @private\n   */\n\n\n  async forwardToFirst() {\n    const firstFocusable = await getFirstFocusableElement(this);\n\n    if (firstFocusable) {\n      firstFocusable.focus();\n    } else {\n      this._root.focus();\n    }\n  }\n  /**\n   * Focus trapping\n   * @private\n   */\n\n\n  async forwardToLast() {\n    const lastFocusable = await getLastFocusableElement(this);\n\n    if (lastFocusable) {\n      lastFocusable.focus();\n    } else {\n      this._root.focus();\n    }\n  }\n  /**\n   * Use this method to focus the element denoted by \"initialFocus\", if provided, or the first focusable element otherwise.\n   * @protected\n   */\n\n\n  async applyInitialFocus() {\n    await this.applyFocus();\n  }\n  /**\n   * Focuses the element denoted by <code>initialFocus</code>, if provided,\n   * or the first focusable element otherwise.\n   * @public\n   * @async\n   * @returns {Promise} Promise that resolves when the focus is applied\n   */\n\n\n  async applyFocus() {\n    await this._waitForDomRef();\n\n    const element = this.getRootNode().getElementById(this.initialFocus) || document.getElementById(this.initialFocus) || (await getFirstFocusableElement(this)) || this._root; // in case of no focusable content focus the root\n\n\n    if (element) {\n      if (element === this._root) {\n        element.tabIndex = -1;\n      }\n\n      element.focus();\n    }\n  }\n  /**\n   * Tells if the component is opened\n   * @public\n   * @returns {boolean}\n   */\n\n\n  isOpen() {\n    return this.opened;\n  }\n\n  isFocusWithin() {\n    return isFocusedElementWithinNode(this.shadowRoot.querySelector(\".ui5-popup-root\"));\n  }\n  /**\n   * Shows the block layer (for modal popups only) and sets the correct z-index for the purpose of popup stacking\n   * @protected\n   */\n\n\n  async _open(preventInitialFocus) {\n    const prevented = !this.fireEvent(\"before-open\", {}, true, false);\n\n    if (prevented) {\n      return;\n    }\n\n    if (this.isModal && !this.shouldHideBackdrop) {\n      // create static area item ref for block layer\n      this.getStaticAreaItemDomRef();\n      this._blockLayerHidden = false;\n      Popup.blockBodyScrolling(this);\n    }\n\n    this._zIndex = getNextZIndex();\n    this.style.zIndex = this._zIndex;\n    this._focusedElementBeforeOpen = getFocusedElement();\n\n    this._show();\n\n    if (!this._disableInitialFocus && !preventInitialFocus) {\n      this.applyInitialFocus();\n    }\n\n    this._addOpenedPopup();\n\n    this.opened = true;\n    await renderFinished();\n    this.fireEvent(\"after-open\", {}, false, false);\n  }\n  /**\n   * Adds the popup to the \"opened popups registry\"\n   * @protected\n   */\n\n\n  _addOpenedPopup() {\n    addOpenedPopup(this);\n  }\n  /**\n   * Hides the block layer (for modal popups only)\n   * @public\n   */\n\n\n  close(escPressed = false, preventRegistryUpdate = false, preventFocusRestore = false) {\n    if (!this.opened) {\n      return;\n    }\n\n    const prevented = !this.fireEvent(\"before-close\", {\n      escPressed\n    }, true, false);\n\n    if (prevented) {\n      return;\n    }\n\n    if (this.isModal) {\n      this._blockLayerHidden = true;\n      Popup.unblockBodyScrolling(this);\n    }\n\n    this.hide();\n    this.opened = false;\n\n    if (!preventRegistryUpdate) {\n      this._removeOpenedPopup();\n    }\n\n    if (!this.preventFocusRestore && !preventFocusRestore) {\n      this.resetFocus();\n    }\n\n    this.fireEvent(\"after-close\", {}, false, false);\n  }\n  /**\n   * Removes the popup from the \"opened popups registry\"\n   * @protected\n   */\n\n\n  _removeOpenedPopup() {\n    removeOpenedPopup(this);\n  }\n  /**\n   * Returns the focus to the previously focused element\n   * @protected\n   */\n\n\n  resetFocus() {\n    if (!this._focusedElementBeforeOpen) {\n      return;\n    }\n\n    this._focusedElementBeforeOpen.focus();\n\n    this._focusedElementBeforeOpen = null;\n  }\n  /**\n   * Sets \"block\" display to the popup. The property can be overriden by derivatives of Popup.\n   * @protected\n   */\n\n\n  _show() {\n    this.style.display = this._displayProp;\n  }\n  /**\n   * Sets \"none\" display to the popup\n   * @protected\n   */\n\n\n  hide() {\n    this.style.display = \"none\";\n  }\n  /**\n   * Implement this getter with relevant logic regarding the modality of the popup (e.g. based on a public property)\n   *\n   * @protected\n   * @abstract\n   * @returns {boolean}\n   */\n\n\n  get isModal() {} // eslint-disable-line\n\n  /**\n   * Implement this getter with relevant logic in order to hide the block layer (f.e. based on a public property)\n   *\n   * @protected\n   * @abstract\n   * @returns {boolean}\n   */\n\n\n  get shouldHideBackdrop() {} // eslint-disable-line\n\n  /**\n   * Return the ID of an element in the shadow DOM that is going to label this popup\n   *\n   * @protected\n   * @abstract\n   * @returns {String}\n   */\n\n\n  get _ariaLabelledBy() {} // eslint-disable-line\n\n  /**\n   * Return the value for aria-modal for this popup\n   *\n   * @protected\n   * @abstract\n   * @returns {String}\n   */\n\n\n  get _ariaModal() {} // eslint-disable-line\n\n  /**\n   * Ensures ariaLabel is never null or empty string\n   * @returns {String|undefined}\n   * @protected\n   */\n\n\n  get _ariaLabel() {\n    return getEffectiveAriaLabelText(this);\n  }\n\n  get _root() {\n    return this.shadowRoot.querySelector(\".ui5-popup-root\");\n  }\n\n  get styles() {\n    return {\n      root: {},\n      content: {},\n      blockLayer: {\n        \"zIndex\": this._zIndex - 1\n      }\n    };\n  }\n\n  get classes() {\n    return {\n      root: {\n        \"ui5-popup-root\": true\n      },\n      content: {\n        \"ui5-popup-content\": true\n      }\n    };\n  }\n\n}\n\nexport default Popup;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/Popup.js"],"names":["renderFinished","litRender","UI5Element","isChrome","getFirstFocusableElement","getLastFocusableElement","getEffectiveAriaLabelText","hasStyle","createStyle","isTabPrevious","getNextZIndex","getFocusedElement","isFocusedElementWithinNode","PopupTemplate","PopupBlockLayer","addOpenedPopup","removeOpenedPopup","styles","staticAreaStyles","globalStyles","metadata","managedSlots","slots","type","HTMLElement","propertyName","properties","initialFocus","String","preventFocusRestore","Boolean","opened","accessibleName","defaultValue","undefined","accessibleNameRef","_disableInitialFocus","_blockLayerHidden","events","detail","escPressed","createBlockingStyle","bodyScrollingBlockers","Set","Popup","render","template","staticAreaTemplate","onEnterDOM","isOpen","onExitDOM","unblockBodyScrolling","_removeOpenedPopup","_displayProp","_preventBlockLayerFocus","event","preventDefault","blockBodyScrolling","popup","add","size","window","pageYOffset","document","body","style","top","classList","delete","remove","scrollTo","parseFloat","_scroll","e","fireEvent","scrollTop","target","targetRef","_onkeydown","_root","_onfocusout","relatedTarget","_shouldFocusRoot","_onmousedown","removeAttribute","shadowRoot","contains","_onmouseup","tabIndex","focus","forwardToFirst","firstFocusable","forwardToLast","lastFocusable","applyInitialFocus","applyFocus","_waitForDomRef","element","getRootNode","getElementById","isFocusWithin","querySelector","_open","preventInitialFocus","prevented","isModal","shouldHideBackdrop","getStaticAreaItemDomRef","_zIndex","zIndex","_focusedElementBeforeOpen","_show","_addOpenedPopup","close","preventRegistryUpdate","hide","resetFocus","display","_ariaLabelledBy","_ariaModal","_ariaLabel","root","content","blockLayer","classes"],"mappings":"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","sourcesContent":["import { renderFinished } from \"@ui5/webcomponents-base/dist/Render.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { isChrome } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport { getFirstFocusableElement, getLastFocusableElement } from \"@ui5/webcomponents-base/dist/util/FocusableElements.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport { hasStyle, createStyle } from \"@ui5/webcomponents-base/dist/ManagedStyles.js\";\nimport { isTabPrevious } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { getNextZIndex, getFocusedElement, isFocusedElementWithinNode } from \"@ui5/webcomponents-base/dist/util/PopupUtils.js\";\nimport PopupTemplate from \"./generated/templates/PopupTemplate.lit.js\";\nimport PopupBlockLayer from \"./generated/templates/PopupBlockLayerTemplate.lit.js\";\nimport { addOpenedPopup, removeOpenedPopup } from \"./popup-utils/OpenedPopupsRegistry.js\";\n\n// Styles\nimport styles from \"./generated/themes/Popup.css.js\";\nimport staticAreaStyles from \"./generated/themes/PopupStaticAreaStyles.css.js\";\nimport globalStyles from \"./generated/themes/PopupGlobal.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\tmanagedSlots: true,\n\tslots: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\n\t\t/**\n\t\t * Defines the content of the Popup.\n\t\t * @type {HTMLElement[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\ttype: HTMLElement,\n\t\t\tpropertyName: \"content\",\n\t\t},\n\t},\n\tproperties: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\t\t/**\n\t\t * Defines the ID of the HTML Element, which will get the initial focus.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tinitialFocus: {\n\t\t\ttype: String,\n\t\t},\n\n\t\t/**\n\t\t * Defines if the focus should be returned to the previously focused element,\n\t\t * when the popup closes.\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t * @since 1.0.0-rc.8\n\t\t*/\n\t\tpreventFocusRestore: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates if the element is open\n\t\t * @private\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t */\n\t\topened: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the accessible name of the component.\n\t\t *\n\t\t * @type {String}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t * @since 1.0.0-rc.15\n\t\t */\n\t\taccessibleName: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: undefined,\n\t\t},\n\n\t\t/**\n\t\t * Defines the IDs of the elements that label the component.\n\t\t *\n\t\t * @type {String}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t * @since 1.1.0\n\t\t */\n\t\taccessibleNameRef: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\t_disableInitialFocus: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_blockLayerHidden: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.Popup.prototype */ {\n\n\t\t/**\n\t\t * Fired before the component is opened. This event can be cancelled, which will prevent the popup from opening. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#before-open\n\t\t * @allowPreventDefault\n\t\t */\n\t\t\"before-open\": {},\n\n\t\t/**\n\t\t * Fired after the component is opened. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#after-open\n\t\t */\n\t\t\"after-open\": {},\n\n\t\t/**\n\t\t * Fired before the component is closed. This event can be cancelled, which will prevent the popup from closing. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#before-close\n\t\t * @allowPreventDefault\n\t\t * @param {boolean} escPressed Indicates that <code>ESC</code> key has triggered the event.\n\t\t */\n\t\t\"before-close\": {\n\t\t\tdetail: {\n\t\t\t\tescPressed: { type: Boolean },\n\t\t\t},\n\t\t},\n\n\t\t/**\n\t\t * Fired after the component is closed. <b>This event does not bubble.</b>\n\t\t *\n\t\t * @public\n\t\t * @event sap.ui.webcomponents.main.Popup#after-close\n\t\t */\n\t\t\"after-close\": {},\n\n\t\t/**\n\t\t * Fired whenever the popup content area is scrolled\n\t\t *\n\t\t * @private\n\t\t * @event sap.ui.webcomponents.main.Popup#scroll\n\t\t */\n\t\t\"scroll\": {},\n\t},\n};\n\nconst createBlockingStyle = () => {\n\tif (!hasStyle(\"data-ui5-popup-scroll-blocker\")) {\n\t\tcreateStyle(globalStyles, \"data-ui5-popup-scroll-blocker\");\n\t}\n};\n\ncreateBlockingStyle();\n\nconst bodyScrollingBlockers = new Set();\n\n/**\n * @class\n * <h3 class=\"comment-api-title\">Overview</h3>\n * Base class for all popup Web Components.\n *\n * If you need to create your own popup-like custom UI5 Web Components, it is highly recommended that you extend\n * at least Popup in order to have consistency with other popups in terms of modal behavior and z-index management.\n *\n * 1. The Popup class handles modality:\n *  - The \"isModal\" getter can be overridden by derivatives to provide their own conditions when they are modal or not\n *  - Derivatives may call the \"blockBodyScrolling\" and \"unblockBodyScrolling\" static methods to temporarily remove scrollbars on the body\n *  - Derivatives may call the \"open\" and \"close\" methods which handle focus, manage the popup registry and for modal popups, manage the blocking layer\n *\n *  2. Provides blocking layer (relevant for modal popups only):\n *   - It is in the static area\n *   - Controlled by the \"open\" and \"close\" methods\n *\n * 3. The Popup class \"traps\" focus:\n *  - Derivatives may call the \"applyInitialFocus\" method (usually when opening, to transfer focus inside the popup)\n *\n * 4. The Popup class automatically assigns \"z-index\"\n *  - Each time a popup is opened, it gets a higher than the previously opened popup z-index\n *\n * 5. The template of this component exposes two inline partials you can override in derivatives:\n *  - beforeContent (upper part of the box, useful for header/title/close button)\n *  - afterContent (lower part, useful for footer/action buttons)\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.Popup\n * @extends sap.ui.webcomponents.base.UI5Element\n * @public\n */\nclass Popup extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get template() {\n\t\treturn PopupTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn PopupBlockLayer;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn staticAreaStyles;\n\t}\n\n\tonEnterDOM() {\n\t\tif (!this.isOpen()) {\n\t\t\tthis._blockLayerHidden = true;\n\t\t}\n\t}\n\n\tonExitDOM() {\n\t\tif (this.isOpen()) {\n\t\t\tPopup.unblockBodyScrolling(this);\n\t\t\tthis._removeOpenedPopup();\n\t\t}\n\t}\n\n\tget _displayProp() {\n\t\treturn \"block\";\n\t}\n\n\t/**\n\t * Prevents the user from interacting with the content under the block layer\n\t */\n\t_preventBlockLayerFocus(event) {\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * Temporarily removes scrollbars from the body\n\t * @protected\n\t */\n\tstatic blockBodyScrolling(popup) {\n\t\tbodyScrollingBlockers.add(popup);\n\n\t\tif (bodyScrollingBlockers.size !== 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (window.pageYOffset > 0) {\n\t\t\tdocument.body.style.top = `-${window.pageYOffset}px`;\n\t\t}\n\t\tdocument.body.classList.add(\"ui5-popup-scroll-blocker\");\n\t}\n\n\t/**\n\t * Restores scrollbars on the body, if needed\n\t * @protected\n\t */\n\tstatic unblockBodyScrolling(popup) {\n\t\tbodyScrollingBlockers.delete(popup);\n\n\t\tif (bodyScrollingBlockers.size !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tdocument.body.classList.remove(\"ui5-popup-scroll-blocker\");\n\t\twindow.scrollTo(0, -parseFloat(document.body.style.top));\n\t\tdocument.body.style.top = \"\";\n\t}\n\n\t_scroll(e) {\n\t\tthis.fireEvent(\"scroll\", {\n\t\t\tscrollTop: e.target.scrollTop,\n\t\t\ttargetRef: e.target,\n\t\t});\n\t}\n\n\t_onkeydown(e) {\n\t\tif (e.target === this._root && isTabPrevious(e)) {\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\t_onfocusout(e) {\n\t\t// relatedTarget is the element, which will get focus. If no such element exists, focus the root.\n\t\t// This happens after the mouse is released in order to not interrupt text selection.\n\t\tif (!e.relatedTarget) {\n\t\t\tthis._shouldFocusRoot = true;\n\t\t}\n\t}\n\n\t_onmousedown(e) {\n\t\tthis._root.removeAttribute(\"tabindex\");\n\n\t\tif (this.shadowRoot.contains(e.target)) {\n\t\t\tthis._shouldFocusRoot = true;\n\t\t} else {\n\t\t\tthis._shouldFocusRoot = false;\n\t\t}\n\t}\n\n\t_onmouseup() {\n\t\tthis._root.tabIndex = -1;\n\t\tif (this._shouldFocusRoot) {\n\t\t\tif (isChrome()) {\n\t\t\t\tthis._root.focus();\n\t\t\t}\n\t\t\tthis._shouldFocusRoot = false;\n\t\t}\n\t}\n\n\t/**\n\t * Focus trapping\n\t * @private\n\t */\n\tasync forwardToFirst() {\n\t\tconst firstFocusable = await getFirstFocusableElement(this);\n\n\t\tif (firstFocusable) {\n\t\t\tfirstFocusable.focus();\n\t\t} else {\n\t\t\tthis._root.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Focus trapping\n\t * @private\n\t */\n\tasync forwardToLast() {\n\t\tconst lastFocusable = await getLastFocusableElement(this);\n\n\t\tif (lastFocusable) {\n\t\t\tlastFocusable.focus();\n\t\t} else {\n\t\t\tthis._root.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Use this method to focus the element denoted by \"initialFocus\", if provided, or the first focusable element otherwise.\n\t * @protected\n\t */\n\tasync applyInitialFocus() {\n\t\tawait this.applyFocus();\n\t}\n\n\t/**\n\t * Focuses the element denoted by <code>initialFocus</code>, if provided,\n\t * or the first focusable element otherwise.\n\t * @public\n\t * @async\n\t * @returns {Promise} Promise that resolves when the focus is applied\n\t */\n\tasync applyFocus() {\n\t\tawait this._waitForDomRef();\n\n\t\tconst element = this.getRootNode().getElementById(this.initialFocus)\n\t\t\t|| document.getElementById(this.initialFocus)\n\t\t\t|| await getFirstFocusableElement(this)\n\t\t\t|| this._root; // in case of no focusable content focus the root\n\n\t\tif (element) {\n\t\t\tif (element === this._root) {\n\t\t\t\telement.tabIndex = -1;\n\t\t\t}\n\t\t\telement.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Tells if the component is opened\n\t * @public\n\t * @returns {boolean}\n\t */\n\tisOpen() {\n\t\treturn this.opened;\n\t}\n\n\tisFocusWithin() {\n\t\treturn isFocusedElementWithinNode(this.shadowRoot.querySelector(\".ui5-popup-root\"));\n\t}\n\n\t/**\n\t * Shows the block layer (for modal popups only) and sets the correct z-index for the purpose of popup stacking\n\t * @protected\n\t */\n\tasync _open(preventInitialFocus) {\n\t\tconst prevented = !this.fireEvent(\"before-open\", {}, true, false);\n\t\tif (prevented) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isModal && !this.shouldHideBackdrop) {\n\t\t\t// create static area item ref for block layer\n\t\t\tthis.getStaticAreaItemDomRef();\n\t\t\tthis._blockLayerHidden = false;\n\t\t\tPopup.blockBodyScrolling(this);\n\t\t}\n\n\t\tthis._zIndex = getNextZIndex();\n\t\tthis.style.zIndex = this._zIndex;\n\t\tthis._focusedElementBeforeOpen = getFocusedElement();\n\n\t\tthis._show();\n\n\t\tif (!this._disableInitialFocus && !preventInitialFocus) {\n\t\t\tthis.applyInitialFocus();\n\t\t}\n\n\t\tthis._addOpenedPopup();\n\n\t\tthis.opened = true;\n\n\t\tawait renderFinished();\n\t\tthis.fireEvent(\"after-open\", {}, false, false);\n\t}\n\n\t/**\n\t * Adds the popup to the \"opened popups registry\"\n\t * @protected\n\t */\n\t_addOpenedPopup() {\n\t\taddOpenedPopup(this);\n\t}\n\n\t/**\n\t * Hides the block layer (for modal popups only)\n\t * @public\n\t */\n\tclose(escPressed = false, preventRegistryUpdate = false, preventFocusRestore = false) {\n\t\tif (!this.opened) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst prevented = !this.fireEvent(\"before-close\", { escPressed }, true, false);\n\t\tif (prevented) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isModal) {\n\t\t\tthis._blockLayerHidden = true;\n\t\t\tPopup.unblockBodyScrolling(this);\n\t\t}\n\n\t\tthis.hide();\n\t\tthis.opened = false;\n\n\t\tif (!preventRegistryUpdate) {\n\t\t\tthis._removeOpenedPopup();\n\t\t}\n\n\t\tif (!this.preventFocusRestore && !preventFocusRestore) {\n\t\t\tthis.resetFocus();\n\t\t}\n\n\t\tthis.fireEvent(\"after-close\", {}, false, false);\n\t}\n\n\t/**\n\t * Removes the popup from the \"opened popups registry\"\n\t * @protected\n\t */\n\t_removeOpenedPopup() {\n\t\tremoveOpenedPopup(this);\n\t}\n\n\t/**\n\t * Returns the focus to the previously focused element\n\t * @protected\n\t */\n\tresetFocus() {\n\t\tif (!this._focusedElementBeforeOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._focusedElementBeforeOpen.focus();\n\t\tthis._focusedElementBeforeOpen = null;\n\t}\n\n\t/**\n\t * Sets \"block\" display to the popup. The property can be overriden by derivatives of Popup.\n\t * @protected\n\t */\n\t_show() {\n\t\tthis.style.display = this._displayProp;\n\t}\n\n\t/**\n\t * Sets \"none\" display to the popup\n\t * @protected\n\t */\n\thide() {\n\t\tthis.style.display = \"none\";\n\t}\n\n\t/**\n\t * Implement this getter with relevant logic regarding the modality of the popup (e.g. based on a public property)\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {boolean}\n\t */\n\tget isModal() {} // eslint-disable-line\n\n\t/**\n\t * Implement this getter with relevant logic in order to hide the block layer (f.e. based on a public property)\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {boolean}\n\t */\n\tget shouldHideBackdrop() {} // eslint-disable-line\n\n\t/**\n\t * Return the ID of an element in the shadow DOM that is going to label this popup\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {String}\n\t */\n\tget _ariaLabelledBy() {} // eslint-disable-line\n\n\t/**\n\t * Return the value for aria-modal for this popup\n\t *\n\t * @protected\n\t * @abstract\n\t * @returns {String}\n\t */\n\tget _ariaModal() {} // eslint-disable-line\n\n\t/**\n\t * Ensures ariaLabel is never null or empty string\n\t * @returns {String|undefined}\n\t * @protected\n\t */\n\tget _ariaLabel() {\n\t\treturn getEffectiveAriaLabelText(this);\n\t}\n\n\tget _root() {\n\t\treturn this.shadowRoot.querySelector(\".ui5-popup-root\");\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\troot: {},\n\t\t\tcontent: {},\n\t\t\tblockLayer: {\n\t\t\t\t\"zIndex\": (this._zIndex - 1),\n\t\t\t},\n\t\t};\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\troot: {\n\t\t\t\t\"ui5-popup-root\": true,\n\t\t\t},\n\t\t\tcontent: {\n\t\t\t\t\"ui5-popup-content\": true,\n\t\t\t},\n\t\t};\n\t}\n}\n\nexport default Popup;\n"]},"metadata":{},"sourceType":"module"}