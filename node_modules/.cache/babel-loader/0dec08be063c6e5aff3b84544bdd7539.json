{"ast":null,"code":"import _toConsumableArray from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport { isShow, isBackSpace, isLeft, isRight, isRightCtrl, isHome, isEnd } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { MULTIINPUT_ROLEDESCRIPTION_TEXT } from \"./generated/i18n/i18n-defaults.js\";\nimport Input from \"./Input.js\";\nimport MultiInputTemplate from \"./generated/templates/MultiInputTemplate.lit.js\";\nimport styles from \"./generated/themes/MultiInput.css.js\";\nimport Token from \"./Token.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Icon from \"./Icon.js\";\n/**\n * @public\n */\n\nvar metadata = {\n  tag: \"ui5-multi-input\",\n  properties:\n  /** @lends sap.ui.webcomponents.main.MultiInput.prototype */\n  {\n    /**\n     * Determines whether a value help icon will be visualized in the end of the input.\n     * Pressing the icon will fire <code>value-help-trigger</code> event.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    showValueHelpIcon: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n     * @private\n     */\n    expandedTokenizer: {\n      type: Boolean\n    }\n  },\n  slots:\n  /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */\n  {\n    /**\n     * Defines the component tokens.\n     *\n     * @type {sap.ui.webcomponents.main.IToken[]}\n     * @slot\n     * @public\n     */\n    tokens: {\n      type: HTMLElement\n    }\n  },\n  events:\n  /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */\n  {\n    /**\n     * Fired when the value help icon is pressed\n     * and F4 or ALT/OPTION + ARROW_UP/ARROW_DOWN keyboard keys are used.\n     *\n     * @event sap.ui.webcomponents.main.MultiInput#value-help-trigger\n     * @public\n     */\n    \"value-help-trigger\": {},\n\n    /**\n     * Fired when a token is about to be deleted.\n     *\n     * @event sap.ui.webcomponents.main.MultiInput#token-delete\n     * @param {HTMLElement} token deleted token.\n     * @public\n     */\n    \"token-delete\": {\n      detail: {\n        token: {\n          type: HTMLElement\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n * <h3>Overview</h3>\n * A <code>ui5-multi-input</code> field allows the user to enter multiple values, which are displayed as <code>ui5-token</code>.\n *\n * User can choose interaction for creating tokens.\n * Fiori Guidelines say that user should create tokens when:\n * <ul>\n * <li>Type a value in the input and press enter or focus out the input field (<code>change</code> event is fired)\n * <li>Select a value from the suggestion list</li> (<code>suggestion-item-select</code> event is fired)\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiInput\";</code>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiInput\n * @extends Input\n * @tagname ui5-multi-input\n * @appenddocs Token\n * @since 1.0.0-rc.9\n * @public\n */\n\nvar MultiInput = /*#__PURE__*/function (_Input) {\n  _inherits(MultiInput, _Input);\n\n  var _super = _createSuper(MultiInput);\n\n  function MultiInput() {\n    var _this;\n\n    _classCallCheck(this, MultiInput);\n\n    _this = _super.call(this); // Prevent suggestions' opening.\n\n    _this._skipOpenSuggestions = false;\n    return _this;\n  }\n\n  _createClass(MultiInput, [{\n    key: \"valueHelpPress\",\n    value: function valueHelpPress(event) {\n      this.closePopover();\n      this.fireEvent(\"value-help-trigger\", {});\n    }\n  }, {\n    key: \"showMorePress\",\n    value: function showMorePress(event) {\n      this.expandedTokenizer = false;\n      this.focus();\n    }\n  }, {\n    key: \"tokenDelete\",\n    value: function tokenDelete(event) {\n      var _this2 = this;\n\n      var focusedToken = event.detail.ref;\n      var selectedTokens = this.tokens.filter(function (token) {\n        return token.selected;\n      });\n\n      if (selectedTokens.indexOf(focusedToken) === -1) {\n        selectedTokens.push(focusedToken);\n      }\n\n      selectedTokens.forEach(function (token) {\n        _this2.fireEvent(\"token-delete\", {\n          token: token\n        });\n      });\n      this.focus();\n    }\n  }, {\n    key: \"valueHelpMouseDown\",\n    value: function valueHelpMouseDown(event) {\n      this.closePopover();\n      this.tokenizer.closeMorePopover();\n      this._valueHelpIconPressed = true;\n      event.target.focus();\n    }\n  }, {\n    key: \"_tokenizerFocusOut\",\n    value: function _tokenizerFocusOut(event) {\n      if (!this.contains(event.relatedTarget)) {\n        this.tokenizer._tokens.forEach(function (token) {\n          token.selected = false;\n        });\n\n        this.tokenizer.scrollToStart();\n      }\n    }\n  }, {\n    key: \"valueHelpMouseUp\",\n    value: function valueHelpMouseUp(event) {\n      var _this3 = this;\n\n      setTimeout(function () {\n        _this3._valueHelpIconPressed = false;\n      }, 0);\n    }\n  }, {\n    key: \"innerFocusIn\",\n    value: function innerFocusIn() {\n      this.expandedTokenizer = true;\n    }\n  }, {\n    key: \"_onkeydown\",\n    value: function _onkeydown(event) {\n      _get(_getPrototypeOf(MultiInput.prototype), \"_onkeydown\", this).call(this, event);\n\n      var isHomeInBeginning = isHome(event) && event.target.selectionStart === 0;\n\n      if (isLeft(event) || isHomeInBeginning) {\n        this._skipOpenSuggestions = true; // Prevent input focus when navigating through the tokens.\n\n        return this._handleLeft(event);\n      }\n\n      this._skipOpenSuggestions = false;\n\n      if (isBackSpace(event) && event.target.value === \"\") {\n        event.preventDefault();\n\n        this.tokenizer._focusLastToken();\n      }\n\n      if (isShow(event)) {\n        this.valueHelpPress();\n      }\n    }\n  }, {\n    key: \"_onTokenizerKeydown\",\n    value: function _onTokenizerKeydown(event) {\n      var _this4 = this;\n\n      var rightCtrl = isRightCtrl(event);\n      var isCtrl = !!(event.metaKey || event.ctrlKey);\n      var tokens = this.tokens;\n\n      if (isRight(event) || isEnd(event) || rightCtrl) {\n        event.preventDefault();\n        var lastTokenIndex = this.tokens.length - 1;\n\n        if (event.target === this.tokens[lastTokenIndex] && this.tokens[lastTokenIndex] === document.activeElement) {\n          setTimeout(function () {\n            _this4.focus();\n          }, 0);\n        } else if (rightCtrl) {\n          event.preventDefault();\n          return this.tokenizer._handleArrowCtrl(event.target, this.tokens, true);\n        }\n      }\n\n      this.tokenizer._handleItemNavigation(event, tokens);\n\n      if (isCtrl && [\"c\", \"x\"].includes(event.key.toLowerCase())) {\n        event.preventDefault();\n        var isCut = event.key.toLowerCase() === \"x\";\n        var selectedTokens = tokens.filter(function (token) {\n          return token.selected;\n        });\n\n        if (isCut) {\n          var cutResult = this.tokenizer._fillClipboard(\"cut\", selectedTokens);\n\n          selectedTokens.forEach(function (token) {\n            _this4.fireEvent(\"token-delete\", {\n              token: token\n            });\n          });\n          this.focus();\n          return cutResult;\n        }\n\n        return this.tokenizer._fillClipboard(\"copy\", selectedTokens);\n      }\n    }\n  }, {\n    key: \"_handleLeft\",\n    value: function _handleLeft() {\n      var cursorPosition = this.getDomRef().querySelector(\"input\").selectionStart;\n      var tokens = this.tokens;\n      var lastToken = tokens.length && tokens[tokens.length - 1];\n\n      if (cursorPosition === 0 && lastToken) {\n        // this.tokenizer._focusLastToken(); won't work as the tokens in the MultiInput use different slot and are not resolved properly\n        lastToken.focus();\n\n        this.tokenizer._itemNav.setCurrentItem(lastToken);\n      }\n    }\n  }, {\n    key: \"_onfocusout\",\n    value: function _onfocusout(event) {\n      _get(_getPrototypeOf(MultiInput.prototype), \"_onfocusout\", this).call(this, event);\n\n      var relatedTarget = event.relatedTarget;\n      var insideDOM = this.contains(relatedTarget);\n      var insideShadowDom = this.shadowRoot.contains(relatedTarget);\n\n      if (!insideDOM && !insideShadowDom) {\n        this.expandedTokenizer = false;\n      }\n    }\n    /**\n     * @override\n     */\n\n  }, {\n    key: \"_onfocusin\",\n    value: function () {\n      var _onfocusin2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var inputDomRef;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.getInputDOMRef();\n\n              case 2:\n                inputDomRef = _context.sent;\n\n                if (!(event.target === inputDomRef)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 6;\n                return _get(_getPrototypeOf(MultiInput.prototype), \"_onfocusin\", this).call(this, event);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _onfocusin(_x) {\n        return _onfocusin2.apply(this, arguments);\n      }\n\n      return _onfocusin;\n    }()\n  }, {\n    key: \"shouldOpenSuggestions\",\n    value: function shouldOpenSuggestions() {\n      var parent = _get(_getPrototypeOf(MultiInput.prototype), \"shouldOpenSuggestions\", this).call(this);\n\n      var valueHelpPressed = this._valueHelpIconPressed;\n      var nonEmptyValue = this.value !== \"\";\n      return parent && nonEmptyValue && !valueHelpPressed && !this._skipOpenSuggestions;\n    }\n  }, {\n    key: \"lastItemDeleted\",\n    value: function lastItemDeleted() {\n      var _this5 = this;\n\n      setTimeout(function () {\n        _this5.focus();\n      }, 0);\n    }\n  }, {\n    key: \"tokenizer\",\n    get: function get() {\n      return this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n    }\n  }, {\n    key: \"_tokensCountText\",\n    get: function get() {\n      if (!this.tokenizer) {\n        return;\n      }\n\n      return this.tokenizer._tokensCountText();\n    }\n  }, {\n    key: \"_tokensCountTextId\",\n    get: function get() {\n      return \"\".concat(this._id, \"-hiddenText-nMore\");\n    }\n    /**\n     * Returns the placeholder value when there are no tokens.\n     * @protected\n     */\n\n  }, {\n    key: \"_placeholder\",\n    get: function get() {\n      if (this.tokenizer && this.tokenizer._tokens.length) {\n        return \"\";\n      }\n\n      return this.placeholder;\n    }\n  }, {\n    key: \"accInfo\",\n    get: function get() {\n      var ariaDescribedBy = \"\".concat(this._tokensCountTextId, \" \").concat(this.suggestionsTextId, \" \").concat(this.valueStateTextId).trim();\n      return {\n        \"input\": _objectSpread(_objectSpread({}, _get(_getPrototypeOf(MultiInput.prototype), \"accInfo\", this).input), {}, {\n          \"ariaRoledescription\": this.ariaRoleDescription,\n          \"ariaDescribedBy\": ariaDescribedBy\n        })\n      };\n    }\n  }, {\n    key: \"ariaRoleDescription\",\n    get: function get() {\n      return MultiInput.i18nBundle.getText(MULTIINPUT_ROLEDESCRIPTION_TEXT);\n    }\n  }], [{\n    key: \"metadata\",\n    get: function get() {\n      return metadata;\n    }\n  }, {\n    key: \"render\",\n    get: function get() {\n      return litRender;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return MultiInputTemplate;\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      return [Input.styles, styles];\n    }\n  }, {\n    key: \"dependencies\",\n    get: function get() {\n      return [].concat(_toConsumableArray(Input.dependencies), [Tokenizer, Token, Icon]);\n    }\n  }]);\n\n  return MultiInput;\n}(Input);\n\nMultiInput.define();\nexport default MultiInput;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/MultiInput.js"],"names":["litRender","isShow","isBackSpace","isLeft","isRight","isRightCtrl","isHome","isEnd","MULTIINPUT_ROLEDESCRIPTION_TEXT","Input","MultiInputTemplate","styles","Token","Tokenizer","Icon","metadata","tag","properties","showValueHelpIcon","type","Boolean","expandedTokenizer","slots","tokens","HTMLElement","events","detail","token","MultiInput","_skipOpenSuggestions","event","closePopover","fireEvent","focus","focusedToken","ref","selectedTokens","filter","selected","indexOf","push","forEach","tokenizer","closeMorePopover","_valueHelpIconPressed","target","contains","relatedTarget","_tokens","scrollToStart","setTimeout","isHomeInBeginning","selectionStart","_handleLeft","value","preventDefault","_focusLastToken","valueHelpPress","rightCtrl","isCtrl","metaKey","ctrlKey","lastTokenIndex","length","document","activeElement","_handleArrowCtrl","_handleItemNavigation","includes","key","toLowerCase","isCut","cutResult","_fillClipboard","cursorPosition","getDomRef","querySelector","lastToken","_itemNav","setCurrentItem","insideDOM","insideShadowDom","shadowRoot","getInputDOMRef","inputDomRef","parent","valueHelpPressed","nonEmptyValue","_tokensCountText","_id","placeholder","ariaDescribedBy","_tokensCountTextId","suggestionsTextId","valueStateTextId","trim","input","ariaRoleDescription","i18nBundle","getText","dependencies","define"],"mappings":"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","sourcesContent":["import litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport {\n\tisShow,\n\tisBackSpace,\n\tisLeft,\n\tisRight,\n\tisRightCtrl,\n\tisHome,\n\tisEnd,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { MULTIINPUT_ROLEDESCRIPTION_TEXT } from \"./generated/i18n/i18n-defaults.js\";\nimport Input from \"./Input.js\";\nimport MultiInputTemplate from \"./generated/templates/MultiInputTemplate.lit.js\";\nimport styles from \"./generated/themes/MultiInput.css.js\";\nimport Token from \"./Token.js\";\nimport Tokenizer from \"./Tokenizer.js\";\nimport Icon from \"./Icon.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-multi-input\",\n\tproperties: /** @lends sap.ui.webcomponents.main.MultiInput.prototype */ {\n\t\t/**\n\t\t * Determines whether a value help icon will be visualized in the end of the input.\n\t\t * Pressing the icon will fire <code>value-help-trigger</code> event.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tshowValueHelpIcon: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the tokenizer is expanded or collapsed(shows the n more label)\n\t\t * @private\n\t\t */\n\t\texpandedTokenizer: {\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\tslots: /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */ {\n\t\t/**\n\t\t * Defines the component tokens.\n\t\t *\n\t\t * @type {sap.ui.webcomponents.main.IToken[]}\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\ttokens: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\t},\n\tevents: /** @lends  sap.ui.webcomponents.main.MultiInput.prototype */ {\n\t\t/**\n\t\t * Fired when the value help icon is pressed\n\t\t * and F4 or ALT/OPTION + ARROW_UP/ARROW_DOWN keyboard keys are used.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiInput#value-help-trigger\n\t\t * @public\n\t\t */\n\t\t\"value-help-trigger\": {},\n\n\t\t/**\n\t\t * Fired when a token is about to be deleted.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.MultiInput#token-delete\n\t\t * @param {HTMLElement} token deleted token.\n\t\t * @public\n\t\t */\n\t\t\"token-delete\": {\n\t\t\tdetail: {\n\t\t\t\ttoken: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n * <h3>Overview</h3>\n * A <code>ui5-multi-input</code> field allows the user to enter multiple values, which are displayed as <code>ui5-token</code>.\n *\n * User can choose interaction for creating tokens.\n * Fiori Guidelines say that user should create tokens when:\n * <ul>\n * <li>Type a value in the input and press enter or focus out the input field (<code>change</code> event is fired)\n * <li>Select a value from the suggestion list</li> (<code>suggestion-item-select</code> event is fired)\n * </ul>\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/MultiInput\";</code>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.MultiInput\n * @extends Input\n * @tagname ui5-multi-input\n * @appenddocs Token\n * @since 1.0.0-rc.9\n * @public\n */\nclass MultiInput extends Input {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn MultiInputTemplate;\n\t}\n\n\tstatic get styles() {\n\t\treturn [Input.styles, styles];\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\n\t\t// Prevent suggestions' opening.\n\t\tthis._skipOpenSuggestions = false;\n\t}\n\n\tvalueHelpPress(event) {\n\t\tthis.closePopover();\n\t\tthis.fireEvent(\"value-help-trigger\", {});\n\t}\n\n\tshowMorePress(event) {\n\t\tthis.expandedTokenizer = false;\n\t\tthis.focus();\n\t}\n\n\ttokenDelete(event) {\n\t\tconst focusedToken = event.detail.ref;\n\t\tconst selectedTokens = this.tokens.filter(token => token.selected);\n\n\t\tif (selectedTokens.indexOf(focusedToken) === -1) {\n\t\t\tselectedTokens.push(focusedToken);\n\t\t}\n\n\t\tselectedTokens.forEach(token => {\n\t\t\tthis.fireEvent(\"token-delete\", { token });\n\t\t});\n\n\t\tthis.focus();\n\t}\n\n\tvalueHelpMouseDown(event) {\n\t\tthis.closePopover();\n\t\tthis.tokenizer.closeMorePopover();\n\t\tthis._valueHelpIconPressed = true;\n\t\tevent.target.focus();\n\t}\n\n\t_tokenizerFocusOut(event) {\n\t\tif (!this.contains(event.relatedTarget)) {\n\t\t\tthis.tokenizer._tokens.forEach(token => { token.selected = false; });\n\t\t\tthis.tokenizer.scrollToStart();\n\t\t}\n\t}\n\n\tvalueHelpMouseUp(event) {\n\t\tsetTimeout(() => {\n\t\t\tthis._valueHelpIconPressed = false;\n\t\t}, 0);\n\t}\n\n\tinnerFocusIn() {\n\t\tthis.expandedTokenizer = true;\n\t}\n\n\t_onkeydown(event) {\n\t\tsuper._onkeydown(event);\n\n\t\tconst isHomeInBeginning = isHome(event) && event.target.selectionStart === 0;\n\n\t\tif (isLeft(event) || isHomeInBeginning) {\n\t\t\tthis._skipOpenSuggestions = true; // Prevent input focus when navigating through the tokens.\n\n\t\t\treturn this._handleLeft(event);\n\t\t}\n\n\t\tthis._skipOpenSuggestions = false;\n\t\tif (isBackSpace(event) && event.target.value === \"\") {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis.tokenizer._focusLastToken();\n\t\t}\n\n\t\tif (isShow(event)) {\n\t\t\tthis.valueHelpPress();\n\t\t}\n\t}\n\n\t_onTokenizerKeydown(event) {\n\t\tconst rightCtrl = isRightCtrl(event);\n\t\tconst isCtrl = !!(event.metaKey || event.ctrlKey);\n\t\tconst tokens = this.tokens;\n\n\t\tif (isRight(event) || isEnd(event) || rightCtrl) {\n\t\t\tevent.preventDefault();\n\t\t\tconst lastTokenIndex = this.tokens.length - 1;\n\n\t\t\tif (event.target === this.tokens[lastTokenIndex] && this.tokens[lastTokenIndex] === document.activeElement) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.focus();\n\t\t\t\t}, 0);\n\t\t\t} else if (rightCtrl) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn this.tokenizer._handleArrowCtrl(event.target, this.tokens, true);\n\t\t\t}\n\t\t}\n\n\t\tthis.tokenizer._handleItemNavigation(event, tokens);\n\n\t\tif (isCtrl && [\"c\", \"x\"].includes(event.key.toLowerCase())) {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isCut = event.key.toLowerCase() === \"x\";\n\t\t\tconst selectedTokens = tokens.filter(token => token.selected);\n\n\t\t\tif (isCut) {\n\t\t\t\tconst cutResult = this.tokenizer._fillClipboard(\"cut\", selectedTokens);\n\n\t\t\t\tselectedTokens.forEach(token => {\n\t\t\t\t\tthis.fireEvent(\"token-delete\", { token });\n\t\t\t\t});\n\n\t\t\t\tthis.focus();\n\n\t\t\t\treturn cutResult;\n\t\t\t}\n\n\t\t\treturn this.tokenizer._fillClipboard(\"copy\", selectedTokens);\n\t\t}\n\t}\n\n\t_handleLeft() {\n\t\tconst cursorPosition = this.getDomRef().querySelector(`input`).selectionStart;\n\t\tconst tokens = this.tokens;\n\t\tconst lastToken = tokens.length && tokens[tokens.length - 1];\n\n\t\tif (cursorPosition === 0 && lastToken) {\n\t\t\t// this.tokenizer._focusLastToken(); won't work as the tokens in the MultiInput use different slot and are not resolved properly\n\t\t\tlastToken.focus();\n\t\t\tthis.tokenizer._itemNav.setCurrentItem(lastToken);\n\t\t}\n\t}\n\n\t_onfocusout(event) {\n\t\tsuper._onfocusout(event);\n\t\tconst relatedTarget = event.relatedTarget;\n\t\tconst insideDOM = this.contains(relatedTarget);\n\t\tconst insideShadowDom = this.shadowRoot.contains(relatedTarget);\n\n\t\tif (!insideDOM && !insideShadowDom) {\n\t\t\tthis.expandedTokenizer = false;\n\t\t}\n\t}\n\n\t/**\n\t * @override\n\t */\n\tasync _onfocusin(event) {\n\t\tconst inputDomRef = await this.getInputDOMRef();\n\n\t\tif (event.target === inputDomRef) {\n\t\t\tawait super._onfocusin(event);\n\t\t}\n\t}\n\n\tshouldOpenSuggestions() {\n\t\tconst parent = super.shouldOpenSuggestions();\n\t\tconst valueHelpPressed = this._valueHelpIconPressed;\n\t\tconst nonEmptyValue = this.value !== \"\";\n\n\t\treturn parent && nonEmptyValue && !valueHelpPressed && !this._skipOpenSuggestions;\n\t}\n\n\tlastItemDeleted() {\n\t\tsetTimeout(() => {\n\t\t\tthis.focus();\n\t\t}, 0);\n\t}\n\n\tget tokenizer() {\n\t\treturn this.shadowRoot.querySelector(\"[ui5-tokenizer]\");\n\t}\n\n\tget _tokensCountText() {\n\t\tif (!this.tokenizer) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.tokenizer._tokensCountText();\n\t}\n\n\tget _tokensCountTextId() {\n\t\treturn `${this._id}-hiddenText-nMore`;\n\t}\n\n\t/**\n\t * Returns the placeholder value when there are no tokens.\n\t * @protected\n\t */\n\tget _placeholder() {\n\t\tif (this.tokenizer && this.tokenizer._tokens.length) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn this.placeholder;\n\t}\n\n\tget accInfo() {\n\t\tconst ariaDescribedBy = `${this._tokensCountTextId} ${this.suggestionsTextId} ${this.valueStateTextId}`.trim();\n\t\treturn {\n\t\t\t\"input\": {\n\t\t\t\t...super.accInfo.input,\n\t\t\t\t\"ariaRoledescription\": this.ariaRoleDescription,\n\t\t\t\t\"ariaDescribedBy\": ariaDescribedBy,\n\t\t\t},\n\t\t};\n\t}\n\n\tget ariaRoleDescription() {\n\t\treturn MultiInput.i18nBundle.getText(MULTIINPUT_ROLEDESCRIPTION_TEXT);\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\t...Input.dependencies,\n\t\t\tTokenizer,\n\t\t\tToken,\n\t\t\tIcon,\n\t\t];\n\t}\n}\n\nMultiInput.define();\n\nexport default MultiInput;\n"]},"metadata":{},"sourceType":"module"}