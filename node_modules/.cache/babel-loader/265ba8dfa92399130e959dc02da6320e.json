{"ast":null,"code":"import _regeneratorRuntime from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/flo/Desktop/mdao.fioriapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getThemeProperties, getRegisteredPackages, isThemeRegistered } from \"../asset-registries/Themes.js\";\nimport { removeStyle, createOrUpdateStyle } from \"../ManagedStyles.js\";\nimport getThemeDesignerTheme from \"./getThemeDesignerTheme.js\";\nimport { fireThemeLoaded } from \"./ThemeLoaded.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\nvar BASE_THEME_PACKAGE = \"@ui5/webcomponents-theming\";\n\nvar isThemeBaseRegistered = function isThemeBaseRegistered() {\n  var registeredPackages = getRegisteredPackages();\n  return registeredPackages.has(BASE_THEME_PACKAGE);\n};\n\nvar loadThemeBase = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(theme) {\n    var cssData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (isThemeBaseRegistered()) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            _context.next = 4;\n            return getThemeProperties(BASE_THEME_PACKAGE, theme);\n\n          case 4:\n            cssData = _context.sent;\n\n            if (cssData) {\n              createOrUpdateStyle(cssData, \"data-ui5-theme-properties\", BASE_THEME_PACKAGE);\n            }\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function loadThemeBase(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar deleteThemeBase = function deleteThemeBase() {\n  removeStyle(\"data-ui5-theme-properties\", BASE_THEME_PACKAGE);\n};\n\nvar loadComponentPackages = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(theme) {\n    var registeredPackages;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            registeredPackages = getRegisteredPackages();\n            registeredPackages.forEach( /*#__PURE__*/function () {\n              var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(packageName) {\n                var cssData;\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        if (!(packageName === BASE_THEME_PACKAGE)) {\n                          _context2.next = 2;\n                          break;\n                        }\n\n                        return _context2.abrupt(\"return\");\n\n                      case 2:\n                        _context2.next = 4;\n                        return getThemeProperties(packageName, theme);\n\n                      case 4:\n                        cssData = _context2.sent;\n\n                        if (cssData) {\n                          createOrUpdateStyle(cssData, \"data-ui5-theme-properties\", packageName);\n                        }\n\n                      case 6:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function loadComponentPackages(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar detectExternalTheme = function detectExternalTheme() {\n  // If theme designer theme is detected, use this\n  var extTheme = getThemeDesignerTheme();\n\n  if (extTheme) {\n    return extTheme;\n  } // If OpenUI5Support is enabled, try to find out if it loaded variables\n\n\n  var OpenUI5Support = getFeature(\"OpenUI5Support\");\n\n  if (OpenUI5Support) {\n    var varsLoaded = OpenUI5Support.cssVariablesLoaded();\n\n    if (varsLoaded) {\n      return {\n        themeName: OpenUI5Support.getConfigurationSettingsObject().theme // just themeName, baseThemeName is only relevant for custom themes\n\n      };\n    }\n  }\n};\n\nvar applyTheme = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(theme) {\n    var extTheme, packagesTheme;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            extTheme = detectExternalTheme(); // Only load theme_base properties if there is no externally loaded theme, or there is, but it is not being loaded\n\n            if (!(!extTheme || theme !== extTheme.themeName)) {\n              _context4.next = 6;\n              break;\n            }\n\n            _context4.next = 4;\n            return loadThemeBase(theme);\n\n          case 4:\n            _context4.next = 7;\n            break;\n\n          case 6:\n            deleteThemeBase();\n\n          case 7:\n            // Always load component packages properties. For non-registered themes, try with the base theme, if any\n            packagesTheme = isThemeRegistered(theme) ? theme : extTheme && extTheme.baseThemeName;\n            _context4.next = 10;\n            return loadComponentPackages(packagesTheme);\n\n          case 10:\n            fireThemeLoaded(theme);\n\n          case 11:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function applyTheme(_x4) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexport default applyTheme;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents-base/dist/theming/applyTheme.js"],"names":["getThemeProperties","getRegisteredPackages","isThemeRegistered","removeStyle","createOrUpdateStyle","getThemeDesignerTheme","fireThemeLoaded","getFeature","BASE_THEME_PACKAGE","isThemeBaseRegistered","registeredPackages","has","loadThemeBase","theme","cssData","deleteThemeBase","loadComponentPackages","forEach","packageName","detectExternalTheme","extTheme","OpenUI5Support","varsLoaded","cssVariablesLoaded","themeName","getConfigurationSettingsObject","applyTheme","packagesTheme","baseThemeName"],"mappings":"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","sourcesContent":["import { getThemeProperties, getRegisteredPackages, isThemeRegistered } from \"../asset-registries/Themes.js\";\nimport { removeStyle, createOrUpdateStyle } from \"../ManagedStyles.js\";\nimport getThemeDesignerTheme from \"./getThemeDesignerTheme.js\";\nimport { fireThemeLoaded } from \"./ThemeLoaded.js\";\nimport { getFeature } from \"../FeaturesRegistry.js\";\n\nconst BASE_THEME_PACKAGE = \"@ui5/webcomponents-theming\";\n\nconst isThemeBaseRegistered = () => {\n\tconst registeredPackages = getRegisteredPackages();\n\treturn registeredPackages.has(BASE_THEME_PACKAGE);\n};\n\nconst loadThemeBase = async theme => {\n\tif (!isThemeBaseRegistered()) {\n\t\treturn;\n\t}\n\n\tconst cssData = await getThemeProperties(BASE_THEME_PACKAGE, theme);\n\tif (cssData) {\n\t\tcreateOrUpdateStyle(cssData, \"data-ui5-theme-properties\", BASE_THEME_PACKAGE);\n\t}\n};\n\nconst deleteThemeBase = () => {\n\tremoveStyle(\"data-ui5-theme-properties\", BASE_THEME_PACKAGE);\n};\n\nconst loadComponentPackages = async theme => {\n\tconst registeredPackages = getRegisteredPackages();\n\tregisteredPackages.forEach(async packageName => {\n\t\tif (packageName === BASE_THEME_PACKAGE) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cssData = await getThemeProperties(packageName, theme);\n\t\tif (cssData) {\n\t\t\tcreateOrUpdateStyle(cssData, \"data-ui5-theme-properties\", packageName);\n\t\t}\n\t});\n};\n\nconst detectExternalTheme = () => {\n\t// If theme designer theme is detected, use this\n\tconst extTheme = getThemeDesignerTheme();\n\tif (extTheme) {\n\t\treturn extTheme;\n\t}\n\n\t// If OpenUI5Support is enabled, try to find out if it loaded variables\n\tconst OpenUI5Support = getFeature(\"OpenUI5Support\");\n\tif (OpenUI5Support) {\n\t\tconst varsLoaded = OpenUI5Support.cssVariablesLoaded();\n\t\tif (varsLoaded) {\n\t\t\treturn {\n\t\t\t\tthemeName: OpenUI5Support.getConfigurationSettingsObject().theme, // just themeName, baseThemeName is only relevant for custom themes\n\t\t\t};\n\t\t}\n\t}\n};\n\nconst applyTheme = async theme => {\n\tconst extTheme = detectExternalTheme();\n\n\t// Only load theme_base properties if there is no externally loaded theme, or there is, but it is not being loaded\n\tif (!extTheme || theme !== extTheme.themeName) {\n\t\tawait loadThemeBase(theme);\n\t} else {\n\t\tdeleteThemeBase();\n\t}\n\n\t// Always load component packages properties. For non-registered themes, try with the base theme, if any\n\tconst packagesTheme = isThemeRegistered(theme) ? theme : extTheme && extTheme.baseThemeName;\n\tawait loadComponentPackages(packagesTheme);\n\n\tfireThemeLoaded(theme);\n};\n\nexport default applyTheme;\n"]},"metadata":{},"sourceType":"module"}