{"ast":null,"code":"import { isEscape } from \"@ui5/webcomponents-base/dist/Keys.js\";\nlet openedRegistry = [];\n\nconst addOpenedPopup = (instance, parentPopovers = []) => {\n  if (!openedRegistry.includes(instance)) {\n    openedRegistry.push({\n      instance,\n      parentPopovers\n    });\n  }\n\n  if (openedRegistry.length === 1) {\n    attachGlobalListener();\n  }\n};\n\nconst removeOpenedPopup = instance => {\n  openedRegistry = openedRegistry.filter(el => {\n    return el.instance !== instance;\n  });\n\n  if (!openedRegistry.length) {\n    detachGlobalListener();\n  }\n};\n\nconst getOpenedPopups = () => {\n  return [...openedRegistry];\n};\n\nconst _keydownListener = event => {\n  if (!openedRegistry.length) {\n    return;\n  }\n\n  if (isEscape(event)) {\n    openedRegistry.pop().instance.close(true);\n  }\n};\n\nconst attachGlobalListener = () => {\n  document.addEventListener(\"keydown\", _keydownListener);\n};\n\nconst detachGlobalListener = () => {\n  document.removeEventListener(\"keydown\", _keydownListener);\n};\n\nexport { addOpenedPopup, removeOpenedPopup, getOpenedPopups };","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/popup-utils/OpenedPopupsRegistry.js"],"names":["isEscape","openedRegistry","addOpenedPopup","instance","parentPopovers","includes","push","length","attachGlobalListener","removeOpenedPopup","filter","el","detachGlobalListener","getOpenedPopups","_keydownListener","event","pop","close","document","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,QAAT,QAAyB,sCAAzB;AAEA,IAAIC,cAAc,GAAG,EAArB;;AAEA,MAAMC,cAAc,GAAG,CAACC,QAAD,EAAWC,cAAc,GAAG,EAA5B,KAAmC;AACzD,MAAI,CAACH,cAAc,CAACI,QAAf,CAAwBF,QAAxB,CAAL,EAAwC;AACvCF,IAAAA,cAAc,CAACK,IAAf,CAAoB;AACnBH,MAAAA,QADmB;AAEnBC,MAAAA;AAFmB,KAApB;AAIA;;AAED,MAAIH,cAAc,CAACM,MAAf,KAA0B,CAA9B,EAAiC;AAChCC,IAAAA,oBAAoB;AACpB;AACD,CAXD;;AAaA,MAAMC,iBAAiB,GAAGN,QAAQ,IAAI;AACrCF,EAAAA,cAAc,GAAGA,cAAc,CAACS,MAAf,CAAsBC,EAAE,IAAI;AAC5C,WAAOA,EAAE,CAACR,QAAH,KAAgBA,QAAvB;AACA,GAFgB,CAAjB;;AAIA,MAAI,CAACF,cAAc,CAACM,MAApB,EAA4B;AAC3BK,IAAAA,oBAAoB;AACpB;AACD,CARD;;AAUA,MAAMC,eAAe,GAAG,MAAM;AAC7B,SAAO,CAAC,GAAGZ,cAAJ,CAAP;AACA,CAFD;;AAIA,MAAMa,gBAAgB,GAAGC,KAAK,IAAI;AACjC,MAAI,CAACd,cAAc,CAACM,MAApB,EAA4B;AAC3B;AACA;;AAED,MAAIP,QAAQ,CAACe,KAAD,CAAZ,EAAqB;AACpBd,IAAAA,cAAc,CAACe,GAAf,GAAqBb,QAArB,CAA8Bc,KAA9B,CAAoC,IAApC;AACA;AACD,CARD;;AAUA,MAAMT,oBAAoB,GAAG,MAAM;AAClCU,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqCL,gBAArC;AACA,CAFD;;AAIA,MAAMF,oBAAoB,GAAG,MAAM;AAClCM,EAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwCN,gBAAxC;AACA,CAFD;;AAIA,SAASZ,cAAT,EAAyBO,iBAAzB,EAA4CI,eAA5C","sourcesContent":["import { isEscape } from \"@ui5/webcomponents-base/dist/Keys.js\";\n\nlet openedRegistry = [];\n\nconst addOpenedPopup = (instance, parentPopovers = []) => {\n\tif (!openedRegistry.includes(instance)) {\n\t\topenedRegistry.push({\n\t\t\tinstance,\n\t\t\tparentPopovers,\n\t\t});\n\t}\n\n\tif (openedRegistry.length === 1) {\n\t\tattachGlobalListener();\n\t}\n};\n\nconst removeOpenedPopup = instance => {\n\topenedRegistry = openedRegistry.filter(el => {\n\t\treturn el.instance !== instance;\n\t});\n\n\tif (!openedRegistry.length) {\n\t\tdetachGlobalListener();\n\t}\n};\n\nconst getOpenedPopups = () => {\n\treturn [...openedRegistry];\n};\n\nconst _keydownListener = event => {\n\tif (!openedRegistry.length) {\n\t\treturn;\n\t}\n\n\tif (isEscape(event)) {\n\t\topenedRegistry.pop().instance.close(true);\n\t}\n};\n\nconst attachGlobalListener = () => {\n\tdocument.addEventListener(\"keydown\", _keydownListener);\n};\n\nconst detachGlobalListener = () => {\n\tdocument.removeEventListener(\"keydown\", _keydownListener);\n};\n\nexport { addOpenedPopup, removeOpenedPopup, getOpenedPopups };\n"]},"metadata":{},"sourceType":"module"}