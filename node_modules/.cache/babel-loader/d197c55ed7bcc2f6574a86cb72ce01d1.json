{"ast":null,"code":"import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { isSpace, isEnter } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport TableMode from \"./types/TableMode.js\";\nimport TableRowType from \"./types/TableRowType.js\";\nimport TableRowTemplate from \"./generated/templates/TableRowTemplate.lit.js\";\nimport { ARIA_LABEL_ROW_SELECTION } from \"./generated/i18n/i18n-defaults.js\"; // Styles\n\nimport styles from \"./generated/themes/TableRow.css.js\";\n/**\n * @public\n */\n\nconst metadata = {\n  tag: \"ui5-table-row\",\n  managedSlots: true,\n  slots:\n  /** @lends sap.ui.webcomponents.main.TableRow.prototype */\n  {\n    /**\n     * Defines the cells of the component.\n     * <br><br>\n     * <b>Note:</b> Use <code>ui5-table-cell</code> for the intended design.\n     *\n     * @type {sap.ui.webcomponents.main.ITableCell[]}\n     * @slot cells\n     * @public\n     */\n    \"default\": {\n      propertyName: \"cells\",\n      type: HTMLElement,\n      individualSlots: true\n    }\n  },\n  properties:\n  /** @lends sap.ui.webcomponents.main.TableRow.prototype */\n  {\n    /**\n     * Defines the mode of the row (None, SingleSelect, MultiSelect).\n     * @type {TableMode}\n     * @defaultvalue \"None\"\n     * @since 1.0.0-rc.15\n     * @private\n     */\n    mode: {\n      type: TableMode,\n      defaultValue: TableMode.None\n    },\n\n    /**\n     * Defines the visual indication and behavior of the component.\n     * <br><br>\n     * Available options are:\n     * <ul>\n     * <li><code>Active</code></li>\n     * <li><code>Inactive</code></li>\n     * </ul>\n     * <br><br>\n     * <b>Note:</b> When set to <code>Active</code>, the item will provide visual response upon press,\n     * while with type <code>Inactive</code> - will not.\n     *\n     * @type {TableRowType}\n     * @defaultvalue \"Inactive\"\n     * @since 1.0.0-rc.15\n     * @public\n    */\n    type: {\n      type: TableRowType,\n      defaultValue: TableRowType.Inactive\n    },\n\n    /**\n     * Defines the row's selected state.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @since 1.0.0-rc.15\n     * @public\n     */\n    selected: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates if the table row is active.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @since 1.0.0-rc.15\n     * @private\n    */\n    active: {\n      type: Boolean\n    },\n    _columnsInfo: {\n      type: Object,\n      multiple: true\n    },\n    _tabIndex: {\n      type: String,\n      defaultValue: \"-1\"\n    },\n    _busy: {\n      type: Boolean\n    },\n    _ariaPosition: {\n      type: String,\n      defaultValue: \"\",\n      noAttribute: true\n    }\n  },\n  events:\n  /** @lends sap.ui.webcomponents.main.TableRow.prototype */\n  {\n    /**\n     * Fired when a row in <code>Active</code> mode is clicked or <code>Enter</code> key is pressed.\n     *\n     * @event sap.ui.webcomponents.main.TableRow#row-click\n     * @since 1.0.0-rc.15\n     * @private\n     */\n    \"row-click\": {},\n    _focused: {},\n\n    /**\n     * Fired on selection change of an active row.\n     *\n     * @event sap.ui.webcomponents.main.TableRow#selection-requested\n     * @since 1.0.0-rc.15\n     * @private\n     */\n    \"selection-requested\": {}\n  }\n};\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-table-row</code> component represents a row in the <code>ui5-table</code>.\n *\n * <h3>CSS Shadow Parts</h3>\n *\n * <ui5-link target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/::part\">CSS Shadow Parts</ui5-link> allow developers to style elements inside the Shadow DOM.\n * <br>\n * The <code>ui5-table-row</code> exposes the following CSS Shadow Parts:\n * <ul>\n * <li>row - Used to style the native <code>tr</code> element</li>\n * <li>popin-row - Used to style the <code>tr</code> element when a row pops in</li>\n * </ul>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.TableRow\n * @extends sap.ui.webcomponents.base.UI5Element\n * @tagname ui5-table-row\n * @implements sap.ui.webcomponents.main.ITableRow\n * @public\n */\n\nclass TableRow extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n\n  static get styles() {\n    return styles;\n  }\n\n  static get render() {\n    return litRender;\n  }\n\n  static get template() {\n    return TableRowTemplate;\n  }\n\n  _onmouseup() {\n    this.deactivate();\n  }\n\n  _onkeydown(event) {\n    const itemActive = this.type === TableRowType.Active;\n    const isSingleSelect = this.isSingleSelect;\n    const itemSelectable = isSingleSelect || this.isMultiSelect;\n    const isRowFocused = this._getActiveElementTagName() === \"ui5-table-row\";\n    const checkboxPressed = event.target.classList.contains(\"ui5-multi-select-checkbox\");\n\n    if (isSpace(event) && event.target.tagName.toLowerCase() === \"tr\") {\n      event.preventDefault();\n    }\n\n    if (isRowFocused && !checkboxPressed) {\n      if (isSpace(event) && itemSelectable || isEnter(event) && isSingleSelect) {\n        this.fireEvent(\"selection-requested\", {\n          row: this\n        });\n      }\n\n      if (isEnter(event) && itemActive) {\n        this.fireEvent(\"row-click\", {\n          row: this\n        });\n\n        if (!isSingleSelect) {\n          this.activate();\n        }\n      }\n    }\n  }\n\n  _onkeyup(event) {\n    if (isSpace(event) || isEnter(event)) {\n      this.deactivate();\n    }\n  }\n\n  _ontouchstart(event) {\n    this.activate();\n  }\n\n  _ontouchend() {\n    this.deactivate();\n  }\n\n  _onfocusout() {\n    this.deactivate();\n  }\n\n  _onfocusin(event, forceSelfFocus = false) {\n    if (forceSelfFocus || this._getActiveElementTagName() === \"ui5-table-cell\") {\n      this.shadowRoot.querySelector(\".ui5-table-row-root\").focus();\n      this.activate();\n    }\n\n    this.fireEvent(\"_focused\", event);\n  }\n\n  _onrowclick(event) {\n    const checkboxPressed = event.target.classList.contains(\"ui5-multi-select-checkbox\"); // If the user tab over a button on IOS device, the document.activeElement\n    // is the ui5-table-row. The check below ensure that, if a button within the row is pressed,\n    // the row will not be selected.\n\n    if (event.isMarked === \"button\") {\n      return;\n    }\n\n    if (!this.contains(this.getRootNode().activeElement)) {\n      // If the user clickes on non-focusable element within the ui5-table-cell,\n      // the focus goes to the body, se we have to bring it back to the row.\n      // If the user clicks on input, button or similar clickable element,\n      // the focus remains on that element.\n      this._onfocusin(event, true\n      /* force row focus */\n      );\n\n      this.deactivate();\n    }\n\n    if (this._getActiveElementTagName() === \"ui5-table-row\") {\n      if (this.isSingleSelect) {\n        this._handleSelection();\n      }\n\n      if (this.type === TableRowType.Active && !checkboxPressed) {\n        this.fireEvent(\"row-click\", {\n          row: this\n        });\n      }\n    }\n  }\n\n  _handleSelection() {\n    this.fireEvent(\"selection-requested\", {\n      row: this\n    });\n  }\n\n  _getActiveElementTagName() {\n    return this.getRootNode().activeElement.localName.toLocaleLowerCase();\n  }\n\n  activate() {\n    if (this.type === TableRowType.Active) {\n      this.active = true;\n    }\n  }\n\n  deactivate() {\n    if (this.active) {\n      this.active = false;\n    }\n  }\n\n  get shouldPopin() {\n    return this._columnsInfo.filter(el => {\n      return el.demandPopin || !el.visible;\n    }).length;\n  }\n\n  get allColumnsPoppedIn() {\n    return this._columnsInfo.every(el => el.demandPopin && !el.visible);\n  }\n\n  onBeforeRendering() {\n    if (!this.shouldPopin) {\n      return;\n    }\n\n    this.visibleCells = [];\n    this.popinCells = [];\n\n    if (this.cells.length === 0) {\n      return;\n    }\n\n    const allColumnsPoppedInClass = this.allColumnsPoppedIn ? \"all-columns-popped-in\" : \"\";\n\n    this._columnsInfo.forEach((info, index) => {\n      const cell = this.cells[index];\n\n      if (!cell) {\n        return;\n      }\n\n      if (info.visible) {\n        this.visibleCells.push(cell);\n        cell.popined = false;\n      } else if (info.demandPopin) {\n        const popinHeaderClass = this.popinCells.length === 0 ? \"popin-header\" : \"\";\n        this.popinCells.push({\n          cell,\n          popinText: info.popinText,\n          classes: `ui5-table-popin-row ${allColumnsPoppedInClass} ${popinHeaderClass}`\n        });\n        cell.popined = true;\n      } else {\n        cell.popined = false;\n      }\n    }, this);\n\n    const lastVisibleCell = this.visibleCells[this.visibleCells.length - 1];\n\n    if (lastVisibleCell) {\n      lastVisibleCell.lastInRow = true;\n    }\n  }\n\n  get visibleCellsCount() {\n    let visibleCellsCount = this.visibleCells.length;\n\n    if (this.isMultiSelect) {\n      visibleCellsCount += 1;\n    }\n\n    return visibleCellsCount;\n  }\n\n  get ariaLabelText() {\n    const ariaLabel = this.cells.map((cell, index) => {\n      const columText = this.getColumnTextByIdx(index);\n      const cellText = this.getCellText(cell);\n      return `${columText} ${cellText}`;\n    }).join(\" \");\n    return `${ariaLabel}. ${this._ariaPosition}`;\n  }\n\n  get ariaLabelRowSelection() {\n    return TableRow.i18nBundle.getText(ARIA_LABEL_ROW_SELECTION);\n  }\n\n  get isSingleSelect() {\n    return this.mode === \"SingleSelect\";\n  }\n\n  get isMultiSelect() {\n    return this.mode === \"MultiSelect\";\n  }\n\n  getCellText(cell) {\n    return this.getNormilzedTextContent(cell.textContent);\n  }\n\n  getColumnTextByIdx(index) {\n    const columnInfo = this._columnsInfo[index];\n\n    if (!columnInfo) {\n      return \"\";\n    }\n\n    return this.getNormilzedTextContent(columnInfo.text);\n  }\n\n  getNormilzedTextContent(textContent) {\n    return textContent.replace(/[\\n\\r\\t]/g, \"\").trim();\n  }\n\n  static async onDefine() {\n    TableRow.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n\n}\n\nTableRow.define();\nexport default TableRow;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/TableRow.js"],"names":["UI5Element","isSpace","isEnter","getI18nBundle","litRender","TableMode","TableRowType","TableRowTemplate","ARIA_LABEL_ROW_SELECTION","styles","metadata","tag","managedSlots","slots","propertyName","type","HTMLElement","individualSlots","properties","mode","defaultValue","None","Inactive","selected","Boolean","active","_columnsInfo","Object","multiple","_tabIndex","String","_busy","_ariaPosition","noAttribute","events","_focused","TableRow","render","template","_onmouseup","deactivate","_onkeydown","event","itemActive","Active","isSingleSelect","itemSelectable","isMultiSelect","isRowFocused","_getActiveElementTagName","checkboxPressed","target","classList","contains","tagName","toLowerCase","preventDefault","fireEvent","row","activate","_onkeyup","_ontouchstart","_ontouchend","_onfocusout","_onfocusin","forceSelfFocus","shadowRoot","querySelector","focus","_onrowclick","isMarked","getRootNode","activeElement","_handleSelection","localName","toLocaleLowerCase","shouldPopin","filter","el","demandPopin","visible","length","allColumnsPoppedIn","every","onBeforeRendering","visibleCells","popinCells","cells","allColumnsPoppedInClass","forEach","info","index","cell","push","popined","popinHeaderClass","popinText","classes","lastVisibleCell","lastInRow","visibleCellsCount","ariaLabelText","ariaLabel","map","columText","getColumnTextByIdx","cellText","getCellText","join","ariaLabelRowSelection","i18nBundle","getText","getNormilzedTextContent","textContent","columnInfo","text","replace","trim","onDefine","define"],"mappings":"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","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport { isSpace, isEnter } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport TableMode from \"./types/TableMode.js\";\nimport TableRowType from \"./types/TableRowType.js\";\nimport TableRowTemplate from \"./generated/templates/TableRowTemplate.lit.js\";\nimport { ARIA_LABEL_ROW_SELECTION } from \"./generated/i18n/i18n-defaults.js\";\n\n// Styles\nimport styles from \"./generated/themes/TableRow.css.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-table-row\",\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.TableRow.prototype */ {\n\t\t/**\n\t\t * Defines the cells of the component.\n\t\t * <br><br>\n\t\t * <b>Note:</b> Use <code>ui5-table-cell</code> for the intended design.\n\t\t *\n\t\t * @type {sap.ui.webcomponents.main.ITableCell[]}\n\t\t * @slot cells\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\tpropertyName: \"cells\",\n\t\t\ttype: HTMLElement,\n\t\t\tindividualSlots: true,\n\t\t},\n\t},\n\tproperties: /** @lends sap.ui.webcomponents.main.TableRow.prototype */ {\n\t\t/**\n\t\t * Defines the mode of the row (None, SingleSelect, MultiSelect).\n\t\t * @type {TableMode}\n\t\t * @defaultvalue \"None\"\n\t\t * @since 1.0.0-rc.15\n\t\t * @private\n\t\t */\n\t\tmode: {\n\t\t\ttype: TableMode,\n\t\t\tdefaultValue: TableMode.None,\n\t\t},\n\t\t/**\n\t\t * Defines the visual indication and behavior of the component.\n\t\t * <br><br>\n\t\t * Available options are:\n\t\t * <ul>\n\t\t * <li><code>Active</code></li>\n\t\t * <li><code>Inactive</code></li>\n\t\t * </ul>\n\t\t * <br><br>\n\t\t * <b>Note:</b> When set to <code>Active</code>, the item will provide visual response upon press,\n\t\t * while with type <code>Inactive</code> - will not.\n\t\t *\n\t\t * @type {TableRowType}\n\t\t * @defaultvalue \"Inactive\"\n\t\t * @since 1.0.0-rc.15\n\t\t * @public\n\t\t*/\n\t\ttype: {\n\t\t\ttype: TableRowType,\n\t\t\tdefaultValue: TableRowType.Inactive,\n\t\t},\n\n\t\t/**\n\t\t * Defines the row's selected state.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @since 1.0.0-rc.15\n\t\t * @public\n\t\t */\n\t\tselected: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates if the table row is active.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @since 1.0.0-rc.15\n\t\t * @private\n\t\t*/\n\t\tactive: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t_columnsInfo: {\n\t\t\ttype: Object,\n\t\t\tmultiple: true,\n\t\t},\n\t\t_tabIndex: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"-1\",\n\t\t},\n\t\t_busy: {\n\t\t\ttype: Boolean,\n\t\t},\n\t\t_ariaPosition: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t\tnoAttribute: true,\n\t\t},\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.TableRow.prototype */ {\n\t\t/**\n\t\t * Fired when a row in <code>Active</code> mode is clicked or <code>Enter</code> key is pressed.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.TableRow#row-click\n\t\t * @since 1.0.0-rc.15\n\t\t * @private\n\t\t */\n\t\t\"row-click\": {},\n\t\t_focused: {},\n\t\t/**\n\t\t * Fired on selection change of an active row.\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.TableRow#selection-requested\n\t\t * @since 1.0.0-rc.15\n\t\t * @private\n\t\t */\n\t\t\"selection-requested\": {},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-table-row</code> component represents a row in the <code>ui5-table</code>.\n *\n * <h3>CSS Shadow Parts</h3>\n *\n * <ui5-link target=\"_blank\" href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/::part\">CSS Shadow Parts</ui5-link> allow developers to style elements inside the Shadow DOM.\n * <br>\n * The <code>ui5-table-row</code> exposes the following CSS Shadow Parts:\n * <ul>\n * <li>row - Used to style the native <code>tr</code> element</li>\n * <li>popin-row - Used to style the <code>tr</code> element when a row pops in</li>\n * </ul>\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.TableRow\n * @extends sap.ui.webcomponents.base.UI5Element\n * @tagname ui5-table-row\n * @implements sap.ui.webcomponents.main.ITableRow\n * @public\n */\nclass TableRow extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get styles() {\n\t\treturn styles;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get template() {\n\t\treturn TableRowTemplate;\n\t}\n\n\t_onmouseup() {\n\t\tthis.deactivate();\n\t}\n\n\t_onkeydown(event) {\n\t\tconst itemActive = this.type === TableRowType.Active;\n\t\tconst isSingleSelect = this.isSingleSelect;\n\t\tconst itemSelectable = isSingleSelect || this.isMultiSelect;\n\t\tconst isRowFocused = this._getActiveElementTagName() === \"ui5-table-row\";\n\t\tconst checkboxPressed = event.target.classList.contains(\"ui5-multi-select-checkbox\");\n\n\t\tif (isSpace(event) && event.target.tagName.toLowerCase() === \"tr\") {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (isRowFocused && !checkboxPressed) {\n\t\t\tif ((isSpace(event) && itemSelectable) || (isEnter(event) && isSingleSelect)) {\n\t\t\t\tthis.fireEvent(\"selection-requested\", { row: this });\n\t\t\t}\n\n\t\t\tif (isEnter(event) && itemActive) {\n\t\t\t\tthis.fireEvent(\"row-click\", { row: this });\n\t\t\t\tif (!isSingleSelect) {\n\t\t\t\t\tthis.activate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_onkeyup(event) {\n\t\tif (isSpace(event) || isEnter(event)) {\n\t\t\tthis.deactivate();\n\t\t}\n\t}\n\n\t_ontouchstart(event) {\n\t\tthis.activate();\n\t}\n\n\t_ontouchend() {\n\t\tthis.deactivate();\n\t}\n\n\t_onfocusout() {\n\t\tthis.deactivate();\n\t}\n\n\t_onfocusin(event, forceSelfFocus = false) {\n\t\tif (forceSelfFocus || this._getActiveElementTagName() === \"ui5-table-cell\") {\n\t\t\tthis.shadowRoot.querySelector(\".ui5-table-row-root\").focus();\n\t\t\tthis.activate();\n\t\t}\n\n\t\tthis.fireEvent(\"_focused\", event);\n\t}\n\n\t_onrowclick(event) {\n\t\tconst checkboxPressed = event.target.classList.contains(\"ui5-multi-select-checkbox\");\n\t\t// If the user tab over a button on IOS device, the document.activeElement\n\t\t// is the ui5-table-row. The check below ensure that, if a button within the row is pressed,\n\t\t// the row will not be selected.\n\t\tif (event.isMarked === \"button\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.contains(this.getRootNode().activeElement)) {\n\t\t\t// If the user clickes on non-focusable element within the ui5-table-cell,\n\t\t\t// the focus goes to the body, se we have to bring it back to the row.\n\t\t\t// If the user clicks on input, button or similar clickable element,\n\t\t\t// the focus remains on that element.\n\t\t\tthis._onfocusin(event, true /* force row focus */);\n\t\t\tthis.deactivate();\n\t\t}\n\n\t\tif (this._getActiveElementTagName() === \"ui5-table-row\") {\n\t\t\tif (this.isSingleSelect) {\n\t\t\t\tthis._handleSelection();\n\t\t\t}\n\n\t\t\tif (this.type === TableRowType.Active && !checkboxPressed) {\n\t\t\t\tthis.fireEvent(\"row-click\", { row: this });\n\t\t\t}\n\t\t}\n\t}\n\n\t_handleSelection() {\n\t\tthis.fireEvent(\"selection-requested\", { row: this });\n\t}\n\n\t_getActiveElementTagName() {\n\t\treturn this.getRootNode().activeElement.localName.toLocaleLowerCase();\n\t}\n\n\tactivate() {\n\t\tif (this.type === TableRowType.Active) {\n\t\t\tthis.active = true;\n\t\t}\n\t}\n\n\tdeactivate() {\n\t\tif (this.active) {\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tget shouldPopin() {\n\t\treturn this._columnsInfo.filter(el => {\n\t\t\treturn el.demandPopin || !el.visible;\n\t\t}).length;\n\t}\n\n\tget allColumnsPoppedIn() {\n\t\treturn this._columnsInfo.every(el => el.demandPopin && !el.visible);\n\t}\n\n\tonBeforeRendering() {\n\t\tif (!this.shouldPopin) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.visibleCells = [];\n\t\tthis.popinCells = [];\n\n\t\tif (this.cells.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst allColumnsPoppedInClass = this.allColumnsPoppedIn ? \"all-columns-popped-in\" : \"\";\n\t\tthis._columnsInfo.forEach((info, index) => {\n\t\t\tconst cell = this.cells[index];\n\n\t\t\tif (!cell) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (info.visible) {\n\t\t\t\tthis.visibleCells.push(cell);\n\t\t\t\tcell.popined = false;\n\t\t\t} else if (info.demandPopin) {\n\t\t\t\tconst popinHeaderClass = this.popinCells.length === 0 ? \"popin-header\" : \"\";\n\t\t\t\tthis.popinCells.push({\n\t\t\t\t\tcell,\n\t\t\t\t\tpopinText: info.popinText,\n\t\t\t\t\tclasses: `ui5-table-popin-row ${allColumnsPoppedInClass} ${popinHeaderClass}`,\n\t\t\t\t});\n\n\t\t\t\tcell.popined = true;\n\t\t\t} else {\n\t\t\t\tcell.popined = false;\n\t\t\t}\n\t\t}, this);\n\n\t\tconst lastVisibleCell = this.visibleCells[this.visibleCells.length - 1];\n\n\t\tif (lastVisibleCell) {\n\t\t\tlastVisibleCell.lastInRow = true;\n\t\t}\n\t}\n\n\tget visibleCellsCount() {\n\t\tlet visibleCellsCount = this.visibleCells.length;\n\n\t\tif (this.isMultiSelect) {\n\t\t\tvisibleCellsCount += 1;\n\t\t}\n\n\t\treturn visibleCellsCount;\n\t}\n\n\tget ariaLabelText() {\n\t\tconst ariaLabel = this.cells.map((cell, index) => {\n\t\t\tconst columText = this.getColumnTextByIdx(index);\n\t\t\tconst cellText = this.getCellText(cell);\n\t\t\treturn `${columText} ${cellText}`;\n\t\t}).join(\" \");\n\t\treturn `${ariaLabel}. ${this._ariaPosition}`;\n\t}\n\n\tget ariaLabelRowSelection() {\n\t\treturn TableRow.i18nBundle.getText(ARIA_LABEL_ROW_SELECTION);\n\t}\n\n\tget isSingleSelect() {\n\t\treturn this.mode === \"SingleSelect\";\n\t}\n\n\tget isMultiSelect() {\n\t\treturn this.mode === \"MultiSelect\";\n\t}\n\n\tgetCellText(cell) {\n\t\treturn this.getNormilzedTextContent(cell.textContent);\n\t}\n\n\tgetColumnTextByIdx(index) {\n\t\tconst columnInfo = this._columnsInfo[index];\n\n\t\tif (!columnInfo) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn this.getNormilzedTextContent(columnInfo.text);\n\t}\n\n\tgetNormilzedTextContent(textContent) {\n\t\treturn textContent.replace(/[\\n\\r\\t]/g, \"\").trim();\n\t}\n\n\tstatic async onDefine() {\n\t\tTableRow.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n}\n\nTableRow.define();\n\nexport default TableRow;\n"]},"metadata":{},"sourceType":"module"}