{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport AbstractExpandedDecoder from './AbstractExpandedDecoder';\n\nvar AI01decoder = function (_super) {\n  __extends(AI01decoder, _super);\n\n  function AI01decoder(information) {\n    return _super.call(this, information) || this;\n  }\n\n  AI01decoder.prototype.encodeCompressedGtin = function (buf, currentPos) {\n    buf.append('(01)');\n    var initialPosition = buf.length();\n    buf.append('9');\n    this.encodeCompressedGtinWithoutAI(buf, currentPos, initialPosition);\n  };\n\n  AI01decoder.prototype.encodeCompressedGtinWithoutAI = function (buf, currentPos, initialBufferPosition) {\n    for (var i = 0; i < 4; ++i) {\n      var currentBlock = this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos + 10 * i, 10);\n\n      if (currentBlock / 100 === 0) {\n        buf.append('0');\n      }\n\n      if (currentBlock / 10 === 0) {\n        buf.append('0');\n      }\n\n      buf.append(currentBlock);\n    }\n\n    AI01decoder.appendCheckDigit(buf, initialBufferPosition);\n  };\n\n  AI01decoder.appendCheckDigit = function (buf, currentPos) {\n    var checkDigit = 0;\n\n    for (var i = 0; i < 13; i++) {\n      // let digit = buf.charAt(i + currentPos) - '0';\n      // To be checked\n      var digit = buf.charAt(i + currentPos).charCodeAt(0) - '0'.charCodeAt(0);\n      checkDigit += (i & 0x01) === 0 ? 3 * digit : digit;\n    }\n\n    checkDigit = 10 - checkDigit % 10;\n\n    if (checkDigit === 10) {\n      checkDigit = 0;\n    }\n\n    buf.append(checkDigit);\n  };\n\n  AI01decoder.GTIN_SIZE = 40;\n  return AI01decoder;\n}(AbstractExpandedDecoder);\n\nexport default AI01decoder;","map":{"version":3,"sources":["../../../../../../../src/core/oned/rss/expanded/decoders/AI01decoder.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAEA,OAAO,uBAAP,MAAoC,2BAApC;;AAEA,IAAA,WAAA,GAAA,UAAA,MAAA,EAAA;AAAkD,EAAA,SAAA,CAAA,WAAA,EAAA,MAAA,CAAA;;AAIhD,WAAA,WAAA,CAAY,WAAZ,EAAiC;WAC/B,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,WAAN,KAAkB,I;AACnB;;AAED,EAAA,WAAA,CAAA,SAAA,CAAA,oBAAA,GAAA,UAAqB,GAArB,EAAyC,UAAzC,EAA2D;AACzD,IAAA,GAAG,CAAC,MAAJ,CAAW,MAAX;AACA,QAAI,eAAe,GAAG,GAAG,CAAC,MAAJ,EAAtB;AACA,IAAA,GAAG,CAAC,MAAJ,CAAW,GAAX;AAEA,SAAK,6BAAL,CAAmC,GAAnC,EAAwC,UAAxC,EAAoD,eAApD;AACD,GAND;;AAQA,EAAA,WAAA,CAAA,SAAA,CAAA,6BAAA,GAAA,UAA8B,GAA9B,EAAkD,UAAlD,EAAsE,qBAAtE,EAAmG;AACjG,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,CAApB,EAAuB,EAAE,CAAzB,EAA4B;AAC1B,UAAI,YAAY,GAAG,KAAK,iBAAL,GAAyB,+BAAzB,CAAyD,UAAU,GAAG,KAAK,CAA3E,EAA8E,EAA9E,CAAnB;;AACA,UAAI,YAAY,GAAG,GAAf,KAAuB,CAA3B,EAA8B;AAC5B,QAAA,GAAG,CAAC,MAAJ,CAAW,GAAX;AACD;;AACD,UAAI,YAAY,GAAG,EAAf,KAAsB,CAA1B,EAA6B;AAC3B,QAAA,GAAG,CAAC,MAAJ,CAAW,GAAX;AACD;;AACD,MAAA,GAAG,CAAC,MAAJ,CAAW,YAAX;AACD;;AAED,IAAA,WAAW,CAAC,gBAAZ,CAA6B,GAA7B,EAAkC,qBAAlC;AACD,GAbD;;AAee,EAAA,WAAA,CAAA,gBAAA,GAAf,UAAgC,GAAhC,EAAoD,UAApD,EAAsE;AACpE,QAAI,UAAU,GAAG,CAAjB;;AACA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,EAApB,EAAwB,CAAC,EAAzB,EAA6B;AAC3B;AACA;AACA,UAAI,KAAK,GAAG,GAAG,CAAC,MAAJ,CAAW,CAAC,GAAG,UAAf,EAA2B,UAA3B,CAAsC,CAAtC,IAA2C,IAAI,UAAJ,CAAe,CAAf,CAAvD;AACA,MAAA,UAAU,IAAI,CAAC,CAAC,GAAG,IAAL,MAAe,CAAf,GAAmB,IAAI,KAAvB,GAA+B,KAA7C;AACD;;AAED,IAAA,UAAU,GAAG,KAAM,UAAU,GAAG,EAAhC;;AACA,QAAI,UAAU,KAAK,EAAnB,EAAuB;AACrB,MAAA,UAAU,GAAG,CAAb;AACD;;AAED,IAAA,GAAG,CAAC,MAAJ,CAAW,UAAX;AACD,GAfc;;AA7BC,EAAA,WAAA,CAAA,SAAA,GAAoB,EAApB;AA8ClB,SAAA,WAAA;AAAC,CAhDD,CAAkD,uBAAlD,CAAA;;eAA8B,W","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport AbstractExpandedDecoder from './AbstractExpandedDecoder';\nvar AI01decoder = /** @class */ (function (_super) {\n    __extends(AI01decoder, _super);\n    function AI01decoder(information) {\n        return _super.call(this, information) || this;\n    }\n    AI01decoder.prototype.encodeCompressedGtin = function (buf, currentPos) {\n        buf.append('(01)');\n        var initialPosition = buf.length();\n        buf.append('9');\n        this.encodeCompressedGtinWithoutAI(buf, currentPos, initialPosition);\n    };\n    AI01decoder.prototype.encodeCompressedGtinWithoutAI = function (buf, currentPos, initialBufferPosition) {\n        for (var i = 0; i < 4; ++i) {\n            var currentBlock = this.getGeneralDecoder().extractNumericValueFromBitArray(currentPos + 10 * i, 10);\n            if (currentBlock / 100 === 0) {\n                buf.append('0');\n            }\n            if (currentBlock / 10 === 0) {\n                buf.append('0');\n            }\n            buf.append(currentBlock);\n        }\n        AI01decoder.appendCheckDigit(buf, initialBufferPosition);\n    };\n    AI01decoder.appendCheckDigit = function (buf, currentPos) {\n        var checkDigit = 0;\n        for (var i = 0; i < 13; i++) {\n            // let digit = buf.charAt(i + currentPos) - '0';\n            // To be checked\n            var digit = buf.charAt(i + currentPos).charCodeAt(0) - '0'.charCodeAt(0);\n            checkDigit += (i & 0x01) === 0 ? 3 * digit : digit;\n        }\n        checkDigit = 10 - (checkDigit % 10);\n        if (checkDigit === 10) {\n            checkDigit = 0;\n        }\n        buf.append(checkDigit);\n    };\n    AI01decoder.GTIN_SIZE = 40;\n    return AI01decoder;\n}(AbstractExpandedDecoder));\nexport default AI01decoder;\n//# sourceMappingURL=AI01decoder.js.map"]},"metadata":{},"sourceType":"module"}