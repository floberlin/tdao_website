{"ast":null,"code":"import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isPhone, isSafari } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport announce from \"@ui5/webcomponents-base/dist/util/InvisibleMessage.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/not-editable.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport { isBackSpace, isDelete, isShow, isUp, isDown, isEnter, isEscape, isTabNext, isTabPrevious, isPageUp, isPageDown, isHome, isEnd } from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport * as Filters from \"./ComboBoxFilters.js\";\nimport { VALUE_STATE_SUCCESS, VALUE_STATE_ERROR, VALUE_STATE_WARNING, VALUE_STATE_INFORMATION, INPUT_SUGGESTIONS_TITLE, SELECT_OPTIONS, LIST_ITEM_POSITION, LIST_ITEM_SELECTED } from \"./generated/i18n/i18n-defaults.js\"; // Templates\n\nimport ComboBoxTemplate from \"./generated/templates/ComboBoxTemplate.lit.js\";\nimport ComboBoxPopoverTemplate from \"./generated/templates/ComboBoxPopoverTemplate.lit.js\"; // Styles\n\nimport ComboBoxCss from \"./generated/themes/ComboBox.css.js\";\nimport ComboBoxPopoverCss from \"./generated/themes/ComboBoxPopover.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\nimport ComboBoxItem from \"./ComboBoxItem.js\";\nimport Icon from \"./Icon.js\";\nimport Popover from \"./Popover.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport BusyIndicator from \"./BusyIndicator.js\";\nimport Button from \"./Button.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ComboBoxGroupItem from \"./ComboBoxGroupItem.js\";\n/**\n * @public\n */\n\nconst metadata = {\n  tag: \"ui5-combobox\",\n  languageAware: true,\n  properties:\n  /** @lends sap.ui.webcomponents.main.ComboBox.prototype */\n  {\n    /**\n     * Defines the value of the component.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    value: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * Defines the \"live\" value of the component.\n     * <br><br>\n     * <b>Note:</b> If we have an item e.g. \"Bulgaria\", \"B\" is typed, \"ulgaria\" is typed ahead, value will be \"Bulgaria\", filterValue will be \"B\".\n     *\n     * <br><br>\n     * <b>Note:</b> Initially the filter value is synced with value.\n     *\n     * @type {string}\n     * @defaultvalue \"\"\n     * @private\n     */\n    filterValue: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * Defines a short hint intended to aid the user with data entry when the\n     * component has no value.\n     * @type {string}\n     * @defaultvalue \"\"\n     * @public\n     */\n    placeholder: {\n      type: String,\n      defaultValue: \"\"\n    },\n\n    /**\n     * Defines whether the component is in disabled state.\n     * <br><br>\n     * <b>Note:</b> A disabled component is completely noninteractive.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    disabled: {\n      type: Boolean\n    },\n\n    /**\n     * Defines the value state of the component.\n     * <br><br>\n     * Available options are:\n     * <ul>\n     * <li><code>None</code></li>\n     * <li><code>Error</code></li>\n     * <li><code>Warning</code></li>\n     * <li><code>Success</code></li>\n     * <li><code>Information</code></li>\n     * </ul>\n     *\n     * @type {ValueState}\n     * @defaultvalue \"None\"\n     * @public\n     */\n    valueState: {\n      type: ValueState,\n      defaultValue: ValueState.None\n    },\n\n    /**\n     * Defines whether the component is read-only.\n     * <br><br>\n     * <b>Note:</b> A read-only component is not editable,\n     * but still provides visual feedback upon user interaction.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    readonly: {\n      type: Boolean\n    },\n\n    /**\n     * Defines whether the component is required.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    required: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether a loading indicator should be shown in the picker.\n     *\n     * @type {boolean}\n     * @defaultvalue false\n     * @public\n     */\n    loading: {\n      type: Boolean\n    },\n\n    /**\n     * Defines the filter type of the component.\n     * Available options are: <code>StartsWithPerTerm</code>, <code>StartsWith</code> and <code>Contains</code>.\n     *\n     * @type {string}\n     * @defaultvalue \"StartsWithPerTerm\"\n     * @public\n     */\n    filter: {\n      type: String,\n      defaultValue: \"StartsWithPerTerm\"\n    },\n\n    /**\n     * Indicates whether the input is focssed\n     * @private\n     */\n    focused: {\n      type: Boolean\n    },\n\n    /**\n     * Indicates whether the visual focus is on the value state header\n     * @private\n     */\n    _isValueStateFocused: {\n      type: Boolean\n    },\n\n    /**\n     * Sets the accessible aria name of the component.\n     *\n     * @type {String}\n     * @defaultvalue: \"\"\n     * @public\n     * @since 1.0.0-rc.15\n     */\n    accessibleName: {\n      type: String,\n      defaultValue: undefined\n    },\n\n    /**\n     * Receives id(or many ids) of the elements that label the component\n     * @type {String}\n     * @defaultvalue \"\"\n     * @public\n     * @since 1.0.0-rc.15\n     */\n    accessibleNameRef: {\n      type: String,\n      defaultValue: \"\"\n    },\n    _iconPressed: {\n      type: Boolean,\n      noAttribute: true\n    },\n    _filteredItems: {\n      type: Object\n    },\n    _listWidth: {\n      type: Integer,\n      defaultValue: 0,\n      noAttribute: true\n    }\n  },\n  managedSlots: true,\n  slots:\n  /** @lends sap.ui.webcomponents.main.ComboBox.prototype */\n  {\n    /**\n     * Defines the component items.\n     *\n     * @type {sap.ui.webcomponents.main.IComboBoxItem[]}\n     * @slot items\n     * @public\n     */\n    \"default\": {\n      propertyName: \"items\",\n      type: HTMLElement,\n      invalidateOnChildChange: true\n    },\n\n    /**\n     * Defines the value state message that will be displayed as pop up under the component.\n     * <br><br>\n     *\n     * <b>Note:</b> If not specified, a default text (in the respective language) will be displayed.\n     * <br>\n     * <b>Note:</b> The <code>valueStateMessage</code> would be displayed,\n     * when the <code>ui5-combobox</code> is in <code>Information</code>, <code>Warning</code> or <code>Error</code> value state.\n     * @type {HTMLElement[]}\n     * @since 1.0.0-rc.9\n     * @slot\n     * @public\n     */\n    valueStateMessage: {\n      type: HTMLElement\n    },\n\n    /**\n     * Defines the icon to be displayed in the input field.\n     *\n     * @type {sap.ui.webcomponents.main.IIcon}\n     * @slot\n     * @public\n     * @since 1.0.0-rc.9\n     */\n    icon: {\n      type: HTMLElement\n    }\n  },\n  events:\n  /** @lends sap.ui.webcomponents.main.ComboBox.prototype */\n  {\n    /**\n     * Fired when the input operation has finished by pressing Enter, focusout or an item is selected.\n     *\n     * @event\n     * @public\n     */\n    change: {},\n\n    /**\n     * Fired when typing in input.\n     * <br><br>\n     * <b>Note:</b> filterValue property is updated, input is changed.\n     * @event\n     * @public\n     */\n    input: {},\n\n    /**\n     * Fired when selection is changed by user interaction\n     *\n     * @event sap.ui.webcomponents.main.ComboBox#selection-change\n     * @param {HTMLElement} item item to be selected.\n     * @public\n     */\n    \"selection-change\": {\n      detail: {\n        item: {\n          type: HTMLElement\n        }\n      }\n    }\n  }\n};\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-combobox</code> component represents a drop-down menu with a list of the available options and a text input field to narrow down the options.\n *\n * It is commonly used to enable users to select an option from a predefined list.\n *\n * <h3>Structure</h3>\n * The <code>ui5-combobox</code> consists of the following elements:\n * <ul>\n * <li> Input field - displays the selected option or a custom user entry. Users can type to narrow down the list or enter their own value.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n *\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-combobox</code> provides advanced keyboard handling.\n * <br>\n *\n * <ul>\n * <li>[F4], [ALT]+[UP], or [ALT]+[DOWN] - Toggles the picker.</li>\n * <li>[ESC] - Closes the picker, if open. If closed, cancels changes and reverts the typed in value.</li>\n * <li>[ENTER] or [RETURN] - If picker is open, takes over the currently selected item and closes it.</li>\n * <li>[DOWN] - Selects the next matching item in the picker.</li>\n * <li>[UP] - Selects the previous matching item in the picker.</li>\n * <li>[PAGEDOWN] - Moves selection down by page size (10 items by default).</li>\n * <li>[PAGEUP] - Moves selection up by page size (10 items by default). </li>\n * <li>[HOME] - If focus is in the ComboBox, moves cursor at the beginning of text. If focus is in the picker, selects the first item.</li>\n * <li>[END] - If focus is in the ComboBox, moves cursor at the end of text. If focus is in the picker, selects the last item.</li>\n * </ul>\n *\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/ComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.ComboBox\n * @extends UI5Element\n * @tagname ui5-combobox\n * @appenddocs ComboBoxItem ComboBoxGroupItem\n * @public\n * @since 1.0.0-rc.6\n */\n\nclass ComboBox extends UI5Element {\n  static get metadata() {\n    return metadata;\n  }\n\n  static get render() {\n    return litRender;\n  }\n\n  static get styles() {\n    return ComboBoxCss;\n  }\n\n  static get staticAreaStyles() {\n    return [ResponsivePopoverCommonCss, ValueStateMessageCss, ComboBoxPopoverCss, SuggestionsCss];\n  }\n\n  static get template() {\n    return ComboBoxTemplate;\n  }\n\n  static get staticAreaTemplate() {\n    return ComboBoxPopoverTemplate;\n  }\n\n  constructor(props) {\n    super(props);\n    this._filteredItems = [];\n    this._initialRendering = true;\n    this._itemFocused = false;\n    this._selectionChanged = false;\n  }\n\n  onBeforeRendering() {\n    if (this._initialRendering) {\n      this._filteredItems = this.items;\n    }\n\n    if (!this._initialRendering && this.popover && document.activeElement === this && !this._filteredItems.length) {\n      this.popover.close();\n    }\n\n    this._selectMatchingItem();\n\n    this._initialRendering = false;\n  }\n\n  async onAfterRendering() {\n    await this._respPopover();\n\n    if (isPhone() && this.responsivePopover.opened) {\n      // Set initial focus to the native input\n      this.inner.focus();\n    }\n\n    if (this.shouldClosePopover() && !isPhone()) {\n      this.responsivePopover.close(false, false, true);\n\n      this._clearFocus();\n\n      this._itemFocused = false;\n    }\n\n    this.toggleValueStatePopover(this.shouldOpenValueStateMessagePopover);\n    this.storeResponsivePopoverWidth(); // Safari is quite slow and does not preserve text highlighting on control rerendering.\n    // That's why we need to restore it \"manually\".\n\n    if (isSafari() && this._autocomplete && this.filterValue !== this.value) {\n      this.inner.setSelectionRange(this._isKeyNavigation ? 0 : this.filterValue.length, this.value.length);\n    }\n  }\n\n  shouldClosePopover() {\n    return this.responsivePopover.opened && !this.focused && !this._itemFocused && !this._isValueStateFocused;\n  }\n\n  _focusin(event) {\n    this.focused = true;\n    this._lastValue = this.value;\n    this._autocomplete = false;\n    !isPhone() && event.target.setSelectionRange(0, this.value.length);\n  }\n\n  _focusout(event) {\n    const focusedOutToValueStateMessage = event.relatedTarget && event.relatedTarget.shadowRoot && event.relatedTarget.shadowRoot.querySelector(\".ui5-valuestatemessage-root\");\n\n    this._fireChangeEvent();\n\n    if (focusedOutToValueStateMessage) {\n      event.stopImmediatePropagation();\n      return;\n    }\n\n    if (!this.shadowRoot.contains(event.relatedTarget)) {\n      this.focused = false;\n      !isPhone() && this._closeRespPopover(event);\n    }\n  }\n\n  _afterOpenPopover() {\n    this._iconPressed = true;\n  }\n\n  _afterClosePopover() {\n    this._iconPressed = false;\n    this._filteredItems = this.items; // close device's keyboard and prevent further typing\n\n    if (isPhone()) {\n      this.blur();\n    }\n\n    if (this._selectionPerformed) {\n      this._lastValue = this.value;\n      this._selectionPerformed = false;\n    }\n  }\n\n  _toggleRespPopover() {\n    if (this.responsivePopover.opened) {\n      this._closeRespPopover();\n    } else {\n      this._openRespPopover();\n    }\n  }\n\n  storeResponsivePopoverWidth() {\n    if (this.open && !this._listWidth) {\n      this._listWidth = this.responsivePopover.offsetWidth;\n    }\n  }\n\n  toggleValueStatePopover(open) {\n    if (open) {\n      this.openValueStatePopover();\n    } else {\n      this.closeValueStatePopover();\n    }\n  }\n\n  async openValueStatePopover() {\n    this.popover = await this._getPopover();\n    this.popover && this.popover.showAt(this);\n  }\n\n  async closeValueStatePopover() {\n    this.popover = await this._getPopover();\n    this.popover && this.popover.close();\n  }\n\n  async _getPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    return staticAreaItem.querySelector(\".ui5-valuestatemessage-popover\");\n  }\n\n  _resetFilter() {\n    this._userTypedValue = null;\n    this.inner.setSelectionRange(0, this.value.length);\n    this._filteredItems = this._filterItems(\"\");\n\n    this._selectMatchingItem();\n  }\n\n  _arrowClick() {\n    this.inner.focus();\n\n    this._resetFilter();\n\n    this._toggleRespPopover();\n  }\n\n  _readonlyIconClick() {\n    this.inner.focus();\n  }\n\n  _input(event) {\n    const {\n      value\n    } = event.target;\n\n    if (event.target === this.inner) {\n      // stop the native event, as the semantic \"input\" would be fired.\n      event.stopImmediatePropagation();\n      this.focused = true;\n      this._isValueStateFocused = false;\n    }\n\n    this._filteredItems = this._filterItems(value);\n    this.value = value;\n    this.filterValue = value;\n\n    this._clearFocus(); // autocomplete\n\n\n    if (this._autocomplete) {\n      const item = this._getFirstMatchingItem(value);\n\n      this._applyAtomicValueAndSelection(item, value, true);\n\n      if (value !== \"\" && !this._selectionChanged && item && !item.selected && !item.isGroupItem) {\n        this.fireEvent(\"selection-change\", {\n          item\n        });\n        this._selectionChanged = false;\n      }\n    }\n\n    this.fireEvent(\"input\");\n\n    if (isPhone()) {\n      return;\n    }\n\n    if (!this._filteredItems.length || value === \"\") {\n      this._closeRespPopover();\n    } else {\n      this._openRespPopover();\n    }\n  }\n\n  _startsWithMatchingItems(str) {\n    return Filters.StartsWith(str, this._filteredItems);\n  }\n\n  _clearFocus() {\n    this._filteredItems.map(item => {\n      item.focused = false;\n      return item;\n    });\n  }\n\n  handleNavKeyPress(event) {\n    if (this.focused && (isHome(event) || isEnd(event)) && this.value) {\n      return;\n    }\n\n    const isOpen = this.open;\n\n    const currentItem = this._filteredItems.find(item => {\n      return isOpen ? item.focused : item.selected;\n    });\n\n    const indexOfItem = this._filteredItems.indexOf(currentItem);\n\n    event.preventDefault();\n\n    if (this.focused && isOpen && (isUp(event) || isPageUp(event) || isPageDown(event))) {\n      return;\n    }\n\n    if (this._filteredItems.length - 1 === indexOfItem && isDown(event)) {\n      return;\n    }\n\n    this._isKeyNavigation = true;\n    this[`_handle${event.key}`](event, indexOfItem);\n  }\n\n  _handleItemNavigation(event, indexOfItem, isForward) {\n    const isOpen = this.open;\n    const currentItem = this._filteredItems[indexOfItem];\n    const nextItem = isForward ? this._filteredItems[indexOfItem + 1] : this._filteredItems[indexOfItem - 1];\n    const isGroupItem = currentItem && currentItem.isGroupItem;\n\n    if (!isOpen && (isGroupItem && !nextItem || !isGroupItem && !currentItem)) {\n      return;\n    }\n\n    this._clearFocus();\n\n    if (isOpen) {\n      this._itemFocused = true;\n      this.value = isGroupItem ? \"\" : currentItem.text;\n      this.focused = false;\n      currentItem.focused = true;\n    } else {\n      this.focused = true;\n      this.value = isGroupItem ? nextItem.text : currentItem.text;\n      currentItem.focused = false;\n    }\n\n    this._isValueStateFocused = false;\n    this._selectionChanged = true;\n\n    if (isGroupItem && isOpen) {\n      return;\n    }\n\n    this._announceSelectedItem(indexOfItem); // autocomplete\n\n\n    const item = this._getFirstMatchingItem(this.value);\n\n    this._applyAtomicValueAndSelection(item, this.open ? this._userTypedValue : null, true);\n\n    if (item && !item.selected) {\n      this.fireEvent(\"selection-change\", {\n        item\n      });\n    }\n\n    this.fireEvent(\"input\");\n\n    this._fireChangeEvent();\n  }\n\n  _handleArrowDown(event, indexOfItem) {\n    const isOpen = this.open;\n\n    if (this.focused && indexOfItem === -1 && this.hasValueStateText && isOpen) {\n      this._isValueStateFocused = true;\n      this.focused = false;\n      return;\n    }\n\n    indexOfItem = !isOpen && this.hasValueState && indexOfItem === -1 ? 0 : indexOfItem;\n\n    this._handleItemNavigation(event, ++indexOfItem, true\n    /* isForward */\n    );\n  }\n\n  _handleArrowUp(event, indexOfItem) {\n    const isOpen = this.open;\n\n    if (indexOfItem === 0 && !this.hasValueStateText) {\n      this._clearFocus();\n\n      this.focused = true;\n      this._itemFocused = false;\n      return;\n    }\n\n    if (indexOfItem === 0 && this.hasValueStateText && isOpen) {\n      this._clearFocus();\n\n      this._itemFocused = false;\n      this._isValueStateFocused = true;\n      this._filteredItems[0].selected = false;\n      return;\n    }\n\n    if (this._isValueStateFocused) {\n      this.focused = true;\n      this._isValueStateFocused = false;\n      return;\n    }\n\n    indexOfItem = !isOpen && this.hasValueState && indexOfItem === -1 ? 0 : indexOfItem;\n\n    this._handleItemNavigation(event, --indexOfItem, false\n    /* isForward */\n    );\n  }\n\n  _handlePageUp(event, indexOfItem) {\n    const isProposedIndexValid = indexOfItem - ComboBox.SKIP_ITEMS_SIZE > -1;\n    indexOfItem = isProposedIndexValid ? indexOfItem - ComboBox.SKIP_ITEMS_SIZE : 0;\n    const shouldMoveForward = this._filteredItems[indexOfItem].isGroupItem && !this.open;\n\n    if (!isProposedIndexValid && this.hasValueStateText && this.open) {\n      this._clearFocus();\n\n      this._itemFocused = false;\n      this._isValueStateFocused = true;\n      return;\n    }\n\n    this._handleItemNavigation(event, indexOfItem, shouldMoveForward);\n  }\n\n  _handlePageDown(event, indexOfItem) {\n    const itemsLength = this._filteredItems.length;\n    const isProposedIndexValid = indexOfItem + ComboBox.SKIP_ITEMS_SIZE < itemsLength;\n    indexOfItem = isProposedIndexValid ? indexOfItem + ComboBox.SKIP_ITEMS_SIZE : itemsLength - 1;\n    const shouldMoveForward = this._filteredItems[indexOfItem].isGroupItem && !this.open;\n\n    this._handleItemNavigation(event, indexOfItem, shouldMoveForward);\n  }\n\n  _handleHome(event, indexOfItem) {\n    const shouldMoveForward = this._filteredItems[0].isGroupItem && !this.open;\n\n    if (this.hasValueStateText && this.open) {\n      this._clearFocus();\n\n      this._itemFocused = false;\n      this._isValueStateFocused = true;\n      return;\n    }\n\n    this._handleItemNavigation(event, indexOfItem = 0, shouldMoveForward);\n  }\n\n  _handleEnd(event, indexOfItem) {\n    this._handleItemNavigation(event, indexOfItem = this._filteredItems.length - 1, true\n    /* isForward */\n    );\n  }\n\n  _keyup(event) {\n    this._userTypedValue = this.value.substring(0, this.inner.selectionStart);\n  }\n\n  _keydown(event) {\n    const isNavKey = isDown(event) || isUp(event) || isPageUp(event) || isPageDown(event) || isHome(event) || isEnd(event);\n    this._autocomplete = !(isBackSpace(event) || isDelete(event));\n    this._isKeyNavigation = false;\n\n    if (isNavKey && !this.readonly && this._filteredItems.length) {\n      this.handleNavKeyPress(event);\n    }\n\n    if (isEnter(event)) {\n      this._fireChangeEvent();\n\n      this._closeRespPopover();\n\n      this.focused = true;\n    }\n\n    if (isEscape(event)) {\n      this.focused = true;\n      this.value = !this.open ? this._lastValue : this.value;\n      this._isValueStateFocused = false;\n    }\n\n    if ((isTabNext(event) || isTabPrevious(event)) && this.open) {\n      this._closeRespPopover();\n    }\n\n    if (isShow(event) && !this.readonly && !this.disabled) {\n      event.preventDefault();\n\n      this._resetFilter();\n\n      this._toggleRespPopover();\n\n      const selectedItem = this._filteredItems.find(item => {\n        return item.selected;\n      });\n\n      if (selectedItem && this.open) {\n        this._itemFocused = true;\n        selectedItem.focused = true;\n        this.focused = false;\n      } else if (this.open && this._filteredItems.length) {\n        // If no item is selected, select the first one on \"Show\" (F4, Alt+Up/Down)\n        this._handleItemNavigation(event, 0, true\n        /* isForward */\n        );\n      } else {\n        this.focused = true;\n      }\n    }\n  }\n\n  _click(event) {\n    if (isPhone() && !this.readonly) {\n      this._openRespPopover();\n    }\n  }\n\n  _closeRespPopover(event) {\n    if (isPhone() && event && event.target.classList.contains(\"ui5-responsive-popover-close-btn\") && this._selectedItemText) {\n      this.value = this._selectedItemText;\n      this.filterValue = this._selectedItemText;\n    }\n\n    this._isValueStateFocused = false;\n\n    this._clearFocus();\n\n    this.responsivePopover.close();\n  }\n\n  _openRespPopover() {\n    this.responsivePopover.showAt(this);\n  }\n\n  _filterItems(str) {\n    const itemsToFilter = this.items.filter(item => !item.isGroupItem);\n    const filteredItems = (Filters[this.filter] || Filters.StartsWithPerTerm)(str, itemsToFilter); // Return the filtered items and their group items\n\n    return this.items.filter((item, idx, allItems) => ComboBox._groupItemFilter(item, ++idx, allItems, filteredItems) || filteredItems.indexOf(item) !== -1);\n  }\n  /**\n   * Returns true if the group header should be shown (if there is a filtered suggestion item for this group item)\n   *\n   * @private\n   */\n\n\n  static _groupItemFilter(item, idx, allItems, filteredItems) {\n    if (item.isGroupItem) {\n      let groupHasFilteredItems;\n\n      while (allItems[idx] && !allItems[idx].isGroupItem && !groupHasFilteredItems) {\n        groupHasFilteredItems = filteredItems.indexOf(allItems[idx]) !== -1;\n        idx++;\n      }\n\n      return groupHasFilteredItems;\n    }\n  }\n\n  _getFirstMatchingItem(current) {\n    const currentlyFocusedItem = this.items.find(item => item.focused === true);\n\n    if (currentlyFocusedItem && currentlyFocusedItem.isGroupItem) {\n      this.value = this.filterValue;\n      return;\n    }\n\n    const matchingItems = this._startsWithMatchingItems(current).filter(item => !item.isGroupItem);\n\n    if (matchingItems.length) {\n      return matchingItems[0];\n    }\n  }\n\n  _applyAtomicValueAndSelection(item, filterValue, highlightValue) {\n    if (!item) {\n      return;\n    }\n\n    const value = item && item.text || \"\";\n    this.inner.value = value;\n\n    if (highlightValue) {\n      filterValue = filterValue || \"\";\n      this.inner.setSelectionRange(filterValue.length, value.length);\n    }\n\n    this.value = value;\n  }\n\n  _selectMatchingItem() {\n    const currentlyFocusedItem = this.items.find(item => item.focused);\n    const shouldSelectionBeCleared = currentlyFocusedItem && currentlyFocusedItem.isGroupItem;\n    this._filteredItems = this._filteredItems.map(item => {\n      item.selected = !item.isGroupItem && item.text === this.value && !shouldSelectionBeCleared;\n      return item;\n    });\n  }\n\n  _fireChangeEvent() {\n    if (this.value !== this._lastValue) {\n      this.fireEvent(\"change\");\n      this._lastValue = this.value;\n    }\n  }\n\n  _inputChange(event) {\n    event.preventDefault();\n  }\n\n  _itemMousedown(event) {\n    event.preventDefault();\n  }\n\n  _selectItem(event) {\n    const listItem = event.detail.item;\n    this._selectedItemText = listItem.mappedItem.text;\n    this._selectionPerformed = true;\n    const sameItemSelected = this.value === this._selectedItemText;\n    const sameSelectionPerformed = this.value.toLowerCase() === this.filterValue.toLowerCase();\n\n    if (sameItemSelected && sameSelectionPerformed) {\n      return this._closeRespPopover();\n    }\n\n    this.value = this._selectedItemText;\n\n    if (!listItem.mappedItem.selected) {\n      this.fireEvent(\"selection-change\", {\n        item: listItem.mappedItem\n      });\n      this._selectionChanged = true;\n    }\n\n    this._filteredItems.map(item => {\n      item.selected = item === listItem.mappedItem && !item.isGroupItem;\n      return item;\n    });\n\n    this._fireChangeEvent();\n\n    this._closeRespPopover(); // reset selection\n\n\n    this.inner.setSelectionRange(this.value.length, this.value.length);\n  }\n\n  _onItemFocus(event) {\n    this._itemFocused = true;\n  }\n\n  _announceSelectedItem(indexOfItem) {\n    const itemPositionText = ComboBox.i18nBundle.getText(LIST_ITEM_POSITION, indexOfItem + 1, this._filteredItems.length);\n    const itemSelectionText = ComboBox.i18nBundle.getText(LIST_ITEM_SELECTED);\n    announce(`${itemPositionText} ${itemSelectionText}`, \"Polite\");\n  }\n\n  get _headerTitleText() {\n    return ComboBox.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n  }\n\n  get _iconAccessibleNameText() {\n    return ComboBox.i18nBundle.getText(SELECT_OPTIONS);\n  }\n\n  get inner() {\n    return isPhone() ? this.responsivePopover.querySelector(\".ui5-input-inner-phone\") : this.shadowRoot.querySelector(\"[inner-input]\");\n  }\n\n  async _respPopover() {\n    const staticAreaItem = await this.getStaticAreaItemDomRef();\n    this.responsivePopover = staticAreaItem.querySelector(\"[ui5-responsive-popover]\");\n    return this.responsivePopover;\n  }\n\n  get editable() {\n    return !this.readonly;\n  }\n\n  get hasValueState() {\n    return this.valueState !== ValueState.None;\n  }\n\n  get hasValueStateText() {\n    return this.hasValueState && this.valueState !== ValueState.Success;\n  }\n\n  get valueStateText() {\n    return this.valueStateTextMappings[this.valueState];\n  }\n\n  get valueStateMessageText() {\n    return this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n  }\n\n  get valueStateTextId() {\n    return this.hasValueState ? `${this._id}-valueStateDesc` : undefined;\n  }\n\n  get valueStateTextMappings() {\n    return {\n      \"Success\": ComboBox.i18nBundle.getText(VALUE_STATE_SUCCESS),\n      \"Error\": ComboBox.i18nBundle.getText(VALUE_STATE_ERROR),\n      \"Warning\": ComboBox.i18nBundle.getText(VALUE_STATE_WARNING),\n      \"Information\": ComboBox.i18nBundle.getText(VALUE_STATE_INFORMATION)\n    };\n  }\n\n  get shouldOpenValueStateMessagePopover() {\n    return this.focused && !this.readonly && this.hasValueStateText && !this._iconPressed && !this.open && !this._isPhone;\n  }\n\n  get shouldDisplayDefaultValueStateMessage() {\n    return !this.valueStateMessage.length && this.hasValueStateText;\n  }\n\n  get _valueStatePopoverHorizontalAlign() {\n    return this.effectiveDir !== \"rtl\" ? \"Left\" : \"Right\";\n  }\n  /**\n   * This method is relevant for sap_horizon theme only\n   */\n\n\n  get _valueStateMessageIcon() {\n    const iconPerValueState = {\n      Error: \"error\",\n      Warning: \"alert\",\n      Success: \"sys-enter-2\",\n      Information: \"information\"\n    };\n    return this.valueState !== ValueState.None ? iconPerValueState[this.valueState] : \"\";\n  }\n\n  get open() {\n    return this.responsivePopover ? this.responsivePopover.opened : false;\n  }\n\n  get _isPhone() {\n    return isPhone();\n  }\n\n  get itemTabIndex() {\n    return undefined;\n  }\n\n  get ariaLabelText() {\n    return getEffectiveAriaLabelText(this);\n  }\n\n  static get dependencies() {\n    return [ComboBoxItem, Icon, ResponsivePopover, List, BusyIndicator, Button, StandardListItem, Popover, ComboBoxGroupItem];\n  }\n\n  static async onDefine() {\n    ComboBox.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n  }\n\n  get styles() {\n    return {\n      popoverHeader: {\n        \"width\": `${this.offsetWidth}px`\n      },\n      suggestionPopoverHeader: {\n        \"display\": this._listWidth === 0 ? \"none\" : \"inline-block\",\n        \"width\": `${this._listWidth}px`\n      }\n    };\n  }\n\n  get classes() {\n    return {\n      popover: {\n        \"ui5-suggestions-popover\": !this.isPhone,\n        \"ui5-suggestions-popover-with-value-state-header\": !this.isPhone && this.hasValueStateText\n      },\n      popoverValueState: {\n        \"ui5-valuestatemessage-header\": true,\n        \"ui5-valuestatemessage-root\": true,\n        \"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n        \"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n        \"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n        \"ui5-valuestatemessage--information\": this.valueState === ValueState.Information\n      }\n    };\n  }\n\n}\n\nComboBox.SKIP_ITEMS_SIZE = 10;\nComboBox.define();\nexport default ComboBox;","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents/dist/ComboBox.js"],"names":["UI5Element","litRender","ValueState","isPhone","isSafari","Integer","getEffectiveAriaLabelText","announce","getI18nBundle","isBackSpace","isDelete","isShow","isUp","isDown","isEnter","isEscape","isTabNext","isTabPrevious","isPageUp","isPageDown","isHome","isEnd","Filters","VALUE_STATE_SUCCESS","VALUE_STATE_ERROR","VALUE_STATE_WARNING","VALUE_STATE_INFORMATION","INPUT_SUGGESTIONS_TITLE","SELECT_OPTIONS","LIST_ITEM_POSITION","LIST_ITEM_SELECTED","ComboBoxTemplate","ComboBoxPopoverTemplate","ComboBoxCss","ComboBoxPopoverCss","ResponsivePopoverCommonCss","ValueStateMessageCss","SuggestionsCss","ComboBoxItem","Icon","Popover","ResponsivePopover","List","BusyIndicator","Button","StandardListItem","ComboBoxGroupItem","metadata","tag","languageAware","properties","value","type","String","defaultValue","filterValue","placeholder","disabled","Boolean","valueState","None","readonly","required","loading","filter","focused","_isValueStateFocused","accessibleName","undefined","accessibleNameRef","_iconPressed","noAttribute","_filteredItems","Object","_listWidth","managedSlots","slots","propertyName","HTMLElement","invalidateOnChildChange","valueStateMessage","icon","events","change","input","detail","item","ComboBox","render","styles","staticAreaStyles","template","staticAreaTemplate","constructor","props","_initialRendering","_itemFocused","_selectionChanged","onBeforeRendering","items","popover","document","activeElement","length","close","_selectMatchingItem","onAfterRendering","_respPopover","responsivePopover","opened","inner","focus","shouldClosePopover","_clearFocus","toggleValueStatePopover","shouldOpenValueStateMessagePopover","storeResponsivePopoverWidth","_autocomplete","setSelectionRange","_isKeyNavigation","_focusin","event","_lastValue","target","_focusout","focusedOutToValueStateMessage","relatedTarget","shadowRoot","querySelector","_fireChangeEvent","stopImmediatePropagation","contains","_closeRespPopover","_afterOpenPopover","_afterClosePopover","blur","_selectionPerformed","_toggleRespPopover","_openRespPopover","open","offsetWidth","openValueStatePopover","closeValueStatePopover","_getPopover","showAt","staticAreaItem","getStaticAreaItemDomRef","_resetFilter","_userTypedValue","_filterItems","_arrowClick","_readonlyIconClick","_input","_getFirstMatchingItem","_applyAtomicValueAndSelection","selected","isGroupItem","fireEvent","_startsWithMatchingItems","str","StartsWith","map","handleNavKeyPress","isOpen","currentItem","find","indexOfItem","indexOf","preventDefault","key","_handleItemNavigation","isForward","nextItem","text","_announceSelectedItem","_handleArrowDown","hasValueStateText","hasValueState","_handleArrowUp","_handlePageUp","isProposedIndexValid","SKIP_ITEMS_SIZE","shouldMoveForward","_handlePageDown","itemsLength","_handleHome","_handleEnd","_keyup","substring","selectionStart","_keydown","isNavKey","selectedItem","_click","classList","_selectedItemText","itemsToFilter","filteredItems","StartsWithPerTerm","idx","allItems","_groupItemFilter","groupHasFilteredItems","current","currentlyFocusedItem","matchingItems","highlightValue","shouldSelectionBeCleared","_inputChange","_itemMousedown","_selectItem","listItem","mappedItem","sameItemSelected","sameSelectionPerformed","toLowerCase","_onItemFocus","itemPositionText","i18nBundle","getText","itemSelectionText","_headerTitleText","_iconAccessibleNameText","editable","Success","valueStateText","valueStateTextMappings","valueStateMessageText","getSlottedNodes","el","cloneNode","valueStateTextId","_id","_isPhone","shouldDisplayDefaultValueStateMessage","_valueStatePopoverHorizontalAlign","effectiveDir","_valueStateMessageIcon","iconPerValueState","Error","Warning","Information","itemTabIndex","ariaLabelText","dependencies","onDefine","popoverHeader","suggestionPopoverHeader","classes","popoverValueState","define"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,4CAAvB;AACA,OAAOC,SAAP,MAAsB,sDAAtB;AACA,OAAOC,UAAP,MAAuB,kDAAvB;AACA,SAASC,OAAT,EAAkBC,QAAlB,QAAkC,wCAAlC;AACA,OAAOC,OAAP,MAAoB,+CAApB;AACA,SAASC,yBAAT,QAA0C,sDAA1C;AACA,OAAOC,QAAP,MAAqB,uDAArB;AACA,OAAO,kDAAP;AACA,OAAO,0CAAP;AACA,OAAO,+CAAP;AACA,SAASC,aAAT,QAA8B,4CAA9B;AACA,SACCC,WADD,EAECC,QAFD,EAGCC,MAHD,EAICC,IAJD,EAKCC,MALD,EAMCC,OAND,EAOCC,QAPD,EAQCC,SARD,EASCC,aATD,EAUCC,QAVD,EAWCC,UAXD,EAYCC,MAZD,EAaCC,KAbD,QAcO,sCAdP;AAeA,OAAO,KAAKC,OAAZ,MAAyB,sBAAzB;AAEA,SACCC,mBADD,EAECC,iBAFD,EAGCC,mBAHD,EAICC,uBAJD,EAKCC,uBALD,EAMCC,cAND,EAOCC,kBAPD,EAQCC,kBARD,QASO,mCATP,C,CAWA;;AACA,OAAOC,gBAAP,MAA6B,+CAA7B;AACA,OAAOC,uBAAP,MAAoC,sDAApC,C,CAEA;;AACA,OAAOC,WAAP,MAAwB,oCAAxB;AACA,OAAOC,kBAAP,MAA+B,2CAA/B;AACA,OAAOC,0BAAP,MAAuC,mDAAvC;AACA,OAAOC,oBAAP,MAAiC,6CAAjC;AACA,OAAOC,cAAP,MAA2B,uCAA3B;AAEA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,iBAAP,MAA8B,wBAA9B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,gBAAP,MAA6B,uBAA7B;AACA,OAAOC,iBAAP,MAA8B,wBAA9B;AAEA;AACA;AACA;;AACA,MAAMC,QAAQ,GAAG;AAChBC,EAAAA,GAAG,EAAE,cADW;AAEhBC,EAAAA,aAAa,EAAE,IAFC;AAGhBC,EAAAA,UAAU;AAAE;AAA2D;AACtE;AACF;AACA;AACA;AACA;AACA;AACA;AACEC,IAAAA,KAAK,EAAE;AACNC,MAAAA,IAAI,EAAEC,MADA;AAENC,MAAAA,YAAY,EAAE;AAFR,KAR+D;;AAatE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,IAAAA,WAAW,EAAE;AACZH,MAAAA,IAAI,EAAEC,MADM;AAEZC,MAAAA,YAAY,EAAE;AAFF,KAzByD;;AA8BtE;AACF;AACA;AACA;AACA;AACA;AACA;AACEE,IAAAA,WAAW,EAAE;AACZJ,MAAAA,IAAI,EAAEC,MADM;AAEZC,MAAAA,YAAY,EAAE;AAFF,KArCyD;;AA0CtE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEG,IAAAA,QAAQ,EAAE;AACTL,MAAAA,IAAI,EAAEM;AADG,KAnD4D;;AAuDtE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,IAAAA,UAAU,EAAE;AACXP,MAAAA,IAAI,EAAElD,UADK;AAEXoD,MAAAA,YAAY,EAAEpD,UAAU,CAAC0D;AAFd,KAvE0D;;AA4EtE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,IAAAA,QAAQ,EAAE;AACTT,MAAAA,IAAI,EAAEM;AADG,KAtF4D;;AA0FtE;AACF;AACA;AACA;AACA;AACA;AACA;AACEI,IAAAA,QAAQ,EAAE;AACTV,MAAAA,IAAI,EAAEM;AADG,KAjG4D;;AAqGtE;AACF;AACA;AACA;AACA;AACA;AACA;AACEK,IAAAA,OAAO,EAAE;AACRX,MAAAA,IAAI,EAAEM;AADE,KA5G6D;;AAgHtE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACEM,IAAAA,MAAM,EAAE;AACPZ,MAAAA,IAAI,EAAEC,MADC;AAEPC,MAAAA,YAAY,EAAE;AAFP,KAxH8D;;AA6HtE;AACF;AACA;AACA;AACEW,IAAAA,OAAO,EAAE;AACRb,MAAAA,IAAI,EAAEM;AADE,KAjI6D;;AAqItE;AACF;A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","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isPhone, isSafari } from \"@ui5/webcomponents-base/dist/Device.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport { getEffectiveAriaLabelText } from \"@ui5/webcomponents-base/dist/util/AriaLabelHelper.js\";\nimport announce from \"@ui5/webcomponents-base/dist/util/InvisibleMessage.js\";\nimport \"@ui5/webcomponents-icons/dist/slim-arrow-down.js\";\nimport \"@ui5/webcomponents-icons/dist/decline.js\";\nimport \"@ui5/webcomponents-icons/dist/not-editable.js\";\nimport { getI18nBundle } from \"@ui5/webcomponents-base/dist/i18nBundle.js\";\nimport {\n\tisBackSpace,\n\tisDelete,\n\tisShow,\n\tisUp,\n\tisDown,\n\tisEnter,\n\tisEscape,\n\tisTabNext,\n\tisTabPrevious,\n\tisPageUp,\n\tisPageDown,\n\tisHome,\n\tisEnd,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport * as Filters from \"./ComboBoxFilters.js\";\n\nimport {\n\tVALUE_STATE_SUCCESS,\n\tVALUE_STATE_ERROR,\n\tVALUE_STATE_WARNING,\n\tVALUE_STATE_INFORMATION,\n\tINPUT_SUGGESTIONS_TITLE,\n\tSELECT_OPTIONS,\n\tLIST_ITEM_POSITION,\n\tLIST_ITEM_SELECTED,\n} from \"./generated/i18n/i18n-defaults.js\";\n\n// Templates\nimport ComboBoxTemplate from \"./generated/templates/ComboBoxTemplate.lit.js\";\nimport ComboBoxPopoverTemplate from \"./generated/templates/ComboBoxPopoverTemplate.lit.js\";\n\n// Styles\nimport ComboBoxCss from \"./generated/themes/ComboBox.css.js\";\nimport ComboBoxPopoverCss from \"./generated/themes/ComboBoxPopover.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\nimport SuggestionsCss from \"./generated/themes/Suggestions.css.js\";\n\nimport ComboBoxItem from \"./ComboBoxItem.js\";\nimport Icon from \"./Icon.js\";\nimport Popover from \"./Popover.js\";\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport BusyIndicator from \"./BusyIndicator.js\";\nimport Button from \"./Button.js\";\nimport StandardListItem from \"./StandardListItem.js\";\nimport ComboBoxGroupItem from \"./ComboBoxGroupItem.js\";\n\n/**\n * @public\n */\nconst metadata = {\n\ttag: \"ui5-combobox\",\n\tlanguageAware: true,\n\tproperties: /** @lends sap.ui.webcomponents.main.ComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the value of the component.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines the \"live\" value of the component.\n\t\t * <br><br>\n\t\t * <b>Note:</b> If we have an item e.g. \"Bulgaria\", \"B\" is typed, \"ulgaria\" is typed ahead, value will be \"Bulgaria\", filterValue will be \"B\".\n\t\t *\n\t\t * <br><br>\n\t\t * <b>Note:</b> Initially the filter value is synced with value.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @private\n\t\t */\n\t\tfilterValue: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines a short hint intended to aid the user with data entry when the\n\t\t * component has no value.\n\t\t * @type {string}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t */\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the component is in disabled state.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A disabled component is completely noninteractive.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the value state of the component.\n\t\t * <br><br>\n\t\t * Available options are:\n\t\t * <ul>\n\t\t * <li><code>None</code></li>\n\t\t * <li><code>Error</code></li>\n\t\t * <li><code>Warning</code></li>\n\t\t * <li><code>Success</code></li>\n\t\t * <li><code>Information</code></li>\n\t\t * </ul>\n\t\t *\n\t\t * @type {ValueState}\n\t\t * @defaultvalue \"None\"\n\t\t * @public\n\t\t */\n\t\tvalueState: {\n\t\t\ttype: ValueState,\n\t\t\tdefaultValue: ValueState.None,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the component is read-only.\n\t\t * <br><br>\n\t\t * <b>Note:</b> A read-only component is not editable,\n\t\t * but still provides visual feedback upon user interaction.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\treadonly: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines whether the component is required.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\trequired: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether a loading indicator should be shown in the picker.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @defaultvalue false\n\t\t * @public\n\t\t */\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Defines the filter type of the component.\n\t\t * Available options are: <code>StartsWithPerTerm</code>, <code>StartsWith</code> and <code>Contains</code>.\n\t\t *\n\t\t * @type {string}\n\t\t * @defaultvalue \"StartsWithPerTerm\"\n\t\t * @public\n\t\t */\n\t\tfilter: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"StartsWithPerTerm\",\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the input is focssed\n\t\t * @private\n\t\t */\n\t\tfocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Indicates whether the visual focus is on the value state header\n\t\t * @private\n\t\t */\n\t\t_isValueStateFocused: {\n\t\t\ttype: Boolean,\n\t\t},\n\n\t\t/**\n\t\t * Sets the accessible aria name of the component.\n\t\t *\n\t\t * @type {String}\n\t\t * @defaultvalue: \"\"\n\t\t * @public\n\t\t * @since 1.0.0-rc.15\n\t\t */\n\t\taccessibleName: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: undefined,\n\t\t},\n\n\t\t/**\n\t\t * Receives id(or many ids) of the elements that label the component\n\t\t * @type {String}\n\t\t * @defaultvalue \"\"\n\t\t * @public\n\t\t * @since 1.0.0-rc.15\n\t\t */\n\t\taccessibleNameRef: {\n\t\t\ttype: String,\n\t\t\tdefaultValue: \"\",\n\t\t},\n\n\t\t_iconPressed: {\n\t\t\ttype: Boolean,\n\t\t\tnoAttribute: true,\n\t\t},\n\n\t\t_filteredItems: {\n\t\t\ttype: Object,\n\t\t},\n\n\t\t_listWidth: {\n\t\t\ttype: Integer,\n\t\t\tdefaultValue: 0,\n\t\t\tnoAttribute: true,\n\t\t},\n\t},\n\tmanagedSlots: true,\n\tslots: /** @lends sap.ui.webcomponents.main.ComboBox.prototype */ {\n\t\t/**\n\t\t * Defines the component items.\n\t\t *\n\t\t * @type {sap.ui.webcomponents.main.IComboBoxItem[]}\n\t\t * @slot items\n\t\t * @public\n\t\t */\n\t\t\"default\": {\n\t\t\tpropertyName: \"items\",\n\t\t\ttype: HTMLElement,\n\t\t\tinvalidateOnChildChange: true,\n\t\t},\n\n\t\t/**\n\t\t * Defines the value state message that will be displayed as pop up under the component.\n\t\t * <br><br>\n\t\t *\n\t\t * <b>Note:</b> If not specified, a default text (in the respective language) will be displayed.\n\t\t * <br>\n\t\t * <b>Note:</b> The <code>valueStateMessage</code> would be displayed,\n\t\t * when the <code>ui5-combobox</code> is in <code>Information</code>, <code>Warning</code> or <code>Error</code> value state.\n\t\t * @type {HTMLElement[]}\n\t\t * @since 1.0.0-rc.9\n\t\t * @slot\n\t\t * @public\n\t\t */\n\t\tvalueStateMessage: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\n\t\t/**\n\t\t * Defines the icon to be displayed in the input field.\n\t\t *\n\t\t * @type {sap.ui.webcomponents.main.IIcon}\n\t\t * @slot\n\t\t * @public\n\t\t * @since 1.0.0-rc.9\n\t\t */\n\t\ticon: {\n\t\t\ttype: HTMLElement,\n\t\t},\n\t},\n\tevents: /** @lends sap.ui.webcomponents.main.ComboBox.prototype */ {\n\t\t/**\n\t\t * Fired when the input operation has finished by pressing Enter, focusout or an item is selected.\n\t\t *\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tchange: {},\n\n\t\t/**\n\t\t * Fired when typing in input.\n\t\t * <br><br>\n\t\t * <b>Note:</b> filterValue property is updated, input is changed.\n\t\t * @event\n\t\t * @public\n\t\t */\n\t\tinput: {},\n\n\t\t/**\n\t\t * Fired when selection is changed by user interaction\n\t\t *\n\t\t * @event sap.ui.webcomponents.main.ComboBox#selection-change\n\t\t * @param {HTMLElement} item item to be selected.\n\t\t * @public\n\t\t */\n\t\t\"selection-change\": {\n\t\t\tdetail: {\n\t\t\t\titem: { type: HTMLElement },\n\t\t\t},\n\t\t},\n\t},\n};\n\n/**\n * @class\n *\n * <h3 class=\"comment-api-title\">Overview</h3>\n *\n * The <code>ui5-combobox</code> component represents a drop-down menu with a list of the available options and a text input field to narrow down the options.\n *\n * It is commonly used to enable users to select an option from a predefined list.\n *\n * <h3>Structure</h3>\n * The <code>ui5-combobox</code> consists of the following elements:\n * <ul>\n * <li> Input field - displays the selected option or a custom user entry. Users can type to narrow down the list or enter their own value.\n * <li> Drop-down arrow - expands\\collapses the option list.</li>\n * <li> Option list - the list of available options.</li>\n * </ul>\n *\n * <h3>Keyboard Handling</h3>\n *\n * The <code>ui5-combobox</code> provides advanced keyboard handling.\n * <br>\n *\n * <ul>\n * <li>[F4], [ALT]+[UP], or [ALT]+[DOWN] - Toggles the picker.</li>\n * <li>[ESC] - Closes the picker, if open. If closed, cancels changes and reverts the typed in value.</li>\n * <li>[ENTER] or [RETURN] - If picker is open, takes over the currently selected item and closes it.</li>\n * <li>[DOWN] - Selects the next matching item in the picker.</li>\n * <li>[UP] - Selects the previous matching item in the picker.</li>\n * <li>[PAGEDOWN] - Moves selection down by page size (10 items by default).</li>\n * <li>[PAGEUP] - Moves selection up by page size (10 items by default). </li>\n * <li>[HOME] - If focus is in the ComboBox, moves cursor at the beginning of text. If focus is in the picker, selects the first item.</li>\n * <li>[END] - If focus is in the ComboBox, moves cursor at the end of text. If focus is in the picker, selects the last item.</li>\n * </ul>\n *\n *\n * <h3>ES6 Module Import</h3>\n *\n * <code>import \"@ui5/webcomponents/dist/ComboBox\";</code>\n *\n *\n * @constructor\n * @author SAP SE\n * @alias sap.ui.webcomponents.main.ComboBox\n * @extends UI5Element\n * @tagname ui5-combobox\n * @appenddocs ComboBoxItem ComboBoxGroupItem\n * @public\n * @since 1.0.0-rc.6\n */\nclass ComboBox extends UI5Element {\n\tstatic get metadata() {\n\t\treturn metadata;\n\t}\n\n\tstatic get render() {\n\t\treturn litRender;\n\t}\n\n\tstatic get styles() {\n\t\treturn ComboBoxCss;\n\t}\n\n\tstatic get staticAreaStyles() {\n\t\treturn [ResponsivePopoverCommonCss, ValueStateMessageCss, ComboBoxPopoverCss, SuggestionsCss];\n\t}\n\n\tstatic get template() {\n\t\treturn ComboBoxTemplate;\n\t}\n\n\tstatic get staticAreaTemplate() {\n\t\treturn ComboBoxPopoverTemplate;\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis._filteredItems = [];\n\t\tthis._initialRendering = true;\n\t\tthis._itemFocused = false;\n\t\tthis._selectionChanged = false;\n\t}\n\n\tonBeforeRendering() {\n\t\tif (this._initialRendering) {\n\t\t\tthis._filteredItems = this.items;\n\t\t}\n\n\t\tif (!this._initialRendering && this.popover && document.activeElement === this && !this._filteredItems.length) {\n\t\t\tthis.popover.close();\n\t\t}\n\n\t\tthis._selectMatchingItem();\n\t\tthis._initialRendering = false;\n\t}\n\n\tasync onAfterRendering() {\n\t\tawait this._respPopover();\n\t\tif (isPhone() && this.responsivePopover.opened) {\n\t\t\t// Set initial focus to the native input\n\t\t\tthis.inner.focus();\n\t\t}\n\n\t\tif (this.shouldClosePopover() && !isPhone()) {\n\t\t\tthis.responsivePopover.close(false, false, true);\n\t\t\tthis._clearFocus();\n\t\t\tthis._itemFocused = false;\n\t\t}\n\n\t\tthis.toggleValueStatePopover(this.shouldOpenValueStateMessagePopover);\n\t\tthis.storeResponsivePopoverWidth();\n\n\t\t// Safari is quite slow and does not preserve text highlighting on control rerendering.\n\t\t// That's why we need to restore it \"manually\".\n\t\tif (isSafari() && this._autocomplete && this.filterValue !== this.value) {\n\t\t\tthis.inner.setSelectionRange(\n\t\t\t\t(this._isKeyNavigation ? 0 : this.filterValue.length),\n\t\t\t\tthis.value.length,\n\t\t\t);\n\t\t}\n\t}\n\n\tshouldClosePopover() {\n\t\treturn this.responsivePopover.opened && !this.focused && !this._itemFocused && !this._isValueStateFocused;\n\t}\n\n\t_focusin(event) {\n\t\tthis.focused = true;\n\n\t\tthis._lastValue = this.value;\n\n\t\tthis._autocomplete = false;\n\n\t\t!isPhone() && event.target.setSelectionRange(0, this.value.length);\n\t}\n\n\t_focusout(event) {\n\t\tconst focusedOutToValueStateMessage = event.relatedTarget && event.relatedTarget.shadowRoot && event.relatedTarget.shadowRoot.querySelector(\".ui5-valuestatemessage-root\");\n\n\t\tthis._fireChangeEvent();\n\n\t\tif (focusedOutToValueStateMessage) {\n\t\t\tevent.stopImmediatePropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.shadowRoot.contains(event.relatedTarget)) {\n\t\t\tthis.focused = false;\n\t\t\t!isPhone() && this._closeRespPopover(event);\n\t\t}\n\t}\n\n\t_afterOpenPopover() {\n\t\tthis._iconPressed = true;\n\t}\n\n\t_afterClosePopover() {\n\t\tthis._iconPressed = false;\n\t\tthis._filteredItems = this.items;\n\n\t\t// close device's keyboard and prevent further typing\n\t\tif (isPhone()) {\n\t\t\tthis.blur();\n\t\t}\n\n\t\tif (this._selectionPerformed) {\n\t\t\tthis._lastValue = this.value;\n\t\t\tthis._selectionPerformed = false;\n\t\t}\n\t}\n\n\t_toggleRespPopover() {\n\t\tif (this.responsivePopover.opened) {\n\t\t\tthis._closeRespPopover();\n\t\t} else {\n\t\t\tthis._openRespPopover();\n\t\t}\n\t}\n\n\tstoreResponsivePopoverWidth() {\n\t\tif (this.open && !this._listWidth) {\n\t\t\tthis._listWidth = this.responsivePopover.offsetWidth;\n\t\t}\n\t}\n\n\ttoggleValueStatePopover(open) {\n\t\tif (open) {\n\t\t\tthis.openValueStatePopover();\n\t\t} else {\n\t\t\tthis.closeValueStatePopover();\n\t\t}\n\t}\n\n\tasync openValueStatePopover() {\n\t\tthis.popover = await this._getPopover();\n\t\tthis.popover && this.popover.showAt(this);\n\t}\n\n\tasync closeValueStatePopover() {\n\t\tthis.popover = await this._getPopover();\n\t\tthis.popover && this.popover.close();\n\t}\n\n\tasync _getPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\treturn staticAreaItem.querySelector(\".ui5-valuestatemessage-popover\");\n\t}\n\n\t_resetFilter() {\n\t\tthis._userTypedValue = null;\n\t\tthis.inner.setSelectionRange(0, this.value.length);\n\t\tthis._filteredItems = this._filterItems(\"\");\n\t\tthis._selectMatchingItem();\n\t}\n\n\t_arrowClick() {\n\t\tthis.inner.focus();\n\t\tthis._resetFilter();\n\n\t\tthis._toggleRespPopover();\n\t}\n\n\t_readonlyIconClick() {\n\t\tthis.inner.focus();\n\t}\n\n\t_input(event) {\n\t\tconst { value } = event.target;\n\n\t\tif (event.target === this.inner) {\n\t\t\t// stop the native event, as the semantic \"input\" would be fired.\n\t\t\tevent.stopImmediatePropagation();\n\t\t\tthis.focused = true;\n\t\t\tthis._isValueStateFocused = false;\n\t\t}\n\n\t\tthis._filteredItems = this._filterItems(value);\n\n\t\tthis.value = value;\n\t\tthis.filterValue = value;\n\n\t\tthis._clearFocus();\n\n\t\t// autocomplete\n\t\tif (this._autocomplete) {\n\t\t\tconst item = this._getFirstMatchingItem(value);\n\t\t\tthis._applyAtomicValueAndSelection(item, value, true);\n\n\t\t\tif (value !== \"\" && !this._selectionChanged && (item && !item.selected && !item.isGroupItem)) {\n\t\t\t\tthis.fireEvent(\"selection-change\", {\n\t\t\t\t\titem,\n\t\t\t\t});\n\n\t\t\t\tthis._selectionChanged = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent(\"input\");\n\n\t\tif (isPhone()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._filteredItems.length || value === \"\") {\n\t\t\tthis._closeRespPopover();\n\t\t} else {\n\t\t\tthis._openRespPopover();\n\t\t}\n\t}\n\n\t_startsWithMatchingItems(str) {\n\t\treturn Filters.StartsWith(str, this._filteredItems);\n\t}\n\n\t_clearFocus() {\n\t\tthis._filteredItems.map(item => {\n\t\t\titem.focused = false;\n\n\t\t\treturn item;\n\t\t});\n\t}\n\n\thandleNavKeyPress(event) {\n\t\tif (this.focused && (isHome(event) || isEnd(event)) && this.value) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isOpen = this.open;\n\t\tconst currentItem = this._filteredItems.find(item => {\n\t\t\treturn isOpen ? item.focused : item.selected;\n\t\t});\n\t\tconst indexOfItem = this._filteredItems.indexOf(currentItem);\n\n\t\tevent.preventDefault();\n\n\t\tif (this.focused && isOpen && (isUp(event) || isPageUp(event) || isPageDown(event))) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._filteredItems.length - 1 === indexOfItem && isDown(event)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isKeyNavigation = true;\n\n\t\tthis[`_handle${event.key}`](event, indexOfItem);\n\t}\n\n\t_handleItemNavigation(event, indexOfItem, isForward) {\n\t\tconst isOpen = this.open;\n\t\tconst currentItem = this._filteredItems[indexOfItem];\n\t\tconst nextItem = isForward ? this._filteredItems[indexOfItem + 1] : this._filteredItems[indexOfItem - 1];\n\t\tconst isGroupItem = currentItem && currentItem.isGroupItem;\n\n\t\tif ((!isOpen) && ((isGroupItem && !nextItem) || (!isGroupItem && !currentItem))) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._clearFocus();\n\n\t\tif (isOpen) {\n\t\t\tthis._itemFocused = true;\n\t\t\tthis.value = isGroupItem ? \"\" : currentItem.text;\n\t\t\tthis.focused = false;\n\t\t\tcurrentItem.focused = true;\n\t\t} else {\n\t\t\tthis.focused = true;\n\t\t\tthis.value = isGroupItem ? nextItem.text : currentItem.text;\n\t\t\tcurrentItem.focused = false;\n\t\t}\n\n\t\tthis._isValueStateFocused = false;\n\t\tthis._selectionChanged = true;\n\n\t\tif (isGroupItem && isOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._announceSelectedItem(indexOfItem);\n\n\t\t// autocomplete\n\t\tconst item = this._getFirstMatchingItem(this.value);\n\t\tthis._applyAtomicValueAndSelection(item, (this.open ? this._userTypedValue : null), true);\n\n\t\tif ((item && !item.selected)) {\n\t\t\tthis.fireEvent(\"selection-change\", {\n\t\t\t\titem,\n\t\t\t});\n\t\t}\n\n\t\tthis.fireEvent(\"input\");\n\t\tthis._fireChangeEvent();\n\t}\n\n\t_handleArrowDown(event, indexOfItem) {\n\t\tconst isOpen = this.open;\n\n\t\tif (this.focused && indexOfItem === -1 && this.hasValueStateText && isOpen) {\n\t\t\tthis._isValueStateFocused = true;\n\t\t\tthis.focused = false;\n\t\t\treturn;\n\t\t}\n\n\t\tindexOfItem = !isOpen && this.hasValueState && indexOfItem === -1 ? 0 : indexOfItem;\n\n\t\tthis._handleItemNavigation(event, ++indexOfItem, true /* isForward */);\n\t}\n\n\t_handleArrowUp(event, indexOfItem) {\n\t\tconst isOpen = this.open;\n\n\t\tif (indexOfItem === 0 && !this.hasValueStateText) {\n\t\t\tthis._clearFocus();\n\t\t\tthis.focused = true;\n\t\t\tthis._itemFocused = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (indexOfItem === 0 && this.hasValueStateText && isOpen) {\n\t\t\tthis._clearFocus();\n\t\t\tthis._itemFocused = false;\n\t\t\tthis._isValueStateFocused = true;\n\t\t\tthis._filteredItems[0].selected = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isValueStateFocused) {\n\t\t\tthis.focused = true;\n\t\t\tthis._isValueStateFocused = false;\n\t\t\treturn;\n\t\t}\n\n\t\tindexOfItem = !isOpen && this.hasValueState && indexOfItem === -1 ? 0 : indexOfItem;\n\t\tthis._handleItemNavigation(event, --indexOfItem, false /* isForward */);\n\t}\n\n\t_handlePageUp(event, indexOfItem) {\n\t\tconst isProposedIndexValid = indexOfItem - ComboBox.SKIP_ITEMS_SIZE > -1;\n\t\tindexOfItem = isProposedIndexValid ? indexOfItem - ComboBox.SKIP_ITEMS_SIZE : 0;\n\t\tconst shouldMoveForward = this._filteredItems[indexOfItem].isGroupItem && !this.open;\n\n\t\tif (!isProposedIndexValid && this.hasValueStateText && this.open) {\n\t\t\tthis._clearFocus();\n\t\t\tthis._itemFocused = false;\n\t\t\tthis._isValueStateFocused = true;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handleItemNavigation(event, indexOfItem, shouldMoveForward);\n\t}\n\n\t_handlePageDown(event, indexOfItem) {\n\t\tconst itemsLength = this._filteredItems.length;\n\t\tconst isProposedIndexValid = indexOfItem + ComboBox.SKIP_ITEMS_SIZE < itemsLength;\n\n\t\tindexOfItem = isProposedIndexValid ? indexOfItem + ComboBox.SKIP_ITEMS_SIZE : itemsLength - 1;\n\t\tconst shouldMoveForward = this._filteredItems[indexOfItem].isGroupItem && !this.open;\n\n\t\tthis._handleItemNavigation(event, indexOfItem, shouldMoveForward);\n\t}\n\n\t_handleHome(event, indexOfItem) {\n\t\tconst shouldMoveForward = this._filteredItems[0].isGroupItem && !this.open;\n\n\t\tif (this.hasValueStateText && this.open) {\n\t\t\tthis._clearFocus();\n\t\t\tthis._itemFocused = false;\n\t\t\tthis._isValueStateFocused = true;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._handleItemNavigation(event, indexOfItem = 0, shouldMoveForward);\n\t}\n\n\t_handleEnd(event, indexOfItem) {\n\t\tthis._handleItemNavigation(event, indexOfItem = this._filteredItems.length - 1, true /* isForward */);\n\t}\n\n\t_keyup(event) {\n\t\tthis._userTypedValue = this.value.substring(0, this.inner.selectionStart);\n\t}\n\n\t_keydown(event) {\n\t\tconst isNavKey = isDown(event) || isUp(event) || isPageUp(event) || isPageDown(event) || isHome(event) || isEnd(event);\n\t\tthis._autocomplete = !(isBackSpace(event) || isDelete(event));\n\t\tthis._isKeyNavigation = false;\n\n\t\tif (isNavKey && !this.readonly && this._filteredItems.length) {\n\t\t\tthis.handleNavKeyPress(event);\n\t\t}\n\n\t\tif (isEnter(event)) {\n\t\t\tthis._fireChangeEvent();\n\t\t\tthis._closeRespPopover();\n\t\t\tthis.focused = true;\n\t\t}\n\n\t\tif (isEscape(event)) {\n\t\t\tthis.focused = true;\n\t\t\tthis.value = !this.open ? this._lastValue : this.value;\n\t\t\tthis._isValueStateFocused = false;\n\t\t}\n\n\t\tif ((isTabNext(event) || isTabPrevious(event)) && this.open) {\n\t\t\tthis._closeRespPopover();\n\t\t}\n\n\t\tif (isShow(event) && !this.readonly && !this.disabled) {\n\t\t\tevent.preventDefault();\n\n\t\t\tthis._resetFilter();\n\t\t\tthis._toggleRespPopover();\n\n\t\t\tconst selectedItem = this._filteredItems.find(item => {\n\t\t\t\treturn item.selected;\n\t\t\t});\n\n\t\t\tif (selectedItem && this.open) {\n\t\t\t\tthis._itemFocused = true;\n\t\t\t\tselectedItem.focused = true;\n\t\t\t\tthis.focused = false;\n\t\t\t} else if (this.open && this._filteredItems.length) {\n\t\t\t\t// If no item is selected, select the first one on \"Show\" (F4, Alt+Up/Down)\n\t\t\t\tthis._handleItemNavigation(event, 0, true /* isForward */);\n\t\t\t} else {\n\t\t\t\tthis.focused = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_click(event) {\n\t\tif (isPhone() && !this.readonly) {\n\t\t\tthis._openRespPopover();\n\t\t}\n\t}\n\n\t_closeRespPopover(event) {\n\t\tif (isPhone() && event && event.target.classList.contains(\"ui5-responsive-popover-close-btn\") && this._selectedItemText) {\n\t\t\tthis.value = this._selectedItemText;\n\t\t\tthis.filterValue = this._selectedItemText;\n\t\t}\n\n\t\tthis._isValueStateFocused = false;\n\t\tthis._clearFocus();\n\n\t\tthis.responsivePopover.close();\n\t}\n\n\t_openRespPopover() {\n\t\tthis.responsivePopover.showAt(this);\n\t}\n\n\t_filterItems(str) {\n\t\tconst itemsToFilter = this.items.filter(item => !item.isGroupItem);\n\t\tconst filteredItems = (Filters[this.filter] || Filters.StartsWithPerTerm)(str, itemsToFilter);\n\n\t\t// Return the filtered items and their group items\n\t\treturn this.items.filter((item, idx, allItems) => ComboBox._groupItemFilter(item, ++idx, allItems, filteredItems) || filteredItems.indexOf(item) !== -1);\n\t}\n\n\t/**\n\t * Returns true if the group header should be shown (if there is a filtered suggestion item for this group item)\n\t *\n\t * @private\n\t */\n\tstatic _groupItemFilter(item, idx, allItems, filteredItems) {\n\t\tif (item.isGroupItem) {\n\t\t\tlet groupHasFilteredItems;\n\n\t\t\twhile (allItems[idx] && !allItems[idx].isGroupItem && !groupHasFilteredItems) {\n\t\t\t\tgroupHasFilteredItems = filteredItems.indexOf(allItems[idx]) !== -1;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\treturn groupHasFilteredItems;\n\t\t}\n\t}\n\n\t_getFirstMatchingItem(current) {\n\t\tconst currentlyFocusedItem = this.items.find(item => item.focused === true);\n\n\t\tif (currentlyFocusedItem && currentlyFocusedItem.isGroupItem) {\n\t\t\tthis.value = this.filterValue;\n\t\t\treturn;\n\t\t}\n\n\t\tconst matchingItems = this._startsWithMatchingItems(current).filter(item => !item.isGroupItem);\n\n\t\tif (matchingItems.length) {\n\t\t\treturn matchingItems[0];\n\t\t}\n\t}\n\n\t_applyAtomicValueAndSelection(item, filterValue, highlightValue) {\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = (item && item.text) || \"\";\n\t\tthis.inner.value = value;\n\t\tif (highlightValue) {\n\t\t\tfilterValue = filterValue || \"\";\n\t\t\tthis.inner.setSelectionRange(filterValue.length, value.length);\n\t\t}\n\t\tthis.value = value;\n\t}\n\n\t_selectMatchingItem() {\n\t\tconst currentlyFocusedItem = this.items.find(item => item.focused);\n\t\tconst shouldSelectionBeCleared = currentlyFocusedItem && currentlyFocusedItem.isGroupItem;\n\n\t\tthis._filteredItems = this._filteredItems.map(item => {\n\t\t\titem.selected = !item.isGroupItem && (item.text === this.value) && !shouldSelectionBeCleared;\n\t\t\treturn item;\n\t\t});\n\t}\n\n\t_fireChangeEvent() {\n\t\tif (this.value !== this._lastValue) {\n\t\t\tthis.fireEvent(\"change\");\n\t\t\tthis._lastValue = this.value;\n\t\t}\n\t}\n\n\t_inputChange(event) {\n\t\tevent.preventDefault();\n\t}\n\n\t_itemMousedown(event) {\n\t\tevent.preventDefault();\n\t}\n\n\t_selectItem(event) {\n\t\tconst listItem = event.detail.item;\n\n\t\tthis._selectedItemText = listItem.mappedItem.text;\n\t\tthis._selectionPerformed = true;\n\n\t\tconst sameItemSelected = this.value === this._selectedItemText;\n\t\tconst sameSelectionPerformed = this.value.toLowerCase() === this.filterValue.toLowerCase();\n\n\t\tif (sameItemSelected && sameSelectionPerformed) {\n\t\t\treturn this._closeRespPopover();\n\t\t}\n\n\t\tthis.value = this._selectedItemText;\n\n\t\tif (!listItem.mappedItem.selected) {\n\t\t\tthis.fireEvent(\"selection-change\", {\n\t\t\t\titem: listItem.mappedItem,\n\t\t\t});\n\n\t\t\tthis._selectionChanged = true;\n\t\t}\n\n\t\tthis._filteredItems.map(item => {\n\t\t\titem.selected = (item === listItem.mappedItem && !item.isGroupItem);\n\t\t\treturn item;\n\t\t});\n\n\t\tthis._fireChangeEvent();\n\t\tthis._closeRespPopover();\n\n\t\t// reset selection\n\t\tthis.inner.setSelectionRange(this.value.length, this.value.length);\n\t}\n\n\t_onItemFocus(event) {\n\t\tthis._itemFocused = true;\n\t}\n\n\t_announceSelectedItem(indexOfItem) {\n\t\tconst itemPositionText = ComboBox.i18nBundle.getText(LIST_ITEM_POSITION, indexOfItem + 1, this._filteredItems.length);\n\t\tconst itemSelectionText = ComboBox.i18nBundle.getText(LIST_ITEM_SELECTED);\n\n\t\tannounce(`${itemPositionText} ${itemSelectionText}`, \"Polite\");\n\t}\n\n\tget _headerTitleText() {\n\t\treturn ComboBox.i18nBundle.getText(INPUT_SUGGESTIONS_TITLE);\n\t}\n\n\tget _iconAccessibleNameText() {\n\t\treturn ComboBox.i18nBundle.getText(SELECT_OPTIONS);\n\t}\n\n\tget inner() {\n\t\treturn isPhone() ? this.responsivePopover.querySelector(\".ui5-input-inner-phone\") : this.shadowRoot.querySelector(\"[inner-input]\");\n\t}\n\n\tasync _respPopover() {\n\t\tconst staticAreaItem = await this.getStaticAreaItemDomRef();\n\t\tthis.responsivePopover = staticAreaItem.querySelector(\"[ui5-responsive-popover]\");\n\t\treturn this.responsivePopover;\n\t}\n\n\tget editable() {\n\t\treturn !this.readonly;\n\t}\n\n\tget hasValueState() {\n\t\treturn this.valueState !== ValueState.None;\n\t}\n\n\tget hasValueStateText() {\n\t\treturn this.hasValueState && this.valueState !== ValueState.Success;\n\t}\n\n\tget valueStateText() {\n\t\treturn this.valueStateTextMappings[this.valueState];\n\t}\n\n\tget valueStateMessageText() {\n\t\treturn this.getSlottedNodes(\"valueStateMessage\").map(el => el.cloneNode(true));\n\t}\n\n\tget valueStateTextId() {\n\t\treturn this.hasValueState ? `${this._id}-valueStateDesc` : undefined;\n\t}\n\n\tget valueStateTextMappings() {\n\t\treturn {\n\t\t\t\"Success\": ComboBox.i18nBundle.getText(VALUE_STATE_SUCCESS),\n\t\t\t\"Error\": ComboBox.i18nBundle.getText(VALUE_STATE_ERROR),\n\t\t\t\"Warning\": ComboBox.i18nBundle.getText(VALUE_STATE_WARNING),\n\t\t\t\"Information\": ComboBox.i18nBundle.getText(VALUE_STATE_INFORMATION),\n\t\t};\n\t}\n\n\tget shouldOpenValueStateMessagePopover() {\n\t\treturn this.focused && !this.readonly && this.hasValueStateText && !this._iconPressed\n\t\t\t&& !this.open && !this._isPhone;\n\t}\n\n\tget shouldDisplayDefaultValueStateMessage() {\n\t\treturn !this.valueStateMessage.length && this.hasValueStateText;\n\t}\n\n\tget _valueStatePopoverHorizontalAlign() {\n\t\treturn this.effectiveDir !== \"rtl\" ? \"Left\" : \"Right\";\n\t}\n\n\t/**\n\t * This method is relevant for sap_horizon theme only\n\t */\n\tget _valueStateMessageIcon() {\n\t\tconst iconPerValueState = {\n\t\t\tError: \"error\",\n\t\t\tWarning: \"alert\",\n\t\t\tSuccess: \"sys-enter-2\",\n\t\t\tInformation: \"information\",\n\t\t};\n\n\t\treturn this.valueState !== ValueState.None ? iconPerValueState[this.valueState] : \"\";\n\t}\n\n\tget open() {\n\t\treturn this.responsivePopover ? this.responsivePopover.opened : false;\n\t}\n\n\tget _isPhone() {\n\t\treturn isPhone();\n\t}\n\n\tget itemTabIndex() {\n\t\treturn undefined;\n\t}\n\n\tget ariaLabelText() {\n\t\treturn getEffectiveAriaLabelText(this);\n\t}\n\n\tstatic get dependencies() {\n\t\treturn [\n\t\t\tComboBoxItem,\n\t\t\tIcon,\n\t\t\tResponsivePopover,\n\t\t\tList,\n\t\t\tBusyIndicator,\n\t\t\tButton,\n\t\t\tStandardListItem,\n\t\t\tPopover,\n\t\t\tComboBoxGroupItem,\n\t\t];\n\t}\n\n\tstatic async onDefine() {\n\t\tComboBox.i18nBundle = await getI18nBundle(\"@ui5/webcomponents\");\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\tpopoverHeader: {\n\t\t\t\t\"width\": `${this.offsetWidth}px`,\n\t\t\t},\n\t\t\tsuggestionPopoverHeader: {\n\t\t\t\t\"display\": this._listWidth === 0 ? \"none\" : \"inline-block\",\n\t\t\t\t\"width\": `${this._listWidth}px`,\n\t\t\t},\n\t\t};\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\tpopover: {\n\t\t\t\t\"ui5-suggestions-popover\": !this.isPhone,\n\t\t\t\t\"ui5-suggestions-popover-with-value-state-header\": !this.isPhone && this.hasValueStateText,\n\t\t\t},\n\t\t\tpopoverValueState: {\n\t\t\t\t\"ui5-valuestatemessage-header\": true,\n\t\t\t\t\"ui5-valuestatemessage-root\": true,\n\t\t\t\t\"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n\t\t\t\t\"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n\t\t\t\t\"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n\t\t\t\t\"ui5-valuestatemessage--information\": this.valueState === ValueState.Information,\n\t\t\t},\n\t\t};\n\t}\n}\n\nComboBox.SKIP_ITEMS_SIZE = 10;\n\nComboBox.define();\n\nexport default ComboBox;\n"]},"metadata":{},"sourceType":"module"}