{"ast":null,"code":"import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst isFocusTrap = el => {\n  return el.hasAttribute(\"data-ui5-focus-trap\");\n};\n\nconst getFirstFocusableElement = async (container, startFromContainer) => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n\n  return findFocusableElement(container, true, startFromContainer);\n};\n\nconst getLastFocusableElement = async (container, startFromContainer) => {\n  if (!container || isNodeHidden(container)) {\n    return null;\n  }\n\n  return findFocusableElement(container, false, startFromContainer);\n};\n\nconst isElemFocusable = el => {\n  return el.hasAttribute(\"data-ui5-focus-redirect\") || !isNodeHidden(el);\n};\n\nconst findFocusableElement = async (container, forward, startFromContainer) => {\n  let child;\n\n  if (container.shadowRoot) {\n    child = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n  } else if (container.assignedNodes && container.assignedNodes()) {\n    const assignedElements = container.assignedNodes();\n    child = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n  } else if (startFromContainer) {\n    child = container;\n  } else {\n    child = forward ? container.firstElementChild : container.lastElementChild;\n  }\n\n  let focusableDescendant;\n  /* eslint-disable no-await-in-loop */\n\n  while (child) {\n    const originalChild = child;\n\n    if (child.isUI5Element) {\n      child = await child.getFocusDomRefAsync();\n    }\n\n    if (!child) {\n      return null;\n    }\n\n    if (child.nodeType === 1 && isElemFocusable(child) && !isFocusTrap(child)) {\n      if (isNodeClickable(child)) {\n        return child && typeof child.focus === \"function\" ? child : null;\n      }\n\n      focusableDescendant = await findFocusableElement(child, forward);\n\n      if (focusableDescendant) {\n        return focusableDescendant && typeof focusableDescendant.focus === \"function\" ? focusableDescendant : null;\n      }\n    }\n\n    child = forward ? originalChild.nextSibling : originalChild.previousSibling;\n  }\n  /* eslint-enable no-await-in-loop */\n\n\n  return null;\n};\n\nexport { getFirstFocusableElement, getLastFocusableElement };","map":{"version":3,"sources":["/Users/flo/Desktop/mdao.fioriapp/node_modules/@ui5/webcomponents-base/dist/util/FocusableElements.js"],"names":["isNodeHidden","isNodeClickable","isFocusTrap","el","hasAttribute","getFirstFocusableElement","container","startFromContainer","findFocusableElement","getLastFocusableElement","isElemFocusable","forward","child","shadowRoot","firstChild","lastChild","assignedNodes","assignedElements","length","firstElementChild","lastElementChild","focusableDescendant","originalChild","isUI5Element","getFocusDomRefAsync","nodeType","focus","nextSibling","previousSibling"],"mappings":"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","sourcesContent":["import isNodeHidden from \"./isNodeHidden.js\";\nimport isNodeClickable from \"./isNodeClickable.js\";\n\nconst isFocusTrap = el => {\n\treturn el.hasAttribute(\"data-ui5-focus-trap\");\n};\n\nconst getFirstFocusableElement = async (container, startFromContainer) => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, true, startFromContainer);\n};\n\nconst getLastFocusableElement = async (container, startFromContainer) => {\n\tif (!container || isNodeHidden(container)) {\n\t\treturn null;\n\t}\n\n\treturn findFocusableElement(container, false, startFromContainer);\n};\n\nconst isElemFocusable = el => {\n\treturn el.hasAttribute(\"data-ui5-focus-redirect\") || !isNodeHidden(el);\n};\n\nconst findFocusableElement = async (container, forward, startFromContainer) => {\n\tlet child;\n\n\tif (container.shadowRoot) {\n\t\tchild = forward ? container.shadowRoot.firstChild : container.shadowRoot.lastChild;\n\t} else if (container.assignedNodes && container.assignedNodes()) {\n\t\tconst assignedElements = container.assignedNodes();\n\t\tchild = forward ? assignedElements[0] : assignedElements[assignedElements.length - 1];\n\t} else if (startFromContainer) {\n\t\tchild = container;\n\t} else {\n\t\tchild = forward ? container.firstElementChild : container.lastElementChild;\n\t}\n\n\tlet focusableDescendant;\n\n\t/* eslint-disable no-await-in-loop */\n\n\twhile (child) {\n\t\tconst originalChild = child;\n\n\t\tif (child.isUI5Element) {\n\t\t\tchild = await child.getFocusDomRefAsync();\n\t\t}\n\n\t\tif (!child) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (child.nodeType === 1 && isElemFocusable(child) && !isFocusTrap(child)) {\n\t\t\tif (isNodeClickable(child)) {\n\t\t\t\treturn (child && typeof child.focus === \"function\") ? child : null;\n\t\t\t}\n\n\t\t\tfocusableDescendant = await findFocusableElement(child, forward);\n\t\t\tif (focusableDescendant) {\n\t\t\t\treturn (focusableDescendant && typeof focusableDescendant.focus === \"function\") ? focusableDescendant : null;\n\t\t\t}\n\t\t}\n\n\t\tchild = forward ? originalChild.nextSibling : originalChild.previousSibling;\n\t}\n\n\t/* eslint-enable no-await-in-loop */\n\n\treturn null;\n};\n\nexport {\n\tgetFirstFocusableElement,\n\tgetLastFocusableElement,\n};\n"]},"metadata":{},"sourceType":"module"}